/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={418:e=>{var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,s){for(var o,a,l=i(e),u=1;u<arguments.length;u++){for(var c in o=Object(arguments[u]))n.call(o,c)&&(l[c]=o[c]);if(t){a=t(o);for(var h=0;h<a.length;h++)r.call(o,a[h])&&(l[a[h]]=o[a[h]])}}return l}},448:(e,t,n)=>{var r=n(294),i=n(418),s=n(840);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var a=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(m,e)||!f.call(p,e)&&(d.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,w);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=60103,E=60106,k=60107,T=60108,S=60114,C=60109,N=60110,A=60112,R=60113,D=60120,x=60115,P=60116,O=60121,L=60128,M=60129,F=60130,U=60131;if("function"==typeof Symbol&&Symbol.for){var V=Symbol.for;I=V("react.element"),E=V("react.portal"),k=V("react.fragment"),T=V("react.strict_mode"),S=V("react.profiler"),C=V("react.provider"),N=V("react.context"),A=V("react.forward_ref"),R=V("react.suspense"),D=V("react.suspense_list"),x=V("react.memo"),P=V("react.lazy"),O=V("react.block"),V("react.scope"),L=V("react.opaque.id"),M=V("react.debug_trace_mode"),F=V("react.offscreen"),U=V("react.legacy_hidden")}var j,q="function"==typeof Symbol&&Symbol.iterator;function z(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=q&&e[q]||e["@@iterator"])?e:null}function B(e){if(void 0===j)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var $=!1;function W(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function K(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return W(e.type,!1);case 11:return W(e.type.render,!1);case 22:return W(e.type._render,!1);case 1:return W(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case k:return"Fragment";case E:return"Portal";case S:return"Profiler";case T:return"StrictMode";case R:return"Suspense";case D:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case x:return H(e.type);case O:return H(e._render);case P:t=e._payload,e=e._init;try{return H(e(t))}catch(e){}}return null}function G(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ue(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,me,ge=(me=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ve).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var Ie=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(Ie[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ne=null;function Ae(e){if(e=ni(e)){if("function"!=typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Se(e.stateNode,e.type,t))}}function Re(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function De(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function xe(e,t){return e(t)}function Pe(e,t,n,r,i){return e(t,n,r,i)}function Oe(){}var Le=xe,Me=!1,Fe=!1;function Ue(){null===Ce&&null===Ne||(Oe(),De())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var je=!1;if(h)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){je=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(me){je=!1}function ze(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var Be=!1,$e=null,We=!1,Ke=null,He={onError:function(e){Be=!0,$e=e}};function Ge(e,t,n,r,i,s,o,a,l){Be=!1,$e=null,ze.apply(He,arguments)}function Qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Je(e){if(Qe(e)!==e)throw Error(o(188))}function Xe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Je(i),e;if(s===r)return Je(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,st=[],ot=null,at=null,lt=null,ut=new Map,ct=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ct.delete(t.pointerId)}}function mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=ft(t,n,r,i,s),null!==t&&null!==(t=ni(t))&&tt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function gt(e){var t=ti(e.target);if(null!==t){var n=Qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){yt(e)&&n.delete(t)}function wt(){for(it=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ot&&yt(ot)&&(ot=null),null!==at&&yt(at)&&(at=null),null!==lt&&yt(lt)&&(lt=null),ut.forEach(vt),ct.forEach(vt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,wt)))}function _t(e){function t(t){return bt(t,e)}if(0<st.length){bt(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==at&&bt(at,e),null!==lt&&bt(lt,e),ut.forEach(t),ct.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)gt(n),null===n.blockedOn&&ht.shift()}function It(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:It("Animation","AnimationEnd"),animationiteration:It("Animation","AnimationIteration"),animationstart:It("Animation","AnimationStart"),transitionend:It("Transition","TransitionEnd")},kt={},Tt={};function St(e){if(kt[e])return kt[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return kt[e]=n[t];return e}h&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Ct=St("animationend"),Nt=St("animationiteration"),At=St("animationstart"),Rt=St("transitionend"),Dt=new Map,xt=new Map,Pt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Ot(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),xt.set(r,t),Dt.set(r,i),u(i,[r])}}(0,s.unstable_now)();var Lt=8;function Mt(e){if(0!=(1&e))return Lt=15,1;if(0!=(2&e))return Lt=14,2;if(0!=(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!=(32&e)?(Lt=11,32):0!=(t=192&e)?(Lt=10,t):0!=(256&e)?(Lt=9,256):0!=(t=3584&e)?(Lt=8,t):0!=(4096&e)?(Lt=7,4096):0!=(t=4186112&e)?(Lt=6,t):0!=(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!=(134217728&e)?(Lt=3,134217728):0!=(t=805306368&e)?(Lt=2,t):0!=(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)r=s,i=Lt=15;else if(0!=(s=134217727&n)){var l=s&~o;0!==l?(r=Mt(l),i=Lt):0!=(a&=s)&&(r=Mt(a),i=Lt)}else 0!=(s=n&~o)?(r=Mt(s),i=Lt):0!==a&&(r=Mt(a),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-Bt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&o)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Bt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=jt(24&~t))?Vt(10,t):e;case 10:return 0===(e=jt(192&~t))?Vt(8,t):e;case 8:return 0===(e=jt(3584&~t))&&0===(e=jt(4186112&~t))&&(e=512),e;case 2:return 0===(t=jt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function jt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Bt(t)]=n}var Bt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-($t(e)/Wt|0)|0},$t=Math.log,Wt=Math.LN2,Kt=s.unstable_UserBlockingPriority,Ht=s.unstable_runWithPriority,Gt=!0;function Qt(e,t,n,r){Me||Oe();var i=Jt,s=Me;Me=!0;try{Pe(i,e,t,n,r)}finally{(Me=s)||Ue()}}function Yt(e,t,n,r){Ht(Kt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Gt)if((i=0==(4&t))&&0<st.length&&-1<dt.indexOf(e))e=ft(null,e,t,n,r),st.push(e);else{var s=Xt(e,t,n,r);if(null===s)i&&pt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=ft(s,e,t,n,r),void st.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=mt(ot,e,t,n,r,i),!0;case"dragenter":return at=mt(at,e,t,n,r,i),!0;case"mouseover":return lt=mt(lt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ut.set(s,mt(ut.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ct.set(s,mt(ct.get(s)||null,e,t,n,r,i)),!0}return!1}(s,e,t,n,r))return;pt(e,r)}Or(e,t,r,null,n)}}}function Xt(e,t,n,r){var i=Te(r);if(null!==(i=ti(i))){var s=Qe(i);if(null===s)i=null;else{var o=s.tag;if(13===o){if(null!==(i=Ye(s)))return i;i=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Or(e,t,r,i,n),null}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function on(){return!1}function an(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var ln,un,cn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(hn),fn=i({},hn,{view:0,detail:0}),pn=an(fn),mn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(ln=e.screenX-cn.screenX,un=e.screenY-cn.screenY):un=ln=0,cn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:un}}),gn=an(mn),yn=an(i({},mn,{dataTransfer:0})),vn=an(i({},fn,{relatedTarget:0})),wn=an(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(bn),In=an(i({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var Nn=i({},fn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(Nn),Rn=an(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=an(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),xn=an(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Pn),Ln=[9,13,27,32],Mn=h&&"CompositionEvent"in window,Fn=null;h&&"documentMode"in document&&(Fn=document.documentMode);var Un=h&&"TextEvent"in window&&!Fn,Vn=h&&(!Mn||Fn&&8<Fn&&11>=Fn),jn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var $n=!1,Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Re(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Qn=null;function Yn(e){Nr(e,0)}function Jn(e){if(J(ri(e)))return e}function Xn(e,t){if("change"===e)return t}var Zn=!1;if(h){var er;if(h){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"==typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Gn&&(Gn.detachEvent("onpropertychange",ir),Qn=Gn=null)}function ir(e){if("value"===e.propertyName&&Jn(Qn)){var t=[];if(Hn(t,Qn,e,Te(e)),e=Yn,Me)e(t);else{Me=!0;try{xe(e,t)}finally{Me=!1,Ue()}}}}function sr(e,t,n){"focusin"===e?(rr(),Qn=n,(Gn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Qn)}function ar(e,t){if("click"===e)return Jn(t)}function lr(e,t){if("input"===e||"change"===e)return Jn(t)}var ur="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},cr=Object.prototype.hasOwnProperty;function hr(e,t){if(ur(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!cr.call(t,n[r])||!ur(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,vr=null,wr=null,br=null,_r=!1;function Ir(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==vr||vr!==X(r)||(r="selectionStart"in(r=vr)&&gr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Mr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}Ot("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ot("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ot(Pt,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),kr=0;kr<Er.length;kr++)xt.set(Er[kr],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,u){if(Ge.apply(this,arguments),Be){if(!Be)throw Error(o(198));var c=$e;Be=!1,$e=null,We||(We=!0,Ke=c)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Cr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Cr(i,a,u),s=l}}}if(We)throw e=Ke,We=!1,Ke=null,e}function Ar(e,t){var n=si(t),r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[Rr]||(e[Rr]=!0,a.forEach((function(t){Sr.has(t)||xr(t,!1,e,null),xr(t,!0,e,null)})))}function xr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,s=r}var o=si(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(i|=4),Pr(s,e,i,t),o.add(a))}function Pr(e,t,n,r){var i=xt.get(t);switch(void 0===i?2:i){case 0:i=Qt;break;case 1:i=Yt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Or(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ti(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e();Fe=!0;try{Le(e,t,n)}finally{Fe=!1,Ue()}}((function(){var r=s,i=Te(n),o=[];e:{var a=Dt.get(e);if(void 0!==a){var l=dn,u=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case Ct:case Nt:case At:l=wn;break;case Rt:l=xn;break;case"scroll":l=pn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Rn}var c=0!=(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&null!=(m=Ve(p,d))&&c.push(Lr(p,m,f))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(u=n.relatedTarget||n.fromElement)||!ti(u)&&!u[Zr])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ti(u):null)&&(u!==(h=Qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=gn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Rn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:ri(l),f=null==u?a:ri(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,ti(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Fr(f))p++;for(f=0,m=d;m;m=Fr(m))f++;for(;0<p-f;)c=Fr(c),p--;for(;0<f-p;)d=Fr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Fr(c),d=Fr(d)}c=null}else c=null;null!==l&&Ur(o,a,l,c,!1),null!==u&&null!==h&&Ur(o,h,u,c,!0)}if("select"===(l=(a=r?ri(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Kn(a))if(Zn)g=lr;else{g=or;var y=sr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ar);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ie(a,"number",a.value)),y=r?ri(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(vr=y,wr=r,br=null);break;case"focusout":br=wr=vr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Ir(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Ir(o,n,i)}var v;if(Mn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else $n?zn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Vn&&"ko"!==n.locale&&($n||"onCompositionStart"!==w?"onCompositionEnd"===w&&$n&&(v=nn()):(en="value"in(Zt=i)?Zt.value:Zt.textContent,$n=!0)),0<(y=Mr(r,w)).length&&(w=new In(w,e,null,n,i),o.push({event:w,listeners:y}),(v||null!==(v=Bn(n)))&&(w.data=v))),(v=Un?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(qn=!0,jn);case"textInput":return(e=t.data)===jn&&qn?null:e;default:return null}}(e,n):function(e,t){if($n)return"compositionend"===e||!Mn&&zn(e,t)?(e=nn(),tn=en=Zt=null,$n=!1,e):null;switch(e){default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Mr(r,"onBeforeInput")).length&&(i=new In("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v)}Nr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ve(e,n))&&r.unshift(Lr(e,s,i)),null!=(s=Ve(e,t))&&r.push(Lr(e,s,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Ve(n,s))&&o.unshift(Lr(n,l,a)):i||null!=(l=Ve(n,s))&&o.push(Lr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var jr=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Br(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var $r="function"==typeof setTimeout?setTimeout:void 0,Wr="function"==typeof clearTimeout?clearTimeout:void 0;function Kr(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Hr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Gr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Qr=0,Yr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Yr,Xr="__reactProps$"+Yr,Zr="__reactContainer$"+Yr,ei="__reactEvents$"+Yr;function ti(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zr]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Gr(e);null!==e;){if(n=e[Jr])return n;e=Gr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[Jr]||e[Zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[Xr]||null}function si(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],ai=-1;function li(e){return{current:e}}function ui(e){0>ai||(e.current=oi[ai],oi[ai]=null,ai--)}function ci(e,t){ai++,oi[ai]=e.current,e.current=t}var hi={},di=li(hi),fi=li(!1),pi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gi(e){return null!=e.childContextTypes}function yi(){ui(fi),ui(di)}function vi(e,t,n){if(di.current!==hi)throw Error(o(168));ci(di,t),ci(fi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,H(t)||"Unknown",s));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,pi=di.current,ci(di,e),ci(fi,fi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ui(fi),ui(di),ci(di,e)):ui(fi),ci(fi,n)}var Ii=null,Ei=null,ki=s.unstable_runWithPriority,Ti=s.unstable_scheduleCallback,Si=s.unstable_cancelCallback,Ci=s.unstable_shouldYield,Ni=s.unstable_requestPaint,Ai=s.unstable_now,Ri=s.unstable_getCurrentPriorityLevel,Di=s.unstable_ImmediatePriority,xi=s.unstable_UserBlockingPriority,Pi=s.unstable_NormalPriority,Oi=s.unstable_LowPriority,Li=s.unstable_IdlePriority,Mi={},Fi=void 0!==Ni?Ni:function(){},Ui=null,Vi=null,ji=!1,qi=Ai(),zi=1e4>qi?Ai:function(){return Ai()-qi};function Bi(){switch(Ri()){case Di:return 99;case xi:return 98;case Pi:return 97;case Oi:return 96;case Li:return 95;default:throw Error(o(332))}}function $i(e){switch(e){case 99:return Di;case 98:return xi;case 97:return Pi;case 96:return Oi;case 95:return Li;default:throw Error(o(332))}}function Wi(e,t){return e=$i(e),ki(e,t)}function Ki(e,t,n){return e=$i(e),Ti(e,t,n)}function Hi(){if(null!==Vi){var e=Vi;Vi=null,Si(e)}Gi()}function Gi(){if(!ji&&null!==Ui){ji=!0;var e=0;try{var t=Ui;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(t){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ti(Di,Hi),t}finally{ji=!1}}}var Qi=_.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=li(null),Xi=null,Zi=null,es=null;function ts(){es=Zi=Xi=null}function ns(e){var t=Ji.current;ui(Ji),e.type._context._currentValue=t}function rs(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function is(e,t){Xi=e,es=Zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function ss(e,t){if(es!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(es=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zi){if(null===Xi)throw Error(o(308));Zi=t,Xi.dependencies={lanes:0,firstContext:t,responders:null}}else Zi=Zi.next=t;return e._currentValue}var os=!1;function as(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cs(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function hs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ds(e,t,n,r){var s=e.updateQueue;os=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var u=l,c=u.next;u.next=null,null===a?o=c:a.next=c,a=u;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=u)}}if(null!==o){for(d=s.baseState,a=0,h=c=u=null;;){l=o.lane;var f=o.eventTime;if((r&l)===l){null!==h&&(h=h.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(l=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,l);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(l="function"==typeof(p=m.payload)?p.call(f,d,l):p))break e;d=i({},d,l);break e;case 2:os=!0}}null!==o.callback&&(e.flags|=32,null===(l=s.effects)?s.effects=[o]:l.push(o))}else f={eventTime:f,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=f,u=d):h=h.next=f,a|=l;if(null===(o=o.next)){if(null===(l=s.shared.pending))break;o=l.next,l.next=null,s.lastBaseUpdate=l,s.shared.pending=null}}null===h&&(u=d),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,Ua|=a,e.lanes=a,e.memoizedState=d}}function fs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var ps=(new r.Component).refs;function ms(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var gs={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ul(),i=cl(e),s=us(r,i);s.payload=t,null!=n&&(s.callback=n),cs(e,s),hl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ul(),i=cl(e),s=us(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),cs(e,s),hl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ul(),r=cl(e),i=us(n,r);i.tag=2,null!=t&&(i.callback=t),cs(e,i),hl(e,r,n)}};function ys(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&hr(n,r)&&hr(i,s))}function vs(e,t,n){var r=!1,i=hi,s=t.contextType;return"object"==typeof s&&null!==s?s=ss(s):(i=gi(t)?pi:di.current,s=(r=null!=(r=t.contextTypes))?mi(e,i):hi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ws(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gs.enqueueReplaceState(t,t.state,null)}function bs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ps,as(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=ss(s):(s=gi(t)?pi:di.current,i.context=mi(e,s)),ds(e,n,i,r),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(ms(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&gs.enqueueReplaceState(i,i.state,null),ds(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var _s=Array.isArray;function Is(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ps&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Es(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function ks(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Bl(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Is(e,t,n),r.return=e,r):((r=$l(n.type,n.key,n.props,null,e.mode,r)).ref=Is(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Wl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Hl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case I:return(n=$l(t.type,t.key,t.props,null,e.mode,n)).ref=Is(e,null,t),n.return=e,n;case E:return(t=Gl(t,e.mode,n)).return=e,t}if(_s(t)||z(t))return(t=Wl(t,e.mode,n,null)).return=e,t;Es(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case I:return n.key===i?n.type===k?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null}if(_s(n)||z(n))return null!==i?null:h(e,t,n,r,null);Es(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case I:return e=e.get(null===r.key?n:r.key)||null,r.type===k?h(t,e,r.props.children,i,r.key):u(t,e,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_s(r)||z(r))return h(t,e=e.get(n)||null,r,i,null);Es(t,r)}return null}function m(i,o,a,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),u}function g(i,a,l,u){var c=z(l);if("function"!=typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,u);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=s(w,a,g),null===h?c=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,s,l){var u="object"==typeof s&&null!==s&&s.type===k&&null===s.key;u&&(s=s.props.children);var c="object"==typeof s&&null!==s;if(c)switch(s.$$typeof){case I:e:{for(c=s.key,u=r;null!==u;){if(u.key===c){if(7===u.tag){if(s.type===k){n(e,u.sibling),(r=i(u,s.props.children)).return=e,e=r;break e}}else if(u.elementType===s.type){n(e,u.sibling),(r=i(u,s.props)).ref=Is(e,u,s),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}s.type===k?((r=Wl(s.props.children,e.mode,l,s.key)).return=e,e=r):((l=$l(s.type,s.key,s.props,null,e.mode,l)).ref=Is(e,r,s),l.return=e,e=l)}return a(e);case E:e:{for(u=s.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Gl(s,e.mode,l)).return=e,e=r}return a(e)}if("string"==typeof s||"number"==typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Hl(s,e.mode,l)).return=e,e=r),a(e);if(_s(s))return m(e,r,s,l);if(z(s))return g(e,r,s,l);if(c&&Es(e,s),void 0===s&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Ts=ks(!0),Ss=ks(!1),Cs={},Ns=li(Cs),As=li(Cs),Rs=li(Cs);function Ds(e){if(e===Cs)throw Error(o(174));return e}function xs(e,t){switch(ci(Rs,t),ci(As,e),ci(Ns,Cs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(Ns),ci(Ns,t)}function Ps(){ui(Ns),ui(As),ui(Rs)}function Os(e){Ds(Rs.current);var t=Ds(Ns.current),n=fe(t,e.type);t!==n&&(ci(As,e),ci(Ns,n))}function Ls(e){As.current===e&&(ui(Ns),ui(As))}var Ms=li(0);function Fs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Us=null,Vs=null,js=!1;function qs(e,t){var n=ql(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function zs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Bs(e){if(js){var t=Vs;if(t){var n=t;if(!zs(e,t)){if(!(t=Hr(n.nextSibling))||!zs(e,t))return e.flags=-1025&e.flags|2,js=!1,void(Us=e);qs(Us,n)}Us=e,Vs=Hr(t.firstChild)}else e.flags=-1025&e.flags|2,js=!1,Us=e}}function $s(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Us=e}function Ws(e){if(e!==Us)return!1;if(!js)return $s(e),js=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Br(t,e.memoizedProps))for(t=Vs;t;)qs(e,t),t=Hr(t.nextSibling);if($s(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Vs=Hr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Vs=null}}else Vs=Us?Hr(e.stateNode.nextSibling):null;return!0}function Ks(){Vs=Us=null,js=!1}var Hs=[];function Gs(){for(var e=0;e<Hs.length;e++)Hs[e]._workInProgressVersionPrimary=null;Hs.length=0}var Qs=_.ReactCurrentDispatcher,Ys=_.ReactCurrentBatchConfig,Js=0,Xs=null,Zs=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function so(e,t,n,r,i,s){if(Js=s,Xs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qs.current=null===e||null===e.memoizedState?xo:Po,e=n(r,i),no){s=0;do{if(no=!1,!(25>s))throw Error(o(301));s+=1,eo=Zs=null,t.updateQueue=null,Qs.current=Oo,e=n(r,i)}while(no)}if(Qs.current=Do,t=null!==Zs&&null!==Zs.next,Js=0,eo=Zs=Xs=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?Xs.memoizedState=eo=e:eo=eo.next=e,eo}function ao(){if(null===Zs){var e=Xs.alternate;e=null!==e?e.memoizedState:null}else e=Zs.next;var t=null===eo?Xs.memoizedState:eo.next;if(null!==t)eo=t,Zs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Zs=e).memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},null===eo?Xs.memoizedState=eo=e:eo=eo.next=e}return eo}function lo(e,t){return"function"==typeof t?t(e):t}function uo(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Zs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=a=s=null,u=i;do{var c=u.lane;if((Js&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var h={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(a=l=h,s=r):l=l.next=h,Xs.lanes|=c,Ua|=c}u=u.next}while(null!==u&&u!==i);null===l?s=r:l.next=a,ur(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function co(e){var t=ao(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ur(s,t.memoizedState)||(Mo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Js&e)===e)&&(t._workInProgressVersionPrimary=r,Hs.push(t))),e)return n(t._source);throw Hs.push(t),Error(o(350))}function fo(e,t,n,r){var i=Ra;if(null===i)throw Error(o(349));var s=t._getVersion,a=s(t._source),l=Qs.current,u=l.useState((function(){return ho(i,t,n)})),c=u[1],h=u[0];u=eo;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,m=d.source;d=d.subscribe;var g=Xs;return e.memoizedState={refs:f,source:t,subscribe:r},l.useEffect((function(){f.getSnapshot=n,f.setSnapshot=c;var e=s(t._source);if(!ur(a,e)){e=n(t._source),ur(h,e)||(c(e),e=cl(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var l=31-Bt(o),u=1<<l;r[l]|=e,o&=~u}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=cl(g);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),ur(p,n)&&ur(m,t)&&ur(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:h}).dispatch=c=Ro.bind(null,Xs,e),u.queue=e,u.baseQueue=null,h=ho(i,t,n),u.memoizedState=u.baseState=h),h}function po(e,t,n){return fo(ao(),e,t,n)}function mo(e){var t=oo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:lo,lastRenderedState:e}).dispatch=Ro.bind(null,Xs,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Xs.updateQueue)?(t={lastEffect:null},Xs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},oo().memoizedState=e}function vo(){return ao().memoizedState}function wo(e,t,n,r){var i=oo();Xs.flags|=e,i.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=ao();r=void 0===r?null:r;var s=void 0;if(null!==Zs){var o=Zs.memoizedState;if(s=o.destroy,null!==r&&io(r,o.deps))return void go(t,n,s,r)}Xs.flags|=e,i.memoizedState=go(1|t,n,s,r)}function _o(e,t){return wo(516,4,e,t)}function Io(e,t){return bo(516,4,e,t)}function Eo(e,t){return bo(4,2,e,t)}function ko(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!=n?n.concat([e]):null,bo(4,2,ko.bind(null,t,e),n)}function So(){}function Co(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Bi();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Ys.transition;Ys.transition=1;try{e(!1),t()}finally{Ys.transition=n}}))}function Ro(e,t,n){var r=ul(),i=cl(e),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===Xs||null!==o&&o===Xs)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=o(a,n);if(s.eagerReducer=o,s.eagerState=l,ur(l,a))return}catch(e){}hl(e,i,r)}}var Do={readContext:ss,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},xo={readContext:ss,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:ss,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,wo(4,2,ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Xs,e),[r.memoizedState,e]},useRef:yo,useState:mo,useDebugValue:So,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return _o((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return yo(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fo(r,e,t,n)},useOpaqueIdentifier:function(){if(js){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Qr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0==(2&Xs.mode)&&(Xs.flags|=516,go(5,(function(){n("r:"+(Qr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Qr++).toString(36)),t},unstable_isNewReconciler:!1},Po={readContext:ss,useCallback:Co,useContext:ss,useEffect:Io,useImperativeHandle:To,useLayoutEffect:Eo,useMemo:No,useReducer:uo,useRef:vo,useState:function(){return uo(lo)},useDebugValue:So,useDeferredValue:function(e){var t=uo(lo),n=t[0],r=t[1];return Io((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=uo(lo)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return uo(lo)[0]},unstable_isNewReconciler:!1},Oo={readContext:ss,useCallback:Co,useContext:ss,useEffect:Io,useImperativeHandle:To,useLayoutEffect:Eo,useMemo:No,useReducer:co,useRef:vo,useState:function(){return co(lo)},useDebugValue:So,useDeferredValue:function(e){var t=co(lo),n=t[0],r=t[1];return Io((function(){var t=Ys.transition;Ys.transition=1;try{r(e)}finally{Ys.transition=t}}),[e]),n},useTransition:function(){var e=co(lo)[0];return[vo().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return co(lo)[0]},unstable_isNewReconciler:!1},Lo=_.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Ss(t,null,n,r):Ts(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var s=t.ref;return is(t,i),r=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,na(e,t,i))}function Vo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!=typeof o||zl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=$l(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,jo(e,t,o,r,i,s))}return o=e.child,0==(i&s)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?na(e,t,s):(t.flags|=1,(e=Bl(o,r)).ref=t.ref,e.return=t,t.child=e)}function jo(e,t,n,r,i,s){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0==(s&i))return t.lanes=e.lanes,na(e,t,s);0!=(16384&e.flags)&&(Mo=!0)}return Bo(e,t,n,r,s)}function qo(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},wl(0,n);else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wl(0,e),null;t.memoizedState={baseLanes:0},wl(0,null!==s?s.baseLanes:n)}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,wl(0,r);return Fo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Bo(e,t,n,r,i){var s=gi(n)?pi:di.current;return s=mi(t,s),is(t,i),n=so(e,t,n,r,s,i),null===e||Mo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,na(e,t,i))}function $o(e,t,n,r,i){if(gi(n)){var s=!0;bi(t)}else s=!1;if(is(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vs(t,n,r),bs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;u="object"==typeof u&&null!==u?ss(u):mi(t,u=gi(n)?pi:di.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==u)&&ws(t,o,r,u),os=!1;var d=t.memoizedState;o.state=d,ds(t,r,o,i),l=t.memoizedState,a!==r||d!==l||fi.current||os?("function"==typeof c&&(ms(t,n,c,r),l=t.memoizedState),(a=os||ys(t,n,a,r,d,l,u))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ls(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Yi(t.type,a),o.props=u,h=t.pendingProps,d=o.context,l="object"==typeof(l=n.contextType)&&null!==l?ss(l):mi(t,l=gi(n)?pi:di.current);var f=n.getDerivedStateFromProps;(c="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==l)&&ws(t,o,r,l),os=!1,d=t.memoizedState,o.state=d,ds(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||fi.current||os?("function"==typeof f&&(ms(t,n,f,r),p=t.memoizedState),(u=os||ys(t,n,u,r,d,p,l))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,s,i)}function Wo(e,t,n,r,i,s){zo(e,t);var o=0!=(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),na(e,t,s);r=t.stateNode,Lo.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ts(t,e.child,null,s),t.child=Ts(t,null,a,s)):Fo(e,t,a,s),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Ko(e){var t=e.stateNode;t.pendingContext?vi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vi(0,t.context,!1),xs(e,t.containerInfo)}var Ho,Go,Qo,Yo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,s=Ms.current,o=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&s)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),ci(Ms,1&s),null===e?(void 0!==i.fallback&&Bs(t),e=i.children,s=i.fallback,o?(e=Xo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,e):"number"==typeof i.unstable_expectedLoadTime?(e=Xo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,t.lanes=33554432,e):((n=Kl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=function(e,t,n,r,i){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:n};return 0==(2&s)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Bl(o,a),null!==e?r=Bl(e,r):(r=Wl(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Yo,i):(n=function(e,t,n,r){var i=e.child;return e=i.sibling,n=Bl(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,i.children,n),t.memoizedState=null,n))}function Xo(e,t,n,r){var i=e.mode,s=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=Kl(t,i,0,null),n=Wl(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function Zo(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),rs(e.return,t)}function ea(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function ta(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fo(e,t,r.children,n),0!=(2&(r=Ms.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Zo(e,n);else if(19===e.tag)Zo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ci(Ms,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ea(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ea(t,!0,n,null,s,t.lastEffect);break;case"together":ea(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function na(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ua|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Bl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Bl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ra(e,t){if(!js)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ia(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return gi(t.type)&&yi(),null;case 3:return Ps(),ui(fi),ui(di),Gs(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ws(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ls(t);var s=Ds(Rs.current);if(n=t.type,null!==e&&null!=t.stateNode)Go(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ds(Ns.current),Ws(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Jr]=t,r[Xr]=a,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Ar(Tr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,a),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ar("invalid",r);break;case"textarea":le(r,a),Ar("invalid",r)}for(var u in Ee(n,a),e=null,a)a.hasOwnProperty(u)&&(s=a[u],"children"===u?"string"==typeof s?r.textContent!==s&&(e=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(e=["children",""+s]):l.hasOwnProperty(u)&&null!=s&&"onScroll"===u&&Ar("scroll",r));switch(n){case"input":Y(r),re(r,a,!0);break;case"textarea":Y(r),ce(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(u=9===s.nodeType?s:s.ownerDocument,e===he&&(e=de(n)),e===he?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[Jr]=t,e[Xr]=r,Ho(e,t),t.stateNode=e,u=ke(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),s=r;break;case"iframe":case"object":case"embed":Ar("load",e),s=r;break;case"video":case"audio":for(s=0;s<Tr.length;s++)Ar(Tr[s],e);s=r;break;case"source":Ar("error",e),s=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),s=r;break;case"details":Ar("toggle",e),s=r;break;case"input":ee(e,r),s=Z(e,r),Ar("invalid",e);break;case"option":s=se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":le(e,r),s=ae(e,r),Ar("invalid",e);break;default:s=r}Ee(n,s);var c=s;for(a in c)if(c.hasOwnProperty(a)){var h=c[a];"style"===a?_e(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ge(e,h):"children"===a?"string"==typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"==typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Ar("scroll",e):null!=h&&b(e,a,h,u))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?oe(e,!!r.multiple,a,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=Vr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Qo(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));n=Ds(Rs.current),Ds(Ns.current),Ws(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return ui(Ms),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ws(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Ms.current)?0===La&&(La=3):(0!==La&&3!==La||(La=4),null===Ra||0==(134217727&Ua)&&0==(134217727&Va)||ml(Ra,xa))),(r||n)&&(t.flags|=4),null);case 4:return Ps(),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return ns(t),null;case 19:if(ui(Ms),null===(r=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(u=r.rendering))if(a)ra(r,!1);else{if(0!==La||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Fs(e))){for(t.flags|=64,ra(r,!1),null!==(a=u.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ci(Ms,1&Ms.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Ba&&(t.flags|=64,a=!0,ra(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Fs(u))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ra(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate&&!js)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Ba&&1073741824!==n&&(t.flags|=64,a=!0,ra(r,!1),t.lanes=33554432);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Ms.current,ci(Ms,a?1&t|2:1&t),n):null;case 23:case 24:return bl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function sa(e){switch(e.tag){case 1:gi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ps(),ui(fi),ui(di),Gs(),0!=(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ls(e),null;case 13:return ui(Ms),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ui(Ms),null;case 4:return Ps(),null;case 10:return ns(e),null;case 23:case 24:return bl(),null;default:return null}}function oa(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function aa(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Ho=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Go=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ds(Ns.current);var o,a=null;switch(n){case"input":s=Z(e,s),r=Z(e,r),a=[];break;case"option":s=se(e,s),r=se(e,r),a=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":s=ae(e,s),r=ae(e,r),a=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(e.onclick=Vr)}for(h in Ee(n,r),n=null,s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var c=r[h];if(u=null!=s?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(null!=c||null!=u))if("style"===h)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(a=a||[]).push(h,c)):"children"===h?"string"!=typeof c&&"number"!=typeof c||(a=a||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Ar("scroll",e),a||u===c||(a=[])):"object"==typeof c&&null!==c&&c.$$typeof===L?c.toString():(a=a||[]).push(h,c))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Qo=function(e,t,n,r){n!==r&&(t.flags|=4)};var la="function"==typeof WeakMap?WeakMap:Map;function ua(e,t,n){(n=us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ha||(Ha=!0,Ga=r),aa(0,t)},n}function ca(e,t,n){(n=us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return aa(0,t),r(i)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Qa?Qa=new Set([this]):Qa.add(this),aa(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ha="function"==typeof WeakSet?WeakSet:Set;function da(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Fl(e,t)}else t.current=null}function fa(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Kr(t.stateNode.containerInfo))}throw Error(o(163))}function pa(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Ol(n,e),Pl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function ma(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ga(e,t){if(Ei&&"function"==typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(Ii,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Ol(t,n);else{r=t;try{i()}catch(e){Fl(r,e)}}n=n.next}while(n!==e)}break;case 1:if(da(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Fl(t,e)}break;case 5:da(t);break;case 4:Ia(e,t)}}function ya(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function va(e){return 5===e.tag||3===e.tag||4===e.tag}function wa(e){e:{for(var t=e.return;null!==t;){if(va(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||va(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?ba(e,n,t):_a(e,n,t)}function ba(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(ba(e,t,n),e=e.sibling;null!==e;)ba(e,t,n),e=e.sibling}function _a(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(_a(e,t,n),e=e.sibling;null!==e;)_a(e,t,n),e=e.sibling}function Ia(e,t){for(var n,r,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(o(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var a=e,l=i,u=l;;)if(ga(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,l=i.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ga(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function Ea(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Xr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),ke(e,i),t=ke(e,r),i=0;i<s.length;i+=2){var a=s[i],l=s[i+1];"style"===a?_e(n,l):"dangerouslySetInnerHTML"===a?ge(n,l):"children"===a?ye(n,l):b(n,a,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ue(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(s=r.value)?oe(n,!!r.multiple,s,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(za=zi(),ma(t.child,!0)),void ka(t);case 19:return void ka(t);case 23:case 24:return void ma(t,null!==t.memoizedState)}throw Error(o(163))}function ka(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ha),t.forEach((function(t){var r=Vl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ta(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Sa=Math.ceil,Ca=_.ReactCurrentDispatcher,Na=_.ReactCurrentOwner,Aa=0,Ra=null,Da=null,xa=0,Pa=0,Oa=li(0),La=0,Ma=null,Fa=0,Ua=0,Va=0,ja=0,qa=null,za=0,Ba=1/0;function $a(){Ba=zi()+500}var Wa,Ka=null,Ha=!1,Ga=null,Qa=null,Ya=!1,Ja=null,Xa=90,Za=[],el=[],tl=null,nl=0,rl=null,il=-1,sl=0,ol=0,al=null,ll=!1;function ul(){return 0!=(48&Aa)?zi():-1!==il?il:il=zi()}function cl(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Bi()?1:2;if(0===sl&&(sl=Fa),0!==Qi.transition){0!==ol&&(ol=null!==qa?qa.pendingLanes:0),e=sl;var t=4186112&~ol;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=Bi(),e=Vt(0!=(4&Aa)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),sl)}function hl(e,t,n){if(50<nl)throw nl=0,rl=null,Error(o(185));if(null===(e=dl(e,t)))return null;zt(e,t,n),e===Ra&&(Va|=t,4===La&&ml(e,xa));var r=Bi();1===t?0!=(8&Aa)&&0==(48&Aa)?gl(e):(fl(e,n),0===Aa&&($a(),Hi())):(0==(4&Aa)||98!==r&&99!==r||(null===tl?tl=new Set([e]):tl.add(e)),fl(e,n)),qa=e}function dl(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function fl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Bt(a),u=1<<l,c=s[l];if(-1===c){if(0==(u&r)||0!=(u&i)){c=t,Mt(u);var h=Lt;s[l]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);a&=~u}if(r=Ft(e,e===Ra?xa:0),t=Lt,0===r)null!==n&&(n!==Mi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Si(n)}15===t?(n=gl.bind(null,e),null===Ui?(Ui=[n],Vi=Ti(Di,Gi)):Ui.push(n),n=Mi):14===t?n=Ki(99,gl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Ki(n,pl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function pl(e){if(il=-1,ol=sl=0,0!=(48&Aa))throw Error(o(327));var t=e.callbackNode;if(xl()&&e.callbackNode!==t)return null;var n=Ft(e,e===Ra?xa:0);if(0===n)return null;var r=n,i=Aa;Aa|=16;var s=El();for(Ra===e&&xa===r||($a(),_l(e,r));;)try{Sl();break}catch(t){Il(e,t)}if(ts(),Ca.current=s,Aa=i,null!==Da?r=0:(Ra=null,xa=0,r=La),0!=(Fa&Va))_l(e,0);else if(0!==r){if(2===r&&(Aa|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(n=Ut(e))&&(r=kl(e,n))),1===r)throw t=Ma,_l(e,0),ml(e,n),fl(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Al(e);break;case 3:if(ml(e,n),(62914560&n)===n&&10<(r=za+500-zi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ul(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=$r(Al.bind(null,e),r);break}Al(e);break;case 4:if(ml(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-Bt(n);s=1<<a,(a=r[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sa(n/1960))-n)){e.timeoutHandle=$r(Al.bind(null,e),n);break}Al(e);break;default:throw Error(o(329))}}return fl(e,zi()),e.callbackNode===t?pl.bind(null,e):null}function ml(e,t){for(t&=~ja,t&=~Va,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Bt(t),r=1<<n;e[n]=-1,t&=~r}}function gl(e){if(0!=(48&Aa))throw Error(o(327));if(xl(),e===Ra&&0!=(e.expiredLanes&xa)){var t=xa,n=kl(e,t);0!=(Fa&Va)&&(n=kl(e,t=Ft(e,t)))}else n=kl(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Aa|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(t=Ut(e))&&(n=kl(e,t))),1===n)throw n=Ma,_l(e,0),ml(e,t),fl(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Al(e),fl(e,zi()),null}function yl(e,t){var n=Aa;Aa|=1;try{return e(t)}finally{0===(Aa=n)&&($a(),Hi())}}function vl(e,t){var n=Aa;Aa&=-2,Aa|=8;try{return e(t)}finally{0===(Aa=n)&&($a(),Hi())}}function wl(e,t){ci(Oa,Pa),Pa|=t,Fa|=t}function bl(){Pa=Oa.current,ui(Oa)}function _l(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Da)for(n=Da.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&yi();break;case 3:Ps(),ui(fi),ui(di),Gs();break;case 5:Ls(r);break;case 4:Ps();break;case 13:case 19:ui(Ms);break;case 10:ns(r);break;case 23:case 24:bl()}n=n.return}Ra=e,Da=Bl(e.current,null),xa=Pa=Fa=t,La=0,Ma=null,ja=Va=Ua=0}function Il(e,t){for(;;){var n=Da;try{if(ts(),Qs.current=Do,to){for(var r=Xs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if(Js=0,eo=Zs=Xs=null,no=!1,Na.current=null,null===n||null===n.return){La=1,Ma=t,Da=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=xa,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(0==(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!=(1&Ms.current),d=o;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=d.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(f){var g=d.updateQueue;if(null===g){var y=new Set;y.add(u),d.updateQueue=y}else g.add(u);if(0==(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=us(-1,1);v.tag=2,cs(a,v)}a.lanes|=1;break e}l=void 0,a=t;var w=s.pingCache;if(null===w?(w=s.pingCache=new la,l=new Set,w.set(u,l)):void 0===(l=w.get(u))&&(l=new Set,w.set(u,l)),!l.has(a)){l.add(a);var b=Ul.bind(null,s,u,a);u.then(b,b)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((H(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==La&&(La=2),l=oa(l,a),d=o;do{switch(d.tag){case 3:s=l,d.flags|=4096,t&=-t,d.lanes|=t,hs(d,ua(0,s,t));break e;case 1:s=l;var _=d.type,I=d.stateNode;if(0==(64&d.flags)&&("function"==typeof _.getDerivedStateFromError||null!==I&&"function"==typeof I.componentDidCatch&&(null===Qa||!Qa.has(I)))){d.flags|=4096,t&=-t,d.lanes|=t,hs(d,ca(d,s,t));break e}}d=d.return}while(null!==d)}Nl(n)}catch(e){t=e,Da===n&&null!==n&&(Da=n=n.return);continue}break}}function El(){var e=Ca.current;return Ca.current=Do,null===e?Do:e}function kl(e,t){var n=Aa;Aa|=16;var r=El();for(Ra===e&&xa===t||_l(e,t);;)try{Tl();break}catch(t){Il(e,t)}if(ts(),Aa=n,Ca.current=r,null!==Da)throw Error(o(261));return Ra=null,xa=0,La}function Tl(){for(;null!==Da;)Cl(Da)}function Sl(){for(;null!==Da&&!Ci();)Cl(Da)}function Cl(e){var t=Wa(e.alternate,e,Pa);e.memoizedProps=e.pendingProps,null===t?Nl(e):Da=t,Na.current=null}function Nl(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=ia(n,t,Pa)))return void(Da=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Pa)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=sa(t)))return n.flags&=2047,void(Da=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Da=t);Da=t=e}while(null!==t);0===La&&(La=5)}function Al(e){var t=Bi();return Wi(99,Rl.bind(null,e,t)),null}function Rl(e,t){do{xl()}while(null!==Ja);if(0!=(48&Aa))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,l=e.expirationTimes;0<s;){var u=31-Bt(s),c=1<<u;i[u]=0,a[u]=-1,l[u]=-1,s&=~c}if(null!==tl&&0==(24&r)&&tl.has(e)&&tl.delete(e),e===Ra&&(Da=Ra=null,xa=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Aa,Aa|=32,Na.current=null,jr=Gt,gr(a=mr())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,s=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(e){l=null;break e}var h=0,d=-1,f=-1,p=0,m=0,g=a,y=null;t:for(;;){for(var v;g!==l||0!==s&&3!==g.nodeType||(d=h+s),g!==u||0!==c&&3!==g.nodeType||(f=h+c),3===g.nodeType&&(h+=g.nodeValue.length),null!==(v=g.firstChild);)y=g,g=v;for(;;){if(g===a)break t;if(y===l&&++p===s&&(d=h),y===u&&++m===c&&(f=h),null!==(v=g.nextSibling))break;y=(g=y).parentNode}g=v}l=-1===d||-1===f?null:{start:d,end:f}}else l=null;l=l||{start:0,end:0}}else l=null;qr={focusedElem:a,selectionRange:l},Gt=!1,al=null,ll=!1,Ka=r;do{try{Dl()}catch(e){if(null===Ka)throw Error(o(330));Fl(Ka,e),Ka=Ka.nextEffect}}while(null!==Ka);al=null,Ka=r;do{try{for(a=e;null!==Ka;){var w=Ka.flags;if(16&w&&ye(Ka.stateNode,""),128&w){var b=Ka.alternate;if(null!==b){var _=b.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&w){case 2:wa(Ka),Ka.flags&=-3;break;case 6:wa(Ka),Ka.flags&=-3,Ea(Ka.alternate,Ka);break;case 1024:Ka.flags&=-1025;break;case 1028:Ka.flags&=-1025,Ea(Ka.alternate,Ka);break;case 4:Ea(Ka.alternate,Ka);break;case 8:Ia(a,l=Ka);var I=l.alternate;ya(l),null!==I&&ya(I)}Ka=Ka.nextEffect}}catch(e){if(null===Ka)throw Error(o(330));Fl(Ka,e),Ka=Ka.nextEffect}}while(null!==Ka);if(_=qr,b=mr(),w=_.focusedElem,a=_.selectionRange,b!==w&&w&&w.ownerDocument&&pr(w.ownerDocument.documentElement,w)){null!==a&&gr(w)&&(b=a.start,void 0===(_=a.end)&&(_=b),"selectionStart"in w?(w.selectionStart=b,w.selectionEnd=Math.min(_,w.value.length)):(_=(b=w.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),l=w.textContent.length,I=Math.min(a.start,l),a=void 0===a.end?I:Math.min(a.end,l),!_.extend&&I>a&&(l=a,a=I,I=l),l=fr(w,I),s=fr(w,a),l&&s&&(1!==_.rangeCount||_.anchorNode!==l.node||_.anchorOffset!==l.offset||_.focusNode!==s.node||_.focusOffset!==s.offset)&&((b=b.createRange()).setStart(l.node,l.offset),_.removeAllRanges(),I>a?(_.addRange(b),_.extend(s.node,s.offset)):(b.setEnd(s.node,s.offset),_.addRange(b))))),b=[];for(_=w;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof w.focus&&w.focus(),w=0;w<b.length;w++)(_=b[w]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Gt=!!jr,qr=jr=null,e.current=n,Ka=r;do{try{for(w=e;null!==Ka;){var E=Ka.flags;if(36&E&&pa(w,Ka.alternate,Ka),128&E){b=void 0;var k=Ka.ref;if(null!==k){var T=Ka.stateNode;Ka.tag,b=T,"function"==typeof k?k(b):k.current=b}}Ka=Ka.nextEffect}}catch(e){if(null===Ka)throw Error(o(330));Fl(Ka,e),Ka=Ka.nextEffect}}while(null!==Ka);Ka=null,Fi(),Aa=i}else e.current=n;if(Ya)Ya=!1,Ja=e,Xa=t;else for(Ka=r;null!==Ka;)t=Ka.nextEffect,Ka.nextEffect=null,8&Ka.flags&&((E=Ka).sibling=null,E.stateNode=null),Ka=t;if(0===(r=e.pendingLanes)&&(Qa=null),1===r?e===rl?nl++:(nl=0,rl=e):nl=0,n=n.stateNode,Ei&&"function"==typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(Ii,n,void 0,64==(64&n.current.flags))}catch(e){}if(fl(e,zi()),Ha)throw Ha=!1,e=Ga,Ga=null,e;return 0!=(8&Aa)||Hi(),null}function Dl(){for(;null!==Ka;){var e=Ka.alternate;ll||null===al||(0!=(8&Ka.flags)?Ze(Ka,al)&&(ll=!0):13===Ka.tag&&Ta(e,Ka)&&Ze(Ka,al)&&(ll=!0));var t=Ka.flags;0!=(256&t)&&fa(e,Ka),0==(512&t)||Ya||(Ya=!0,Ki(97,(function(){return xl(),null}))),Ka=Ka.nextEffect}}function xl(){if(90!==Xa){var e=97<Xa?97:Xa;return Xa=90,Wi(e,Ll)}return!1}function Pl(e,t){Za.push(t,e),Ya||(Ya=!0,Ki(97,(function(){return xl(),null})))}function Ol(e,t){el.push(t,e),Ya||(Ya=!0,Ki(97,(function(){return xl(),null})))}function Ll(){if(null===Ja)return!1;var e=Ja;if(Ja=null,0!=(48&Aa))throw Error(o(331));var t=Aa;Aa|=32;var n=el;el=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===s)throw Error(o(330));Fl(s,e)}}for(n=Za,Za=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var l=i.create;i.destroy=l()}catch(e){if(null===s)throw Error(o(330));Fl(s,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Aa=t,Hi(),!0}function Ml(e,t,n){cs(e,t=ua(0,t=oa(n,t),1)),t=ul(),null!==(e=dl(e,1))&&(zt(e,1,t),fl(e,t))}function Fl(e,t){if(3===e.tag)Ml(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ml(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Qa||!Qa.has(r))){var i=ca(n,e=oa(t,e),1);if(cs(n,i),i=ul(),null!==(n=dl(n,1)))zt(n,1,i),fl(n,i);else if("function"==typeof r.componentDidCatch&&(null===Qa||!Qa.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Ul(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ul(),e.pingedLanes|=e.suspendedLanes&n,Ra===e&&(xa&n)===n&&(4===La||3===La&&(62914560&xa)===xa&&500>zi()-za?_l(e,0):ja|=n),fl(e,t)}function Vl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Bi()?1:2:(0===sl&&(sl=Fa),0===(t=jt(62914560&~sl))&&(t=4194304))),n=ul(),null!==(e=dl(e,t))&&(zt(e,t,n),fl(e,n))}function jl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function ql(e,t,n,r){return new jl(e,t,n,r)}function zl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bl(e,t){var n=e.alternate;return null===n?((n=ql(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $l(e,t,n,r,i,s){var a=2;if(r=e,"function"==typeof e)zl(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case k:return Wl(n.children,i,s,t);case M:a=8,i|=16;break;case T:a=8,i|=1;break;case S:return(e=ql(12,n,t,8|i)).elementType=S,e.type=S,e.lanes=s,e;case R:return(e=ql(13,n,t,i)).type=R,e.elementType=R,e.lanes=s,e;case D:return(e=ql(19,n,t,i)).elementType=D,e.lanes=s,e;case F:return Kl(n,i,s,t);case U:return(e=ql(24,n,t,i)).elementType=U,e.lanes=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case N:a=9;break e;case A:a=11;break e;case x:a=14;break e;case P:a=16,r=null;break e;case O:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=ql(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Wl(e,t,n,r){return(e=ql(7,e,r,t)).lanes=n,e}function Kl(e,t,n,r){return(e=ql(23,e,r,t)).elementType=F,e.lanes=n,e}function Hl(e,t,n){return(e=ql(6,e,null,t)).lanes=n,e}function Gl(e,t,n){return(t=ql(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Yl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Jl(e,t,n,r){var i=t.current,s=ul(),a=cl(i);e:if(n){t:{if(Qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(gi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var u=n.type;if(gi(u)){n=wi(n,u,l);break e}}n=l}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=us(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),cs(i,t),hl(i,a,s),a}function Xl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Zl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eu(e,t){Zl(e,t),(e=e.alternate)&&Zl(e,t)}function tu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ql(e,t,null!=n&&!0===n.hydrate),t=ql(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,as(t),e[Zr]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ru(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"==typeof i){var a=i;i=function(){var e=Xl(o);a.call(e)}}Jl(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tu(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"==typeof i){var l=i;i=function(){var e=Xl(o);l.call(e)}}vl((function(){Jl(t,o,e,i)}))}return Xl(o)}function iu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(o(200));return Yl(e,t,null,n)}Wa=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fi.current)Mo=!0;else{if(0==(n&r)){switch(Mo=!1,t.tag){case 3:Ko(t),Ks();break;case 5:Os(t);break;case 1:gi(t.type)&&bi(t);break;case 4:xs(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ci(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Jo(e,t,n):(ci(Ms,1&Ms.current),null!==(t=na(e,t,n))?t.sibling:null);ci(Ms,1&Ms.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return ta(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ci(Ms,Ms.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return na(e,t,n)}Mo=0!=(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),is(t,n),i=so(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,gi(r)){var s=!0;bi(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,as(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&ms(t,r,a,e),i.updater=gs,t.stateNode=i,i._reactInternals=t,bs(t,r,e,n),t=Wo(null,t,r,!0,s,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"==typeof e)return zl(e)?1:0;if(null!=e){if((e=e.$$typeof)===A)return 11;if(e===x)return 14}return 2}(i),e=Yi(i,e),s){case 0:t=Bo(null,t,i,e,n);break e;case 1:t=$o(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Yi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Bo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,$o(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Ko(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ls(e,t),ds(t,r,null,n),(r=t.memoizedState.element)===i)Ks(),t=na(e,t,n);else{if((s=(i=t.stateNode).hydrate)&&(Vs=Hr(t.stateNode.containerInfo.firstChild),Us=t,s=js=!0),s){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(s=e[i])._workInProgressVersionPrimary=e[i+1],Hs.push(s);for(n=Ss(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Ks();t=t.child}return t;case 5:return Os(t),null===e&&Bs(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,Br(r,i)?a=null:null!==s&&Br(r,s)&&(t.flags|=16),zo(e,t),Fo(e,t,a,n),t.child;case 6:return null===e&&Bs(t),null;case 13:return Jo(e,t,n);case 4:return xs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ts(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var l=t.type._context;if(ci(Ji,l._currentValue),l._currentValue=s,null!==a)if(l=a.value,0==(s=ur(l,s)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,s):1073741823))){if(a.children===i.children&&!fi.current){t=na(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){a=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&s)){1===l.tag&&((c=us(-1,n&-n)).tag=2,cs(l,c)),l.lanes|=n,null!==(c=l.alternate)&&(c.lanes|=n),rs(l.return,n),u.lanes|=n;break}c=c.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,is(t,n),r=r(i=ss(i,s.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return s=Yi(i=t.type,t.pendingProps),Vo(e,t,i,s=Yi(i.type,s),r,n);case 15:return jo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,gi(r)?(e=!0,bi(t)):e=!1,is(t,n),vs(t,r,i),bs(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return ta(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},tu.prototype.render=function(e){Jl(e,this._internalRoot,null,null)},tu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Jl(null,e,null,(function(){t[Zr]=null}))},et=function(e){13===e.tag&&(hl(e,4,ul()),eu(e,4))},tt=function(e){13===e.tag&&(hl(e,67108864,ul()),eu(e,67108864))},nt=function(e){if(13===e.tag){var t=ul(),n=cl(e);hl(e,n,t),eu(e,n)}},rt=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ue(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},xe=yl,Pe=function(e,t,n,r,i){var s=Aa;Aa|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Aa=s)&&($a(),Hi())}},Oe=function(){0==(49&Aa)&&(function(){if(null!==tl){var e=tl;tl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,fl(e,zi())}))}Hi()}(),xl())},Le=function(e,t){var n=Aa;Aa|=2;try{return e(t)}finally{0===(Aa=n)&&($a(),Hi())}};var su={Events:[ni,ri,ii,Re,De,xl,{current:!1}]},ou={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},au={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lu.isDisabled&&lu.supportsFiber)try{Ii=lu.inject(au),Ei=lu}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=su,t.createPortal=iu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Aa;if(0!=(48&n))return e(t);Aa|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Aa=n,Hi()}},t.hydrate=function(e,t,n){if(!nu(t))throw Error(o(200));return ru(null,e,t,!0,n)},t.render=function(e,t,n){if(!nu(t))throw Error(o(200));return ru(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nu(e))throw Error(o(40));return!!e._reactRootContainer&&(vl((function(){ru(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zr]=null}))})),!0)},t.unstable_batchedUpdates=yl,t.unstable_createPortal=function(e,t){return iu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ru(e,t,n,!1,r)},t.version="17.0.2"},935:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},408:(e,t,n)=>{var r=n(418),i=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,l=60112;t.Suspense=60113;var u=60115,c=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),u=h("react.memo"),c=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=v.prototype=new y;w.constructor=v,r(w,g.prototype),w.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!I.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:i,type:e,key:o,ref:a,props:s,_owner:b.current}}function k(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g;function S(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case s:l=!0}}if(l)return o=o(l=e),e=""===r?"."+S(l,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=r+S(a=e[u],u);l+=C(a,t,n,c,o)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=C(a=a.value,t,n,c=r+S(a,u++),o);else if("object"===a)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var R={current:null};function D(){var e=R.current;if(null===e)throw Error(f(321));return e}var x={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error(f(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x,t.cloneElement=function(e,t,n){if(null==e)throw Error(f(267,e));var s=r({},e.props),o=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];s.children=u}return{$$typeof:i,type:e.type,key:o,ref:a,props:s,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return D().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,n){return D().useReducer(e,t,n)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.2"},294:(e,t,n)=>{e.exports=n(408)},53:(e,t)=>{var n,r,i,s;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,c=null,h=function(){if(null!==u)try{var e=t.unstable_now();u(!0,e),u=null}catch(e){throw setTimeout(h,0),e}};n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(h,0))},r=function(e,t){c=setTimeout(e,t)},i=function(){clearTimeout(c)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,y=-1,v=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();w=e+v;try{g(!0,e)?_.postMessage(null):(m=!1,g=null)}catch(e){throw _.postMessage(null),e}}else m=!1},n=function(e){g=e,m||(m=!0,_.postMessage(null))},r=function(e,n){y=d((function(){e(t.unstable_now())}),n)},i=function(){f(y),y=-1}}function I(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<T(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function k(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,l=e[a];if(void 0!==o&&0>T(o,n))void 0!==l&&0>T(l,o)?(e[r]=l,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==l&&0>T(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],C=[],N=1,A=null,R=3,D=!1,x=!1,P=!1;function O(e){for(var t=E(C);null!==t;){if(null===t.callback)k(C);else{if(!(t.startTime<=e))break;k(C),t.sortIndex=t.expirationTime,I(S,t)}t=E(C)}}function L(e){if(P=!1,O(e),!x)if(null!==E(S))x=!0,n(M);else{var t=E(C);null!==t&&r(L,t.startTime-e)}}function M(e,n){x=!1,P&&(P=!1,i()),D=!0;var s=R;try{for(O(n),A=E(S);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"==typeof o){A.callback=null,R=A.priorityLevel;var a=o(A.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?A.callback=a:A===E(S)&&k(S),O(n)}else k(S);A=E(S)}if(null!==A)var l=!0;else{var u=E(C);null!==u&&r(L,u.startTime-n),l=!1}return l}finally{A=null,R=s,D=!1}}var F=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){x||D||(x=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return E(S)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:N++,callback:s,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>a?(e.sortIndex=o,I(C,e),null===E(S)&&e===E(C)&&(P?i():P=!0,r(L,o-a))):(e.sortIndex=l,I(S,e),x||D||(x=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},840:(e,t,n)=>{e.exports=n(53)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={};n.r(e),n.d(e,{FirebaseError:()=>g,SDK_VERSION:()=>ne,_DEFAULT_ENTRY_NAME:()=>$,_addComponent:()=>G,_addOrOverwriteComponent:()=>Q,_apps:()=>K,_clearComponents:()=>Z,_components:()=>H,_getProvider:()=>J,_registerComponent:()=>Y,_removeServiceInstance:()=>X,deleteApp:()=>oe,getApp:()=>ie,getApps:()=>se,initializeApp:()=>re,onLog:()=>le,registerVersion:()=>ae,setLogLevel:()=>ue});var t=n(294),r=n(935);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,u=i>>2,c=(3&i)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw Error();const l=i<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function a(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=a(e[n],t[n]));return e}class l{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function u(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function c(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())}function h(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function d(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function p(){const e=u();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function m(){return"object"==typeof indexedDB}class g extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,g.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,y.prototype.create)}}class y{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(v,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new g(r,o,n)}}const v=/\{\$([^}]+)}/g;function w(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function b(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(_(n)&&_(s)){if(!b(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function _(e){return null!==e&&"object"==typeof e}function I(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function E(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function k(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function T(e,t){const n=new S(e,t);return n.subscribe.bind(n)}class S{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function C(){}function N(e){return e&&e._delegate?e._delegate:e}class A{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const R="[DEFAULT]";class D{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new l;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:R})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===R?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:R:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class x{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new D(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const P=[];var O;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(O||(O={}));const L={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},M=O.INFO,F={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},U=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=F[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class V{constructor(e){this.name=e,this._logLevel=M,this._logHandler=U,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in O))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?L[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...e),this._logHandler(this,O.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...e),this._logHandler(this,O.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,O.INFO,...e),this._logHandler(this,O.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,O.WARN,...e),this._logHandler(this,O.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...e),this._logHandler(this,O.ERROR,...e)}}class j{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const q="@firebase/app",z="0.7.10",B=new V("@firebase/app"),$="[DEFAULT]",W={[q]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},K=new Map,H=new Map;function G(e,t){try{e.container.addComponent(t)}catch(n){B.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Q(e,t){e.container.addOrOverwriteComponent(t)}function Y(e){const t=e.name;if(H.has(t))return B.debug(`There were multiple attempts to register component ${t}.`),!1;H.set(t,e);for(const t of K.values())G(t,e);return!0}function J(e,t){return e.container.getProvider(t)}function X(e,t,n=$){J(e,t).clearInstance(n)}function Z(){H.clear()}const ee=new y("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class te{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new A("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ee.create("app-deleted",{appName:this._name})}}const ne="9.6.0";function re(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:$,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw ee.create("bad-app-name",{appName:String(r)});const i=K.get(r);if(i){if(b(e,i.options)&&b(n,i.config))return i;throw ee.create("duplicate-app",{appName:r})}const s=new x(r);for(const e of H.values())s.addComponent(e);const o=new te(e,n,s);return K.set(r,o),o}function ie(e=$){const t=K.get(e);if(!t)throw ee.create("no-app",{appName:e});return t}function se(){return Array.from(K.values())}async function oe(e){const t=e.name;K.has(t)&&(K.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function ae(e,t,n){var r;let i=null!==(r=W[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void B.warn(e.join(" "))}Y(new A(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}function le(e,t){if(null!==e&&"function"!=typeof e)throw ee.create("invalid-log-argument");!function(e,t){for(const n of P){let r=null;t&&t.level&&(r=L[t.level]),n.userLogHandler=null===e?null:(t,n,...i)=>{const s=i.map((e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((e=>e)).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:O[n].toLowerCase(),message:s,args:i,type:t.name})}}}(e,t)}function ue(e){var t;t=e,P.forEach((e=>{e.setLogLevel(t)}))}Y(new A("platform-logger",(e=>new j(e)),"PRIVATE")),ae(q,z,""),ae(q,z,"esm2017"),ae("fire-js","");class ce{constructor(e,t){this._delegate=e,this.firebase=t,G(e,new A("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),oe(this._delegate))))}_getService(e,t=$){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=$){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){G(this._delegate,e)}_addOrOverwriteComponent(e){Q(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new y("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),de=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e,i={}){const s=re(e,i);if(w(n,s.name))return n[s.name];const o=new t(s,r);return n[s.name]=o,o},app:i,registerVersion:ae,setLogLevel:ue,onLog:le,apps:null,SDK_VERSION:ne,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Y(e)&&"PUBLIC"===e.type){const o=(e=i())=>{if("function"!=typeof e[s])throw he.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&a(o,e.serviceProps),r[s]=o,t.prototype[s]=function(...t){return this._getService.bind(this,n).apply(this,e.multipleInstances?t:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!w(n,e=e||$))throw he.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(ce);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){a(n,e)},createSubscribe:T,ErrorFactory:y,deepExtend:a}),n}(),fe=new V("@firebase/app-compat");if("object"==typeof self&&self.self===self&&void 0!==self.firebase){fe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&fe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const pe=de;function me(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}ae("@firebase/app-compat","0.1.11",void 0),pe.registerVersion("firebase","9.6.0","app-compat"),Object.create,Object.create;const ge=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ye=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ve=new y("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),we=new V("@firebase/auth");function be(e,...t){we.logLevel<=O.ERROR&&we.error(`Auth (${ne}): ${e}`,...t)}function _e(e,...t){throw Te(e,...t)}function Ie(e,...t){return Te(e,...t)}function Ee(e,t,n){const r=Object.assign(Object.assign({},ye()),{[t]:n});return new y("auth","Firebase",r).create(t,{appName:e.name})}function ke(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&_e(e,"argument-error"),Ee(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Te(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return ve.create(e,...t)}function Se(e,t,...n){if(!e)throw Te(t,...n)}function Ce(e){const t="INTERNAL ASSERTION FAILED: "+e;throw be(t),new Error(t)}function Ne(e,t){e||Ce(t)}const Ae=new Map;function Re(e){Ne(e instanceof Function,"Expected a class definition");let t=Ae.get(e);return t?(Ne(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ae.set(e,t),t)}function De(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function xe(){return"http:"===Pe()||"https:"===Pe()}function Pe(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Oe{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ne(t>e,"Short delay should be less than long delay!"),this.isMobile=c()||f()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(xe()||d()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Le(e,t){Ne(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Me{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Fe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ue=new Oe(3e4,6e4);function Ve(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function je(e,t,n,r,i={}){return qe(e,i,(()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=I(Object.assign({key:e.config.apiKey},s)).slice(1),a=new(Me.headers());return a.set("Content-Type","application/json"),a.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&a.set("X-Firebase-Locale",e.languageCode),Me.fetch()(Be(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function qe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Fe),t);try{const t=new $e(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw We(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw We(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw We(e,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Ee(e,a,o);_e(e,a)}}catch(t){if(t instanceof g)throw t;_e(e,"network-request-failed")}}async function ze(e,t,n,r,i={}){const s=await je(e,t,n,r,i);return"mfaPendingCredential"in s&&_e(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Be(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Le(e.config,i):`${e.config.apiScheme}://${i}`}class $e{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ie(this.auth,"timeout"))),Ue.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function We(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ie(e,t,r);return i.customData._tokenResponse=n,i}function Ke(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function He(e){return 1e3*Number(e)}function Ge(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return be("JWT malformed, contained fewer than 3 sections"),null;try{const e=function(e){try{return s.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n);return e?JSON.parse(e):(be("Failed to decode base64 JWT payload"),null)}catch(e){return be("Caught error parsing JWT payload as JSON",e),null}}async function Qe(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof g&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Ye{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class Je{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ke(this.lastLoginAt),this.creationTime=Ke(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xe(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Qe(e,async function(e,t){return je(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Se(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=me(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(l=e.providerData,u=o,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const c=e.isAnonymous,h=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!c&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Je(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Ze{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(void 0!==e.idToken,"internal-error"),Se(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Ge(e);return Se(t,"internal-error"),Se(void 0!==t.exp,"internal-error"),Se(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return Se(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await qe(e,{},(()=>{const n=I({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Be(e,r,"/v1/token",`key=${i}`);return Me.fetch()(s,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ze;return n&&(Se("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Se("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Se("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ze,this.toJSON())}_performRefresh(){return Ce("not implemented")}}function et(e,t){Se("string"==typeof e||void 0===e,"internal-error",{appName:t})}class tt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=me(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Ye(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.metadata=new Je(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Qe(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=N(e),r=await n.getIdToken(t),i=Ge(r);Se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ke(He(i.auth_time)),issuedAtTime:Ke(He(i.iat)),expirationTime:Ke(He(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=N(e);await Xe(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new tt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Xe(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Qe(this,async function(e,t){return je(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=t;Se(v&&I,e,"internal-error");const E=Ze.fromJSON(this.name,I);Se("string"==typeof v,e,"internal-error"),et(c,e.name),et(h,e.name),Se("boolean"==typeof w,e,"internal-error"),Se("boolean"==typeof b,e,"internal-error"),et(d,e.name),et(f,e.name),et(p,e.name),et(m,e.name),et(g,e.name),et(y,e.name);const k=new tt({uid:v,auth:e,email:h,emailVerified:w,displayName:c,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(k.providerData=_.map((e=>Object.assign({},e)))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t,n=!1){const r=new Ze;r.updateFromServerResponse(t);const i=new tt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Xe(i),i}}class nt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}nt.type="NONE";const rt=nt;function it(e,t,n){return`firebase:${e}:${t}:${n}`}class st{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=it(this.userKey,r.apiKey,i),this.fullPersistenceKey=it("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?tt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new st(Re(rt),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Re(rt);const s=it(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=tt._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(e){}}))),new st(i,e,n)):new st(i,e,n)}}function ot(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ct(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(at(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dt(t))return"Blackberry";if(ft(t))return"Webos";if(lt(t))return"Safari";if((t.includes("chrome/")||ut(t))&&!t.includes("edge/"))return"Chrome";if(ht(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function at(e=u()){return/firefox\//i.test(e)}function lt(e=u()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ut(e=u()){return/crios\//i.test(e)}function ct(e=u()){return/iemobile/i.test(e)}function ht(e=u()){return/android/i.test(e)}function dt(e=u()){return/blackberry/i.test(e)}function ft(e=u()){return/webos/i.test(e)}function pt(e=u()){return/iphone|ipad|ipod/i.test(e)}function mt(e=u()){return pt(e)||ht(e)||ft(e)||dt(e)||/windows phone/i.test(e)||ct(e)}function gt(e,t=[]){let n;switch(e){case"Browser":n=ot(u());break;case"Worker":n=`${ot(u())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ne}/${r}`}class yt{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wt(this),this.idTokenSubscription=new wt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ve,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Re(t)),this._initializationPromise=this.queue((async()=>{var n,r;this._deleted||(this.persistenceManager=await st.create(this,e),this._deleted||((null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)))})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);r&&r!==i||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xe(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?N(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Re(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new y("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Re(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await st.create(this,[Re(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Se(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function vt(e){return N(e)}class wt{constructor(e){this.auth=e,this.observer=null,this.addObserver=T((e=>this.observer=e))}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function bt(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function _t(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class It{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ce("not implemented")}_getIdTokenResponse(e){return Ce("not implemented")}_linkToIdToken(e,t){return Ce("not implemented")}_getReauthenticationResolver(e){return Ce("not implemented")}}async function Et(e,t){return je(e,"POST","/v1/accounts:resetPassword",Ve(e,t))}async function kt(e,t){return je(e,"POST","/v1/accounts:update",t)}async function Tt(e,t){return je(e,"POST","/v1/accounts:sendOobCode",Ve(e,t))}class St extends It{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new St(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new St(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return ze(e,"POST","/v1/accounts:signInWithPassword",Ve(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return ze(e,"POST","/v1/accounts:signInWithEmailLink",Ve(e,t))}(e,{email:this._email,oobCode:this._password});default:_e(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return kt(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return ze(e,"POST","/v1/accounts:signInWithEmailLink",Ve(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:_e(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ct(e,t){return ze(e,"POST","/v1/accounts:signInWithIdp",Ve(e,t))}class Nt extends It{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Nt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_e("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=me(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Nt(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Ct(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ct(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ct(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=I(t)}return e}}const At={USER_NOT_FOUND:"user-not-found"};class Rt extends It{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Rt({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Rt({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ze(e,"POST","/v1/accounts:signInWithPhoneNumber",Ve(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ze(e,"POST","/v1/accounts:signInWithPhoneNumber",Ve(e,t));if(n.temporaryProof)throw We(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ze(e,"POST","/v1/accounts:signInWithPhoneNumber",Ve(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),At)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Rt({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Dt{constructor(e){var t,n,r,i,s,o;const a=E(k(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Se(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=E(k(e)).link,n=t?E(k(t)).deep_link_id:null,r=E(k(e)).deep_link_id;return(r?E(k(r)).link:null)||r||n||t||e}(e);try{return new Dt(t)}catch(e){return null}}}class xt{constructor(){this.providerId=xt.PROVIDER_ID}static credential(e,t){return St._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Dt.parseLink(t);return Se(n,"argument-error"),St._fromEmailAndCode(e,n.code,n.tenantId)}}xt.PROVIDER_ID="password",xt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",xt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Pt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ot extends Pt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Lt extends Ot{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return Se("providerId"in t&&"signInMethod"in t,"argument-error"),Nt._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Se(e.idToken||e.accessToken,"argument-error"),Nt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Lt.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Lt.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new Lt(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(e){return null}}}class Mt extends Ot{constructor(){super("facebook.com")}static credential(e){return Nt._fromParams({providerId:Mt.PROVIDER_ID,signInMethod:Mt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mt.credentialFromTaggedObject(e)}static credentialFromError(e){return Mt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Mt.credential(e.oauthAccessToken)}catch(e){return null}}}Mt.FACEBOOK_SIGN_IN_METHOD="facebook.com",Mt.PROVIDER_ID="facebook.com";class Ft extends Ot{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Nt._fromParams({providerId:Ft.PROVIDER_ID,signInMethod:Ft.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ft.credentialFromTaggedObject(e)}static credentialFromError(e){return Ft.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ft.credential(t,n)}catch(e){return null}}}Ft.GOOGLE_SIGN_IN_METHOD="google.com",Ft.PROVIDER_ID="google.com";class Ut extends Ot{constructor(){super("github.com")}static credential(e){return Nt._fromParams({providerId:Ut.PROVIDER_ID,signInMethod:Ut.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ut.credentialFromTaggedObject(e)}static credentialFromError(e){return Ut.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ut.credential(e.oauthAccessToken)}catch(e){return null}}}Ut.GITHUB_SIGN_IN_METHOD="github.com",Ut.PROVIDER_ID="github.com";class Vt extends It{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Ct(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ct(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ct(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Vt(n,i):null}static _create(e,t){return new Vt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class jt extends Pt{constructor(e){Se(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return jt.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return jt.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Vt.fromJSON(e);return Se(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Vt._create(n,t)}catch(e){return null}}}class qt extends Ot{constructor(){super("twitter.com")}static credential(e,t){return Nt._fromParams({providerId:qt.PROVIDER_ID,signInMethod:qt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qt.credentialFromTaggedObject(e)}static credentialFromError(e){return qt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return qt.credential(t,n)}catch(e){return null}}}async function zt(e,t){return ze(e,"POST","/v1/accounts:signUp",Ve(e,t))}qt.TWITTER_SIGN_IN_METHOD="twitter.com",qt.PROVIDER_ID="twitter.com";class Bt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await tt._fromIdTokenResponse(e,n,r),s=$t(n);return new Bt({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=$t(n);return new Bt({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function $t(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Wt extends g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Wt.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Wt(e,t,n,r)}}function Kt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Wt._fromErrorAndOperation(e,n,t,r);throw n}))}function Ht(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}async function Gt(e,t,n=!1){const r=await Qe(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Bt._forOperation(e,"link",r)}async function Qt(e,t,n){await Xe(t);const r=!1===e?"provider-already-linked":"no-such-provider";Se(Ht(t.providerData).has(n)===e,t.auth,r)}async function Yt(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await Qe(e,Kt(r,i,t,e),n);Se(s.idToken,r,"internal-error");const o=Ge(s.idToken);Se(o,r,"internal-error");const{sub:a}=o;return Se(e.uid===a,r,"user-mismatch"),Bt._forOperation(e,i,s)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&_e(r,"user-mismatch"),e}}async function Jt(e,t,n=!1){const r="signIn",i=await Kt(e,r,t),s=await Bt._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Xt(e,t){return Jt(vt(e),t)}async function Zt(e,t){const n=N(e);return await Qt(!1,n,t.providerId),Gt(n,t)}async function en(e,t){return Yt(N(e),t)}class tn{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?nn._fromServerResponse(e,t):_e(e,"internal-error")}}class nn extends tn{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new nn(t)}}function rn(e,t,n){var r;Se((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Se(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Se(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Se(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function sn(e,t){const n=N(e),r=await Et(n,{oobCode:t}),i=r.requestType;switch(Se(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Se(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Se(r.mfaInfo,n,"internal-error");default:Se(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=tn._fromServerResponse(vt(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function on(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Qe(e,kt(r,i));await e._updateTokensIfNecessary(s,!0)}class an{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class ln extends an{constructor(e,t,n,r){super(e,t,n),this.username=r}}class un extends an{constructor(e,t){super(e,"facebook.com",t)}}class cn extends ln{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class hn extends an{constructor(e,t){super(e,"google.com",t)}}class dn extends ln{constructor(e,t,n){super(e,"twitter.com",t,n)}}function fn(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Ge(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new an(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new un(s,i);case"github.com":return new cn(s,i);case"google.com":return new hn(s,i);case"twitter.com":return new dn(s,i,e.screenName||null);case"custom":case"anonymous":return new an(s,null);default:return new an(s,r,i)}}(n)}class pn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new pn("enroll",e)}static _fromMfaPendingCredential(e){return new pn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return pn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return pn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class mn{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=vt(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>tn._fromServerResponse(n,e)));Se(r.mfaPendingCredential,n,"internal-error");const s=pn._fromMfaPendingCredential(r.mfaPendingCredential);return new mn(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Bt._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Se(t.user,n,"internal-error"),Bt._forOperation(t.user,t.operationType,o);default:_e(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class gn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>tn._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new gn(e)}async getSession(){return pn._fromIdtoken(await this.user.getIdToken())}async enroll(e,t){const n=e,r=await this.getSession(),i=await Qe(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken(),r=await Qe(this.user,(i=this.user.auth,s={idToken:n,mfaEnrollmentId:t},je(i,"POST","/v2/accounts/mfaEnrollment:withdraw",Ve(i,s))));var i,s;this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(r);try{await this.user.reload()}catch(e){if("auth/user-token-expired"!==e.code)throw e}}}const yn=new WeakMap,vn="__sak";class wn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vn,"1"),this.storage.removeItem(vn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class bn extends wn{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=u();return lt(e)||pt(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=mt(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);p()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bn.type="LOCAL";const _n=bn;class In extends wn{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}In.type="SESSION";const En=In;class kn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new kn(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Tn(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}kn.receivers=[];class Sn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Tn("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Cn(){return window}function Nn(){return void 0!==Cn().WorkerGlobalScope&&"function"==typeof Cn().importScripts}const An="firebaseLocalStorageDb",Rn="firebaseLocalStorage",Dn="fbase_key";class xn{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Pn(e,t){return e.transaction([Rn],t?"readwrite":"readonly").objectStore(Rn)}function On(){const e=indexedDB.open(An,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Rn,{keyPath:Dn})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Rn)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(An);return new xn(e).toPromise()}(),t(await On()))}))}))}async function Ln(e,t,n){const r=Pn(e,!0).put({[Dn]:t,value:n});return new xn(r).toPromise()}function Mn(e,t){const n=Pn(e,!0).delete(t);return new xn(n).toPromise()}class Fn{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await On()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Nn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kn._getInstance(Nn()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Sn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await On();return await Ln(e,vn,"1"),await Mn(e,vn),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ln(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Pn(e,!1).get(t),r=await new xn(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Mn(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Pn(e,!1).getAll();return new xn(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Fn.type="LOCAL";const Un=Fn;function Vn(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ie("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function jn(e){return`__${e}${Math.floor(1e6*Math.random())}`}const qn=1e12;class zn{constructor(e){this.auth=e,this.counter=qn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Bn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||qn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||qn;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||qn;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Bn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;Se(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<50;e++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $n=jn("rcb"),Wn=new Oe(3e4,6e4);class Kn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Cn().grecaptcha}load(e,t=""){return Se(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(Cn().grecaptcha):new Promise(((n,r)=>{const i=Cn().setTimeout((()=>{r(Ie(e,"network-request-failed"))}),Wn.get());Cn()[$n]=()=>{Cn().clearTimeout(i),delete Cn()[$n];const s=Cn().grecaptcha;if(!s)return void r(Ie(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)},Vn(`https://www.google.com/recaptcha/api.js??${I({onload:$n,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(i),r(Ie(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Cn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hn{async load(e){return new zn(e)}clearedOneInstance(){}}const Gn="recaptcha",Qn={theme:"light",type:"image"};class Yn{constructor(e,t=Object.assign({},Qn),n){this.parameters=t,this.type=Gn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vt(n),this.isInvisible="invisible"===this.parameters.size,Se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;Se(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hn:new Kn,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha();return t.getResponse(e)||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Se(!this.parameters.sitekey,this.auth,"argument-error"),Se(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Se("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"==typeof e)e(t);else if("string"==typeof e){const n=Cn()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){Se(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Se(xe()&&!Nn(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await je(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Se(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Se(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jn{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Rt._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Xn(e,t,n){var r;const i=await n.verify();try{let s;if(Se("string"==typeof i,e,"argument-error"),Se(n.type===Gn,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Se("enroll"===t.type,e,"internal-error");const n=await function(e,t){return je(e,"POST","/v2/accounts/mfaEnrollment:start",Ve(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Se("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Se(n,e,"missing-multi-factor-info");const o=await function(e,t){return je(e,"POST","/v2/accounts/mfaSignIn:start",Ve(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return je(e,"POST","/v1/accounts:sendVerificationCode",Ve(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Zn{constructor(e){this.providerId=Zn.PROVIDER_ID,this.auth=vt(e)}verifyPhoneNumber(e,t){return Xn(this.auth,e,N(t))}static credential(e,t){return Rt._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Zn.credentialFromTaggedObject(t)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Rt._fromTokenResponse(t,n):null}}function er(e,t){return t?Re(t):(Se(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Zn.PROVIDER_ID="phone",Zn.PHONE_SIGN_IN_METHOD="phone";class tr extends It{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ct(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ct(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ct(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nr(e){return Jt(e.auth,new tr(e),e.bypassAuthState)}function rr(e){const{auth:t,user:n}=e;return Se(n,t,"internal-error"),Yt(n,new tr(e),e.bypassAuthState)}async function ir(e){const{auth:t,user:n}=e;return Se(n,t,"internal-error"),Gt(n,new tr(e),e.bypassAuthState)}class sr{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nr;case"linkViaPopup":case"linkViaRedirect":return ir;case"reauthViaPopup":case"reauthViaRedirect":return rr;default:_e(this.auth,"internal-error")}}resolve(e){Ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ne(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const or=new Oe(2e3,1e4);class ar extends sr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ar.currentPopupAction&&ar.currentPopupAction.cancel(),ar.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Ne(1===this.filter.length,"Popup operations only handle one event");const e=Tn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ie(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ar.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,or.get())};e()}}ar.currentPopupAction=null;const lr=new Map;class ur extends sr{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=lr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=dr(t),r=hr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}lr.set(this.auth._key(),e)}return this.bypassAuthState||lr.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function cr(e,t){return hr(e)._set(dr(t),"true")}function hr(e){return Re(e._redirectPersistence)}function dr(e){return it("pendingRedirect",e.config.apiKey,e.name)}async function fr(e,t,n=!1){const r=vt(e),i=er(r,t),s=new ur(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function pr(e){const t=Tn(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class mr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!yr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ie(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gr(e))}saveEventToCache(e){this.cachedEventUids.add(gr(e)),this.lastProcessedEventTime=Date.now()}}function gr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function yr({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function vr(e,t={}){return je(e,"GET","/v1/projects",t)}const wr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^https?/;function _r(e){const t=De(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!br.test(n))return!1;if(wr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ir=new Oe(3e4,6e4);function Er(){const e=Cn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let kr=null;function Tr(e){return kr=kr||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){Er(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Er(),n(Ie(e,"network-request-failed"))},timeout:Ir.get()})}if(null===(i=null===(r=Cn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Cn().gapi)||void 0===s?void 0:s.load)){const t=jn("iframefcb");return Cn()[t]=()=>{gapi.load?o():n(Ie(e,"network-request-failed"))},Vn(`https://apis.google.com/js/api.js?onload=${t}`)}o()}})).catch((e=>{throw kr=null,e}))}(e),kr}const Sr=new Oe(5e3,15e3),Cr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ar(e){const t=e.config;Se(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Le(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:ne},i=Nr.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${I(r).slice(1)}`}const Rr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function xr(e,t,n,r,i,s){Se(e.config.authDomain,e,"auth-domain-config-required"),Se(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ne,eventId:i};if(t instanceof Pt){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Ot){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){return e.emulator?Le(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${I(a).slice(1)}`}const Pr="webStorageSupport";class Or extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ce("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Or(e)}_finalizeEnroll(e,t,n){return function(e,t){return je(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ve(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return je(e,"POST","/v2/accounts/mfaSignIn:finalize",Ve(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Lr{constructor(){}static assertion(e){return Or._fromCredential(e)}}Lr.FACTOR_ID="phone";var Mr,Fr="@firebase/auth",Ur="0.19.3";class Vr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function jr(){return window}Mr="Browser",Y(new A("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{Se(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),Se(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:Mr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gt(Mr)},s=new yt(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Re);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Y(new A("auth-internal",(e=>{return t=vt(e.getProvider("auth").getImmediate()),new Vr(t);var t}),"PRIVATE").setInstantiationMode("EXPLICIT")),ae(Fr,Ur,void 0),ae(Fr,Ur,"esm2017");class qr extends mr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function zr(e){const t=await $r()._get(Wr(e));return t&&await $r()._remove(Wr(e)),t}function Br(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function $r(){return Re(_n)}function Wr(e){return it("authEvent",e.config.apiKey,e.name)}function Kr(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return E(n.join("?"))}function Hr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}function Gr(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Qr(e=u()){return!("file:"!==Gr()&&"ionic:"!==Gr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yr(){try{const e=self.localStorage,t=Tn();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=u()){return p()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=u()){return/Edge\/\d+/.test(e)}(e)}()||m()}catch(e){return Jr()&&m()}return!1}function Jr(){return void 0!==n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Xr(){return("http:"===Gr()||"https:"===Gr()||d()||Qr())&&!(f()||h())&&Yr()&&!Jr()}function Zr(){return Qr()&&"undefined"!=typeof document}const ei={LOCAL:"local",NONE:"none",SESSION:"session"},ti=Se,ni="persistence";async function ri(e){await e._initializationPromise;const t=ii(),n=it(ni,e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())}function ii(){return"undefined"!=typeof window?window:null}const si=Se;class oi{constructor(){this.browserResolver=Re(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=En,this._completeRedirectFn=fr}async _openPopup(e,t,n,r){var i;return Ne(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Rr),{width:r.toString(),height:i.toString(),top:s,left:o}),c=u().toLowerCase();n&&(a=ut(c)?"_blank":n),at(c)&&(t=t||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=u()){var t;return pt(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Dr(null);const d=window.open(t||"",a,h);Se(d,e,"popup-blocked");try{d.focus()}catch(e){}return new Dr(d)}(e,xr(e,t,n,De(),r),Tn())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=xr(e,t,n,De(),r),Cn().location.href=i,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ne(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}async initAndGetManager(e){const t=await async function(e){const t=await Tr(e),n=Cn().gapi;return Se(n,e,"internal-error"),t.open({where:document.body,url:Ar(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cr,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ie(e,"network-request-failed"),s=Cn().setTimeout((()=>{r(i)}),Sr.get());function o(){Cn().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new mr(e);return t.register("authEvent",(t=>(Se(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pr,{type:Pr},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),_e(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await vr(e);for(const e of t)try{if(_r(e))return}catch(e){}_e(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mt()||lt()||pt()}}),this.cordovaResolver=Re(class{constructor(){this._redirectPersistence=En,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fr}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new qr(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){_e(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,u,c;const h=jr();Se("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Se(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Se("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Se("function"==typeof(null===(l=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Se("function"==typeof(null===(c=null===(u=null==h?void 0:h.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===c?void 0:c.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),lr.clear(),await this._originValidation(e);const s=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:Br(),postBody:null,tenantId:e.tenantId,error:Ie(e,"no-auth-event")}}(e,n,r);await function(e,t){return $r()._set(Wr(e),t)}(e,s);const o=await async function(e,t,n){var r;const{BuildInfo:i}=jr();Ne(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Ne(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return pt()?o.ibi=i.packageName:ht()?o.apn=i.packageName:_e(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,xr(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}(e,s,t);return async function(e,t,n){const{cordova:r}=jr();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function u(){a||(a=window.setTimeout((()=>{o(Ie(e,"redirect-cancelled-by-user"))}),2e3))}function c(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(l),document.addEventListener("resume",u,!1),ht()&&document.addEventListener("visibilitychange",c,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await function(e){const{cordova:t}=jr();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=u()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=jr(),n={};pt()?n.iosBundleId=t.packageName:ht()?n.androidPackageName=t.packageName:_e(e,"operation-not-supported-in-this-environment"),await vr(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=jr(),s=setTimeout((async()=>{await zr(e),t.onEvent(Hr())}),500),o=async n=>{clearTimeout(s);const r=await zr(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=Kr(e),n=t.link?decodeURIComponent(t.link):void 0,r=Kr(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Kr(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Kr(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Ie(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||Hr())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,o);const a=r,l=`${i.packageName.toLowerCase()}://`;jr().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"==typeof a)try{a(e)}catch(e){console.error(e)}}}}),this.underlyingResolver=null,this._redirectPersistence=En,this._completeRedirectFn=fr}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Zr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return si(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Zr()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function ai(e){return e.unwrap()}function li(e){const{_tokenResponse:t}=e instanceof g?e.customData:e;if(!t)return null;if(!(e instanceof g)&&"temporaryProof"in t&&"phoneNumber"in t)return Zn.credentialFromResult(e);const n=t.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=Ft;break;case"facebook.com":r=Mt;break;case"github.com":r=Ut;break;case"twitter.com":r=qt;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Vt._create(n,o):Nt._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Lt(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof g?r.credentialFromError(e):r.credentialFromResult(e)}function ui(e,t){return t.catch((t=>{throw t instanceof g&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new hi(e,function(e,t){var n;const r=N(e),i=t;return Se(t.customData.operationType,r,"argument-error"),Se(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),mn._fromError(r,i)}(e,t));else if(r){const e=li(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,li(r)),additionalUserInfo:fn(e),user:di.getOrCreate(n)};var r}))}async function ci(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>ui(e,n.confirm(t))}}class hi{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return ui(ai(this.auth),this.resolver.resolveSignIn(e))}}class di{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=N(e);return yn.has(t)||yn.set(t,gn._fromUser(t)),yn.get(t)}(e)}static getOrCreate(e){return di.USER_MAP.has(e)||di.USER_MAP.set(e,new di(e)),di.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return ui(this.auth,Zt(this._delegate,e))}async linkWithPhoneNumber(e,t){return ci(this.auth,async function(e,t,n){const r=N(e);await Qt(!1,r,"phone");const i=await Xn(r.auth,t,N(n));return new Jn(i,(e=>Zt(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return ui(this.auth,async function(e,t,n){const r=N(e);ke(r.auth,t,Pt);const i=er(r.auth,n);return new ar(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,oi))}async linkWithRedirect(e){return await ri(vt(this.auth)),function(e,t,n){return async function(e,t,n){const r=N(e);ke(r.auth,t,Pt);const i=er(r.auth,n);await Qt(!1,r,t.providerId),await cr(i,r.auth);const s=await pr(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}(this._delegate,e,oi)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return ui(this.auth,en(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return ci(this.auth,async function(e,t,n){const r=N(e),i=await Xn(r.auth,t,N(n));return new Jn(i,(e=>en(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return ui(this.auth,async function(e,t,n){const r=N(e);ke(r.auth,t,Pt);const i=er(r.auth,n);return new ar(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,oi))}async reauthenticateWithRedirect(e){return await ri(vt(this.auth)),function(e,t,n){return async function(e,t,n){const r=N(e);ke(r.auth,t,Pt);const i=er(r.auth,n);await cr(i,r.auth);const s=await pr(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}(this._delegate,e,oi)}sendEmailVerification(e){return async function(e,t){const n=N(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&rn(n.auth,r,t);const{email:i}=await async function(e,t){return Tt(e,t)}(n.auth,r);i!==e.email&&await e.reload()}(this._delegate,e)}async unlink(e){return await async function(e,t){const n=N(e);await Qt(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return je(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Ht(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}(this._delegate,e),this}updateEmail(e){return function(e,t){return on(N(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return on(N(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await Gt(N(e),t)}(this._delegate,e)}updateProfile(e){return async function(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=N(e),i={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},s=await Qe(r,async function(e,t){return je(e,"POST","/v1/accounts:update",t)}(r.auth,i));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find((({providerId:e})=>"password"===e));o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return async function(e,t,n){const r=N(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&rn(r.auth,i,n);const{email:s}=await async function(e,t){return Tt(e,t)}(r.auth,i);s!==e.email&&await e.reload()}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}di.USER_MAP=new WeakMap;const fi=Se;class pi{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;fi(n,"invalid-api-key",{appName:e.name});let r=[rt];if("undefined"!=typeof window){r=function(e,t){const n=ii();if(!(null==n?void 0:n.sessionStorage))return[];const r=it(ni,e,t);switch(n.sessionStorage.getItem(r)){case ei.NONE:return[rt];case ei.LOCAL:return[Un,En];case ei.SESSION:return[En];default:return[]}}(n,e.name);for(const e of[Un,_n,En])r.includes(e)||r.push(e)}fi(n,"invalid-api-key",{appName:e.name});const i="undefined"!=typeof window?oi:void 0;this._delegate=t.initialize({options:{persistence:r,popupRedirectResolver:i}}),this._delegate._updateErrorMap(ge),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?di.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=vt(e);Se(r._canInitEmulator,r,"emulator-config-failed"),Se(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=bt(t),{host:o,port:a}=function(e){const t=bt(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:_t(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:_t(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(this._delegate,e,t)}applyActionCode(e){return async function(e,t){await async function(e,t){return je(e,"POST","/v1/accounts:update",Ve(e,t))}(N(e),{oobCode:t})}(this._delegate,e)}checkActionCode(e){return sn(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Et(N(e),{oobCode:t,newPassword:n})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return ui(this._delegate,async function(e,t,n){const r=vt(e),i=await zt(r,{returnSecureToken:!0,email:t,password:n}),s=await Bt._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return async function(e,t){const n={identifier:t,continueUri:xe()?De():"http://localhost"},{signinMethods:r}=await async function(e,t){return je(e,"POST","/v1/accounts:createAuthUri",Ve(e,t))}(N(e),n);return r||[]}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Dt.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){fi(Xr(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await vt(e)._initializationPromise,fr(e,t,!1)}(this._delegate,oi);return e?ui(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){vt(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=mi(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=mi(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=N(e),i={requestType:"EMAIL_SIGNIN",email:t};Se(n.handleCodeInApp,r,"argument-error"),n&&rn(r,i,n),await async function(e,t){return Tt(e,t)}(r,i)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=N(e),i={requestType:"PASSWORD_RESET",email:t};n&&rn(r,i,n),await async function(e,t){return Tt(e,t)}(r,i)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){ti(Object.values(ei).includes(t),e,"invalid-persistence-type"),f()?ti(t!==ei.SESSION,e,"unsupported-persistence-type"):h()?ti(t===ei.NONE,e,"unsupported-persistence-type"):Jr()?ti(t===ei.NONE||t===ei.LOCAL&&m(),e,"unsupported-persistence-type"):ti(t===ei.NONE||Yr(),e,"unsupported-persistence-type")}(this._delegate,e),e){case ei.SESSION:t=En;break;case ei.LOCAL:t=await Re(Un)._isAvailable()?Un:_n;break;case ei.NONE:t=rt;break;default:return _e("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return ui(this._delegate,async function(e){var t;const n=vt(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Bt({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await zt(n,{returnSecureToken:!0}),i=await Bt._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return ui(this._delegate,Xt(this._delegate,e))}signInWithCustomToken(e){return ui(this._delegate,async function(e,t){const n=vt(e),r=await async function(e,t){return ze(e,"POST","/v1/accounts:signInWithCustomToken",Ve(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Bt._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}(this._delegate,e))}signInWithEmailAndPassword(e,t){return ui(this._delegate,function(e,t,n){return Xt(N(e),xt.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return ui(this._delegate,async function(e,t,n){const r=N(e),i=xt.credentialWithLink(t,n||De());return Se(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Xt(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return ci(this._delegate,async function(e,t,n){const r=vt(e),i=await Xn(r,t,N(n));return new Jn(i,(e=>Xt(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return fi(Xr(),this._delegate,"operation-not-supported-in-this-environment"),ui(this._delegate,async function(e,t,n){const r=vt(e);ke(e,t,Pt);const i=er(r,n);return new ar(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,oi))}async signInWithRedirect(e){return fi(Xr(),this._delegate,"operation-not-supported-in-this-environment"),await ri(this._delegate),function(e,t,n){return async function(e,t,n){const r=vt(e);ke(e,t,Pt);const i=er(r,n);return await cr(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}(this._delegate,e,oi)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await sn(N(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function mi(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&di.getOrCreate(e)),error:t,complete:n}}pi.Persistence=ei;class gi{constructor(){this.providerId="phone",this._delegate=new Zn(ai(pe.auth()))}static credential(e,t){return Zn.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}gi.PHONE_SIGN_IN_METHOD=Zn.PHONE_SIGN_IN_METHOD,gi.PROVIDER_ID=Zn.PROVIDER_ID;const yi=Se;var vi;(vi=pe).INTERNAL.registerComponent(new A("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new pi(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:xt,FacebookAuthProvider:Mt,GithubAuthProvider:Ut,GoogleAuthProvider:Ft,OAuthProvider:Lt,SAMLAuthProvider:jt,PhoneAuthProvider:gi,PhoneMultiFactorGenerator:Lr,RecaptchaVerifier:class{constructor(e,t,n=pe.app()){var r;yi(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Yn(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:qt,Auth:pi,AuthCredential:It,Error:g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),vi.registerVersion("@firebase/auth-compat","0.2.3");var wi,bi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},_i={},Ii=Ii||{},Ei=bi||self;function ki(){}function Ti(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Si(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ci="closure_uid_"+(1e9*Math.random()>>>0),Ni=0;function Ai(e,t,n){return e.call.apply(e.bind,arguments)}function Ri(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Di(e,t,n){return(Di=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ai:Ri).apply(null,arguments)}function xi(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Pi(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Oi(){this.s=this.s,this.o=this.o}var Li={};Oi.prototype.s=!1,Oi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Ci)&&e[Ci]||(e[Ci]=++Ni)}(this);delete Li[e]}},Oi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Mi=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Fi=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function Ui(e){return Array.prototype.concat.apply([],arguments)}function Vi(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ji(e){return/^[\s\xa0]*$/.test(e)}var qi,zi=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Bi(e,t){return-1!=e.indexOf(t)}function $i(e,t){return e<t?-1:e>t?1:0}e:{var Wi=Ei.navigator;if(Wi){var Ki=Wi.userAgent;if(Ki){qi=Ki;break e}}qi=""}function Hi(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Gi(e){const t={};for(const n in e)t[n]=e[n];return t}var Qi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yi(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<Qi.length;t++)n=Qi[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ji(e){return Ji[" "](e),e}Ji[" "]=ki;var Xi,Zi,es=Bi(qi,"Opera"),ts=Bi(qi,"Trident")||Bi(qi,"MSIE"),ns=Bi(qi,"Edge"),rs=ns||ts,is=Bi(qi,"Gecko")&&!(Bi(qi.toLowerCase(),"webkit")&&!Bi(qi,"Edge"))&&!(Bi(qi,"Trident")||Bi(qi,"MSIE"))&&!Bi(qi,"Edge"),ss=Bi(qi.toLowerCase(),"webkit")&&!Bi(qi,"Edge");function os(){var e=Ei.document;return e?e.documentMode:void 0}e:{var as="",ls=(Zi=qi,is?/rv:([^\);]+)(\)|;)/.exec(Zi):ns?/Edge\/([\d\.]+)/.exec(Zi):ts?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Zi):ss?/WebKit\/(\S+)/.exec(Zi):es?/(?:Version)[ \/]?(\S+)/.exec(Zi):void 0);if(ls&&(as=ls?ls[1]:""),ts){var us=os();if(null!=us&&us>parseFloat(as)){Xi=String(us);break e}}Xi=as}var cs,hs={};function ds(){return e=hs,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=zi(String(Xi)).split("."),n=zi("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=$i(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||$i(0==i[2].length,0==s[2].length)||$i(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}();var e}Ei.document&&ts?cs=os()||parseInt(Xi,10)||void 0:cs=void 0;var fs=cs,ps=function(){if(!Ei.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ei.addEventListener("test",ki,t),Ei.removeEventListener("test",ki,t)}catch(e){}return e}();function ms(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function gs(e,t){if(ms.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(is){e:{try{Ji(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:ys[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&gs.Z.h.call(this)}}ms.prototype.h=function(){this.defaultPrevented=!0},Pi(gs,ms);var ys={2:"touch",3:"pen",4:"mouse"};gs.prototype.h=function(){gs.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var vs="closure_listenable_"+(1e6*Math.random()|0),ws=0;function bs(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ws,this.ca=this.fa=!1}function _s(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Is(e){this.src=e,this.g={},this.h=0}function Es(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Mi(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(_s(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ks(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}Is.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ks(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new bs(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var Ts="closure_lm_"+(1e6*Math.random()|0),Ss={};function Cs(e,t,n,r,i){if(r&&r.once)return As(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Cs(e,t[s],n,r,i);return null}return n=Ms(n),e&&e[vs]?e.N(t,n,Si(r)?!!r.capture:!!r,i):Ns(e,t,n,!1,r,i)}function Ns(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Si(i)?!!i.capture:!!i,a=Os(e);if(a||(e[Ts]=a=new Is(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=Ps;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ps||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(xs(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function As(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)As(e,t[s],n,r,i);return null}return n=Ms(n),e&&e[vs]?e.O(t,n,Si(r)?!!r.capture:!!r,i):Ns(e,t,n,!0,r,i)}function Rs(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Rs(e,t[s],n,r,i);else r=Si(r)?!!r.capture:!!r,n=Ms(n),e&&e[vs]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=ks(s=e.g[t],n,r,i))&&(_s(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Os(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ks(t,n,r,i)),(n=-1<e?t[e]:null)&&Ds(n))}function Ds(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[vs])Es(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(xs(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Os(t))?(Es(n,e),0==n.h&&(n.src=null,t[Ts]=null)):_s(e)}}}function xs(e){return e in Ss?Ss[e]:Ss[e]="on"+e}function Ps(e,t){if(e.ca)e=!0;else{t=new gs(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Ds(e),e=n.call(r,t)}return e}function Os(e){return(e=e[Ts])instanceof Is?e:null}var Ls="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ms(e){return"function"==typeof e?e:(e[Ls]||(e[Ls]=function(t){return e.handleEvent(t)}),e[Ls])}function Fs(){Oi.call(this),this.i=new Is(this),this.P=this,this.I=null}function Us(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new ms(t,e);else if(t instanceof ms)t.target=t.target||e;else{var i=t;Yi(t=new ms(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Vs(o,r,!0,t)&&i}if(i=Vs(o=t.g=e,r,!0,t)&&i,i=Vs(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Vs(o=t.g=n[s],r,!1,t)&&i}function Vs(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&Es(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Pi(Fs,Oi),Fs.prototype[vs]=!0,Fs.prototype.removeEventListener=function(e,t,n,r){Rs(this,e,t,n,r)},Fs.prototype.M=function(){if(Fs.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)_s(n[r]);delete t.g[e],t.h--}}this.I=null},Fs.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Fs.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var js=Ei.JSON.stringify;function qs(){var e=Gs;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var zs,Bs=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new $s),(e=>e.reset()));class $s{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ws(e){Ei.setTimeout((()=>{throw e}),0)}function Ks(e,t){zs||function(){var e=Ei.Promise.resolve(void 0);zs=function(){e.then(Qs)}}(),Hs||(zs(),Hs=!0),Gs.add(e,t)}var Hs=!1,Gs=new class{constructor(){this.h=this.g=null}add(e,t){const n=Bs.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Qs(){for(var e;e=qs();){try{e.h.call(e.g)}catch(e){Ws(e)}var t=Bs;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Hs=!1}function Ys(e,t){Fs.call(this),this.h=e||1,this.g=t||Ei,this.j=Di(this.kb,this),this.l=Date.now()}function Js(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Xs(e,t,n){if("function"==typeof e)n&&(e=Di(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Di(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ei.setTimeout(e,t||0)}function Zs(e){e.g=Xs((()=>{e.g=null,e.i&&(e.i=!1,Zs(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Pi(Ys,Fs),(wi=Ys.prototype).da=!1,wi.S=null,wi.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Us(this,"tick"),this.da&&(Js(this),this.start()))}},wi.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wi.M=function(){Ys.Z.M.call(this),Js(this),delete this.g};class eo extends Oi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Zs(this)}M(){super.M(),this.g&&(Ei.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function to(e){Oi.call(this),this.h=e,this.g={}}Pi(to,Oi);var no=[];function ro(e,t,n,r){Array.isArray(n)||(n&&(no[0]=n.toString()),n=no);for(var i=0;i<n.length;i++){var s=Cs(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function io(e){Hi(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ds(e)}),e),e.g={}}function so(){this.g=!0}function oo(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return js(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}to.prototype.M=function(){to.Z.M.call(this),io(this)},to.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},so.prototype.Aa=function(){this.g=!1},so.prototype.info=function(){};var ao={},lo=null;function uo(){return lo=lo||new Fs}function co(e){ms.call(this,ao.Ma,e)}function ho(e){const t=uo();Us(t,new co(t,e))}function fo(e,t){ms.call(this,ao.STAT_EVENT,e),this.stat=t}function po(e){const t=uo();Us(t,new fo(t,e))}function mo(e,t){ms.call(this,ao.Na,e),this.size=t}function go(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Ei.setTimeout((function(){e()}),t)}ao.Ma="serverreachability",Pi(co,ms),ao.STAT_EVENT="statevent",Pi(fo,ms),ao.Na="timingevent",Pi(mo,ms);var yo={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},vo={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function wo(){}function bo(e){return e.h||(e.h=e.i())}function _o(){}wo.prototype.h=null;var Io,Eo={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ko(){ms.call(this,"d")}function To(){ms.call(this,"c")}function So(){}function Co(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new to(this),this.P=Ao,e=rs?125:void 0,this.W=new Ys(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new No}function No(){this.i=null,this.g="",this.h=!1}Pi(ko,ms),Pi(To,ms),Pi(So,wo),So.prototype.g=function(){return new XMLHttpRequest},So.prototype.i=function(){return{}},Io=new So;var Ao=45e3,Ro={},Do={};function xo(e,t,n){e.K=1,e.v=ta(Qo(t)),e.s=n,e.U=!0,Po(e,null)}function Po(e,t){e.F=Date.now(),Fo(e),e.A=Qo(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),pa(n.h,"t",r),e.C=0,n=e.l.H,e.h=new No,e.g=pl(e.l,n?t:null,!e.s),0<e.O&&(e.L=new eo(Di(e.Ia,e,e.g),e.O)),ro(e.V,e.g,"readystatechange",e.gb),t=e.H?Gi(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ho(1),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Oo(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function Lo(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=Mo(e,n),r==Do){4==t&&(e.o=4,po(14),i=!1),oo(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ro){e.o=4,po(15),oo(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}oo(e.j,e.m,r,null),zo(e,r)}Oo(e)&&r!=Do&&r!=Ro&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,po(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ol(t),t.L=!0,po(11))):(oo(e.j,e.m,n,"[Invalid Chunked Response]"),qo(e),jo(e))}function Mo(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Do:(n=Number(t.substring(n,r)),isNaN(n)?Ro:(r+=1)+n>t.length?Do:(t=t.substr(r,n),e.C=r+n,t))}function Fo(e){e.Y=Date.now()+e.P,Uo(e,e.P)}function Uo(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=go(Di(e.eb,e),t)}function Vo(e){e.B&&(Ei.clearTimeout(e.B),e.B=null)}function jo(e){0==e.l.G||e.I||ul(e.l,e)}function qo(e){Vo(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Js(e.W),io(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function zo(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ba(n.i,e)))if(n.I=e.N,!e.J&&ba(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;ll(n),Ja(n)}sl(n),po(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=go(Di(n.ab,n),6e3));if(1>=wa(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else hl(n,11)}else if((e.J||n.g==e)&&ll(n),!ji(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.U=u[0],u=u[1],2==n.G)if("c"==u[0]){n.J=u[1],n.la=u[2];const t=u[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=u[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(Bi(e,"spdy")||Bi(e,"quic")||Bi(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(_a(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,ea(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=fl(r,r.H?r.la:null,r.W),o.J){Ia(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(Vo(a),Fo(a)),r.g=o}else il(r);0<n.l.length&&el(n)}else"stop"!=u[0]&&"close"!=u[0]||hl(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?hl(n,7):Ya(n):"noop"!=u[0]&&n.j&&n.j.wa(u),n.A=0)}ho(4)}catch(e){}}function Bo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ti(e)||"string"==typeof e)Fi(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Ti(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Ti(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function $o(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof $o)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Wo(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ko(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ko(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ko(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(wi=Co.prototype).setTimeout=function(e){this.P=e},wi.gb=function(e){e=e.target;const t=this.L;t&&3==Wa(e)?t.l():this.Ia(e)},wi.Ia=function(e){try{if(e==this.g)e:{const c=Wa(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>c)&&(3!=c||rs||this.g&&(this.h.h||this.g.ga()||Ka(this.g)))){this.I||4!=c||7==t||ho(8==t||0>=h?3:2),Vo(this);var n=this.g.ba();this.N=n;t:if(Oo(this)){var r=Ka(this.g);e="";var i=r.length,s=4==Wa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){qo(this),jo(this);var o="";break t}this.h.i=new Ei.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ji(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,po(12),qo(this),jo(this);break e}oo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zo(this,n)}this.U?(Lo(this,c,o),rs&&this.i&&3==c&&(ro(this.V,this.W,"tick",this.fb),this.W.start())):(oo(this.j,this.m,o,null),zo(this,o)),4==c&&qo(this),this.i&&!this.I&&(4==c?ul(this.l,this):(this.i=!1,Fo(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,po(12)):(this.o=0,po(13)),qo(this),jo(this)}}}catch(e){}},wi.fb=function(){if(this.g){var e=Wa(this.g),t=this.g.ga();this.C<t.length&&(Vo(this),Lo(this,e,t),this.i&&4!=e&&Fo(this))}},wi.cancel=function(){this.I=!0,qo(this)},wi.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ho(3),po(17)),qo(this),this.o=2,jo(this)):Uo(this,this.Y-e)},(wi=$o.prototype).R=function(){Wo(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},wi.T=function(){return Wo(this),this.g.concat()},wi.get=function(e,t){return Ko(this.h,e)?this.h[e]:t},wi.set=function(e,t){Ko(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},wi.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Ho=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Go(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Go){this.g=void 0!==t?t:e.g,Yo(this,e.j),this.s=e.s,Jo(this,e.i),Xo(this,e.m),this.l=e.l,t=e.h;var n=new ca;n.i=t.i,t.g&&(n.g=new $o(t.g),n.h=t.h),Zo(this,n),this.o=e.o}else e&&(n=String(e).match(Ho))?(this.g=!!t,Yo(this,n[1]||"",!0),this.s=na(n[2]||""),Jo(this,n[3]||"",!0),Xo(this,n[4]),this.l=na(n[5]||"",!0),Zo(this,n[6]||"",!0),this.o=na(n[7]||"")):(this.g=!!t,this.h=new ca(null,this.g))}function Qo(e){return new Go(e)}function Yo(e,t,n){e.j=n?na(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Jo(e,t,n){e.i=n?na(t,!0):t}function Xo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Zo(e,t,n){t instanceof ca?(e.h=t,function(e,t){t&&!e.j&&(ha(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(da(this,t),pa(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=ra(t,la)),e.h=new ca(t,e.g))}function ea(e,t,n){e.h.set(t,n)}function ta(e){return ea(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function na(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ra(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ia),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ia(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Go.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ra(t,sa,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ra(t,sa,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ra(n,"/"==n.charAt(0)?aa:oa,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ra(n,ua)),e.join("")};var sa=/[#\/\?@]/g,oa=/[#\?:]/g,aa=/[#\?]/g,la=/[#\?@]/g,ua=/#/g;function ca(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ha(e){e.g||(e.g=new $o,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function da(e,t){ha(e),t=ma(e,t),Ko(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ko((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Wo(e)))}function fa(e,t){return ha(e),t=ma(e,t),Ko(e.g.h,t)}function pa(e,t,n){da(e,t),0<n.length&&(e.i=null,e.g.set(ma(e,t),Vi(n)),e.h+=n.length)}function ma(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function ga(e){this.l=e||ya,e=Ei.PerformanceNavigationTiming?0<(e=Ei.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Ei.g&&Ei.g.Ea&&Ei.g.Ea()&&Ei.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(wi=ca.prototype).add=function(e,t){ha(this),this.i=null,e=ma(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},wi.forEach=function(e,t){ha(this),this.g.forEach((function(n,r){Fi(n,(function(n){e.call(t,n,r,this)}),this)}),this)},wi.T=function(){ha(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},wi.R=function(e){ha(this);var t=[];if("string"==typeof e)fa(this,e)&&(t=Ui(t,this.g.get(ma(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Ui(t,e[n])}return t},wi.set=function(e,t){return ha(this),this.i=null,fa(this,e=ma(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},wi.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},wi.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var ya=10;function va(e){return!!e.h||!!e.g&&e.g.size>=e.j}function wa(e){return e.h?1:e.g?e.g.size:0}function ba(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function _a(e,t){e.g?e.g.add(t):e.h=t}function Ia(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ea(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return Vi(e.i)}function ka(){}function Ta(){this.g=new ka}function Sa(e,t,n){const r=n||"";try{Bo(e,(function(e,n){let i=e;Si(e)&&(i=js(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Ca(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function Na(e){this.l=e.$b||null,this.j=e.ib||!1}function Aa(e,t){Fs.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ra,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ga.prototype.cancel=function(){if(this.i=Ea(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},ka.prototype.stringify=function(e){return Ei.JSON.stringify(e,void 0)},ka.prototype.parse=function(e){return Ei.JSON.parse(e,void 0)},Pi(Na,wo),Na.prototype.g=function(){return new Aa(this.l,this.j)},Na.prototype.i=function(e){return function(){return e}}({}),Pi(Aa,Fs);var Ra=0;function Da(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function xa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Pa(e)}function Pa(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(wi=Aa.prototype).open=function(e,t){if(this.readyState!=Ra)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Pa(this)},wi.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ei).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},wi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,xa(this)),this.readyState=Ra},wi.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pa(this)),this.g&&(this.readyState=3,Pa(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ei.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Da(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},wi.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xa(this):Pa(this),3==this.readyState&&Da(this)}},wi.Ua=function(e){this.g&&(this.response=this.responseText=e,xa(this))},wi.Ta=function(e){this.g&&(this.response=e,xa(this))},wi.ha=function(){this.g&&xa(this)},wi.setRequestHeader=function(e,t){this.v.append(e,t)},wi.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},wi.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Aa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Oa=Ei.JSON.parse;function La(e){Fs.call(this),this.headers=new $o,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ma,this.K=this.L=!1}Pi(La,Fs);var Ma="",Fa=/^https?$/i,Ua=["POST","PUT"];function Va(e){return"content-type"==e.toLowerCase()}function ja(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,qa(e),Ba(e)}function qa(e){e.D||(e.D=!0,Us(e,"complete"),Us(e,"error"))}function za(e){if(e.h&&void 0!==Ii&&(!e.C[1]||4!=Wa(e)||2!=e.ba()))if(e.v&&4==Wa(e))Xs(e.Fa,0,e);else if(Us(e,"readystatechange"),4==Wa(e)){e.h=!1;try{const a=e.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.H).match(Ho)[1]||null;if(!i&&Ei.self&&Ei.self.location){var s=Ei.self.location.protocol;i=s.substr(0,s.length-1)}r=!Fa.test(i?i.toLowerCase():"")}n=r}if(n)Us(e,"complete"),Us(e,"success");else{e.m=6;try{var o=2<Wa(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.ba()+"]",qa(e)}}finally{Ba(e)}}}function Ba(e,t){if(e.g){$a(e);const n=e.g,r=e.C[0]?ki:null;e.g=null,e.C=null,t||Us(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function $a(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ei.clearTimeout(e.A),e.A=null)}function Wa(e){return e.g?e.g.readyState:0}function Ka(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ma:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ha(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return Hi(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ea(e,t,n))}function Ga(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qa(e){this.za=0,this.l=[],this.h=new so,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ga("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ga("baseRetryDelayMs",5e3,e),this.$a=Ga("retryDelaySeedMs",1e4,e),this.Ya=Ga("forwardChannelMaxRetries",2,e),this.ra=Ga("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ga(e&&e.concurrentRequestLimit),this.Ca=new Ta,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Ya(e){if(Xa(e),3==e.G){var t=e.V++,n=Qo(e.F);ea(n,"SID",e.J),ea(n,"RID",t),ea(n,"TYPE","terminate"),nl(e,n),(t=new Co(e,e.h,t,void 0)).K=2,t.v=ta(Qo(n)),n=!1,Ei.navigator&&Ei.navigator.sendBeacon&&(n=Ei.navigator.sendBeacon(t.v.toString(),"")),!n&&Ei.Image&&((new Image).src=t.v,n=!0),n||(t.g=pl(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Fo(t)}dl(e)}function Ja(e){e.g&&(ol(e),e.g.cancel(),e.g=null)}function Xa(e){Ja(e),e.u&&(Ei.clearTimeout(e.u),e.u=null),ll(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Ei.clearTimeout(e.m),e.m=null)}function Za(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&el(e)}function el(e){va(e.i)||e.m||(e.m=!0,Ks(e.Ha,e),e.C=0)}function tl(e,t){var n;n=t?t.m:e.V++;const r=Qo(e.F);ea(r,"SID",e.J),ea(r,"RID",n),ea(r,"AID",e.U),nl(e,r),e.o&&e.s&&Ha(r,e.o,e.s),n=new Co(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=rl(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),_a(e.i,n),xo(n,r,t)}function nl(e,t){e.j&&Bo({},(function(e,n){ea(t,n,e)}))}function rl(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Di(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{Sa(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function il(e){e.g||e.u||(e.Y=1,Ks(e.Ga,e),e.A=0)}function sl(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=go(Di(e.Ga,e),cl(e,e.A)),e.A++,0))}function ol(e){null!=e.B&&(Ei.clearTimeout(e.B),e.B=null)}function al(e){e.g=new Co(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Qo(e.oa);ea(t,"RID","rpc"),ea(t,"SID",e.J),ea(t,"CI",e.N?"0":"1"),ea(t,"AID",e.U),nl(e,t),ea(t,"TYPE","xmlhttp"),e.o&&e.s&&Ha(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=ta(Qo(t)),n.s=null,n.U=!0,Po(n,e)}function ll(e){null!=e.v&&(Ei.clearTimeout(e.v),e.v=null)}function ul(e,t){var n=null;if(e.g==t){ll(e),ol(e),e.g=null;var r=2}else{if(!ba(e.i,t))return;n=t.D,Ia(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Us(r=uo(),new mo(r,n,t,i)),el(e)}else il(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(wa(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=go(Di(e.Ha,e,t),cl(e,e.C)),e.C++,0)))}(e,t)||2==r&&sl(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:hl(e,5);break;case 4:hl(e,10);break;case 3:hl(e,6);break;default:hl(e,2)}}function cl(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function hl(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Di(e.jb,e);n||(n=new Go("//www.google.com/images/cleardot.gif"),Ei.location&&"http"==Ei.location.protocol||Yo(n,"https"),ta(n)),function(e,t){const n=new so;if(Ei.Image){const r=new Image;r.onload=xi(Ca,n,r,"TestLoadImage: loaded",!0,t),r.onerror=xi(Ca,n,r,"TestLoadImage: error",!1,t),r.onabort=xi(Ca,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=xi(Ca,n,r,"TestLoadImage: timeout",!1,t),Ei.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else po(2);e.G=0,e.j&&e.j.va(t),dl(e),Xa(e)}function dl(e){e.G=0,e.I=-1,e.j&&(0==Ea(e.i).length&&0==e.l.length||(e.i.i.length=0,Vi(e.l),e.l.length=0),e.j.ua())}function fl(e,t,n){let r=function(e){return e instanceof Go?Qo(e):new Go(e,void 0)}(n);if(""!=r.i)t&&Jo(r,t+"."+r.i),Xo(r,r.m);else{const e=Ei.location;r=function(e,t,n,r){var i=new Go(null,void 0);return e&&Yo(i,e),t&&Jo(i,t),n&&Xo(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&Hi(e.aa,(function(e,t){ea(r,t,e)})),t=e.D,n=e.sa,t&&n&&ea(r,t,n),ea(r,"VER",e.ma),nl(e,r),r}function pl(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new La(new Na({ib:!0})):new La(e.qa)).L=e.H,t}function ml(){}function gl(){if(ts&&!(10<=Number(fs)))throw Error("Environmental error: no available transport.")}function yl(e,t){Fs.call(this),this.g=new Qa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ji(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ji(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new bl(this)}function vl(e){ko.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wl(){To.call(this),this.status=1}function bl(e){this.g=e}(wi=La.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Io.g(),this.C=this.u?bo(this.u):bo(Io),this.g.onreadystatechange=Di(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void ja(this,e)}e=n||"";const i=new $o(this.headers);r&&Bo(r,(function(e,t){i.set(t,e)})),r=function(e){e:{var t=Va;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=Ei.FormData&&e instanceof Ei.FormData,!(0<=Mi(Ua,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$a(this),0<this.B&&((this.K=function(e){return ts&&ds()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Di(this.pa,this)):this.A=Xs(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){ja(this,e)}},wi.pa=function(){void 0!==Ii&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Us(this,"timeout"),this.abort(8))},wi.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Us(this,"complete"),Us(this,"abort"),Ba(this))},wi.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ba(this,!0)),La.Z.M.call(this)},wi.Fa=function(){this.s||(this.F||this.v||this.l?za(this):this.cb())},wi.cb=function(){za(this)},wi.ba=function(){try{return 2<Wa(this)?this.g.status:-1}catch(e){return-1}},wi.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},wi.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Oa(t)}},wi.Da=function(){return this.m},wi.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(wi=Qa.prototype).ma=8,wi.G=1,wi.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},wi.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Co(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=Gi(s),Yi(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=rl(this,i,t),ea(n=Qo(this.F),"RID",e),ea(n,"CVER",22),this.D&&ea(n,"X-HTTP-Session-Id",this.D),nl(this,n),this.o&&s&&Ha(n,this.o,s),_a(this.i,i),this.Ra&&ea(n,"TYPE","init"),this.ja?(ea(n,"$req",t),ea(n,"SID","null"),i.$=!0,xo(i,n,null)):xo(i,n,t),this.G=2}}else 3==this.G&&(e?tl(this,e):0==this.l.length||va(this.i)||tl(this))},wi.Ga=function(){if(this.u=null,al(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=go(Di(this.bb,this),e)}},wi.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,po(10),Ja(this),al(this))},wi.ab=function(){null!=this.v&&(this.v=null,Ja(this),sl(this),po(19))},wi.jb=function(e){e?(this.h.info("Successfully pinged google.com"),po(2)):(this.h.info("Failed to ping google.com"),po(1))},(wi=ml.prototype).xa=function(){},wi.wa=function(){},wi.va=function(){},wi.ua=function(){},wi.Oa=function(){},gl.prototype.g=function(e,t){return new yl(e,t)},Pi(yl,Fs),yl.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ks(Di(e.hb,e,t))),po(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=fl(e,null,e.W),el(e)},yl.prototype.close=function(){Ya(this.g)},yl.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Za(this.g,t)}else this.v?((t={}).__data__=js(e),Za(this.g,t)):Za(this.g,e)},yl.prototype.M=function(){this.g.j=null,delete this.j,Ya(this.g),delete this.g,yl.Z.M.call(this)},Pi(vl,ko),Pi(wl,To),Pi(bl,ml),bl.prototype.xa=function(){Us(this.g,"a")},bl.prototype.wa=function(e){Us(this.g,new vl(e))},bl.prototype.va=function(e){Us(this.g,new wl(e))},bl.prototype.ua=function(){Us(this.g,"b")},gl.prototype.createWebChannel=gl.prototype.g,yl.prototype.send=yl.prototype.u,yl.prototype.open=yl.prototype.m,yl.prototype.close=yl.prototype.close,yo.NO_ERROR=0,yo.TIMEOUT=8,yo.HTTP_ERROR=6,vo.COMPLETE="complete",_o.EventType=Eo,Eo.OPEN="a",Eo.CLOSE="b",Eo.ERROR="c",Eo.MESSAGE="d",Fs.prototype.listen=Fs.prototype.N,La.prototype.listenOnce=La.prototype.O,La.prototype.getLastError=La.prototype.La,La.prototype.getLastErrorCode=La.prototype.Da,La.prototype.getStatus=La.prototype.ba,La.prototype.getResponseJson=La.prototype.Qa,La.prototype.getResponseText=La.prototype.ga,La.prototype.send=La.prototype.ea;var _l=_i.createWebChannelTransport=function(){return new gl},Il=_i.getStatEventTarget=function(){return uo()},El=_i.ErrorCode=yo,kl=_i.EventType=vo,Tl=_i.Event=ao,Sl=_i.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Cl=_i.FetchXmlHttpFactory=Na,Nl=_i.WebChannel=_o,Al=_i.XhrIo=La;const Rl="@firebase/firestore";class Dl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dl.UNAUTHENTICATED=new Dl(null),Dl.GOOGLE_CREDENTIALS=new Dl("google-credentials-uid"),Dl.FIRST_PARTY=new Dl("first-party-uid"),Dl.MOCK_USER=new Dl("mock-user");let xl="9.6.0";const Pl=new V("@firebase/firestore");function Ol(){return Pl.logLevel}function Ll(e,...t){if(Pl.logLevel<=O.DEBUG){const n=t.map(Ul);Pl.debug(`Firestore (${xl}): ${e}`,...n)}}function Ml(e,...t){if(Pl.logLevel<=O.ERROR){const n=t.map(Ul);Pl.error(`Firestore (${xl}): ${e}`,...n)}}function Fl(e,...t){if(Pl.logLevel<=O.WARN){const n=t.map(Ul);Pl.warn(`Firestore (${xl}): ${e}`,...n)}}function Ul(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Vl(e="Unexpected state"){const t=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: `+e;throw Ml(t),new Error(t)}function jl(e,t){e||Vl()}function ql(e,t){return e}const zl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bl extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $l{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Wl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Dl.UNAUTHENTICATED)))}shutdown(){}}class Hl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Gl{constructor(e){this.t=e,this.currentUser=Dl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new $l;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $l,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Ll("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ll("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $l)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ll("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(jl("string"==typeof t.accessToken),new Wl(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return jl(null===e||"string"==typeof e),new Dl(e)}}class Ql{constructor(e,t,n){this.type="FirstParty",this.user=Dl.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class Yl{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Ql(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(Dl.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Jl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xl{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=n=>{e.enqueueRetryable((()=>(e=>(null!=e.error&&Ll("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`),t(e.token)))(n)))};const n=e=>{Ll("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit((e=>n(e))),setTimeout((()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?n(e):Ll("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(jl("string"==typeof e.token),new Jl(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Zl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.p(e),this.T=e=>t.writeSequenceNumber(e))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function eu(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}Zl.I=-1;class tu{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=eu(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function nu(e,t){return e<t?-1:e>t?1:0}function ru(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function iu(e){return e+"\0"}class su{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Bl(zl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Bl(zl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Bl(zl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Bl(zl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return su.fromMillis(Date.now())}static fromDate(e){return su.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new su(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nu(this.nanoseconds,e.nanoseconds):nu(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ou{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ou(e)}static min(){return new ou(new su(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function au(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function lu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function uu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class cu{constructor(e,t,n){void 0===t?t=0:t>e.length&&Vl(),void 0===n?n=e.length-t:n>e.length-t&&Vl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===cu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cu?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class hu extends cu{construct(e,t,n){return new hu(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Bl(zl.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new hu(t)}static emptyPath(){return new hu([])}}const du=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fu extends cu{construct(e,t,n){return new fu(e,t,n)}static isValidIdentifier(e){return du.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fu.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fu(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Bl(zl.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Bl(zl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Bl(zl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Bl(zl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fu(t)}static emptyPath(){return new fu([])}}class pu{constructor(e){this.fields=e,e.sort(fu.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ru(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class mu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new mu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new mu(t)}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nu(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mu.EMPTY_BYTE_STRING=new mu("");const gu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yu(e){if(jl(!!e),"string"==typeof e){let t=0;const n=gu.exec(e);if(jl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:vu(e.seconds),nanos:vu(e.nanos)}}function vu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function wu(e){return"string"==typeof e?mu.fromBase64String(e):mu.fromUint8Array(e)}function bu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function _u(e){const t=e.mapValue.fields.__previous_value__;return bu(t)?_u(t):t}function Iu(e){const t=yu(e.mapValue.fields.__local_write_time__.timestampValue);return new su(t.seconds,t.nanos)}function Eu(e){return null==e}function ku(e){return 0===e&&1/e==-1/0}function Tu(e){return"number"==typeof e&&Number.isInteger(e)&&!ku(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class Su{constructor(e){this.path=e}static fromPath(e){return new Su(hu.fromString(e))}static fromName(e){return new Su(hu.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===hu.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hu.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Su(new hu(e.slice()))}}function Cu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bu(e)?4:10:Vl()}function Nu(e,t){const n=Cu(e);if(n!==Cu(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Iu(e).isEqual(Iu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=yu(e.timestampValue),r=yu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return wu(e.bytesValue).isEqual(wu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return vu(e.geoPointValue.latitude)===vu(t.geoPointValue.latitude)&&vu(e.geoPointValue.longitude)===vu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return vu(e.integerValue)===vu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=vu(e.doubleValue),r=vu(t.doubleValue);return n===r?ku(n)===ku(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ru(e.arrayValue.values||[],t.arrayValue.values||[],Nu);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(au(n)!==au(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!Nu(n[e],r[e])))return!1;return!0}(e,t);default:return Vl()}}function Au(e,t){return void 0!==(e.values||[]).find((e=>Nu(e,t)))}function Ru(e,t){const n=Cu(e),r=Cu(t);if(n!==r)return nu(n,r);switch(n){case 0:return 0;case 1:return nu(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=vu(e.integerValue||e.doubleValue),r=vu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Du(e.timestampValue,t.timestampValue);case 4:return Du(Iu(e),Iu(t));case 5:return nu(e.stringValue,t.stringValue);case 6:return function(e,t){const n=wu(e),r=wu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=nu(n[e],r[e]);if(0!==t)return t}return nu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=nu(vu(e.latitude),vu(t.latitude));return 0!==n?n:nu(vu(e.longitude),vu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Ru(n[e],r[e]);if(t)return t}return nu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=nu(r[e],s[e]);if(0!==t)return t;const o=Ru(n[r[e]],i[s[e]]);if(0!==o)return o}return nu(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Vl()}}function Du(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return nu(e,t);const n=yu(e),r=yu(t),i=nu(n.seconds,r.seconds);return 0!==i?i:nu(n.nanos,r.nanos)}function xu(e){return Pu(e)}function Pu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=yu(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?wu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Su.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Pu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Pu(e.fields[i])}`;return n+"}"}(e.mapValue):Vl();var t,n}function Ou(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Lu(e){return!!e&&"integerValue"in e}function Mu(e){return!!e&&"arrayValue"in e}function Fu(e){return!!e&&"nullValue"in e}function Uu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Vu(e){return!!e&&"mapValue"in e}function ju(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return lu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ju(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ju(e.arrayValue.values[n]);return t}return Object.assign({},e)}class qu{constructor(e){this.value=e}static empty(){return new qu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Vu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ju(t)}setAll(e){let t=fu.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ju(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Vu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Vu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){lu(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new qu(ju(this.value))}}function zu(e){const t=[];return lu(e.fields,((e,n)=>{const r=new fu([e]);if(Vu(n)){const e=zu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new pu(t)}class Bu{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new Bu(e,0,ou.min(),qu.empty(),0)}static newFoundDocument(e,t,n){return new Bu(e,1,t,n,0)}static newNoDocument(e,t){return new Bu(e,2,t,qu.empty(),0)}static newUnknownDocument(e,t){return new Bu(e,3,t,qu.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Bu(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $u{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.R=null}}function Wu(e,t=null,n=[],r=[],i=null,s=null,o=null){return new $u(e,t,n,r,i,s,o)}function Ku(e){const t=ql(e);if(null===t.R){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>function(e){return e.field.canonicalString()+e.op.toString()+xu(e.value)}(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Eu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=sc(t.startAt)),t.endAt&&(e+="|ub:",e+=sc(t.endAt)),t.R=e}return t.R}function Hu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ac(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(n=e.filters[i],r=t.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!Nu(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!uc(e.startAt,t.startAt)&&uc(e.endAt,t.endAt)}function Gu(e){return Su.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Qu extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,n):new Yu(e,t,n):"array-contains"===t?new ec(e,n):"in"===t?new tc(e,n):"not-in"===t?new nc(e,n):"array-contains-any"===t?new rc(e,n):new Qu(e,t,n)}static P(e,t,n){return"in"===t?new Ju(e,n):new Xu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ru(t,this.value)):null!==t&&Cu(this.value)===Cu(t)&&this.v(Ru(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Vl()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Yu extends Qu{constructor(e,t,n){super(e,t,n),this.key=Su.fromName(n.referenceValue)}matches(e){const t=Su.comparator(e.key,this.key);return this.v(t)}}class Ju extends Qu{constructor(e,t){super(e,"in",t),this.keys=Zu(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Xu extends Qu{constructor(e,t){super(e,"not-in",t),this.keys=Zu(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Zu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Su.fromName(e.referenceValue)))}class ec extends Qu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mu(t)&&Au(t.arrayValue,this.value)}}class tc extends Qu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Au(this.value.arrayValue,t)}}class nc extends Qu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Au(this.value.arrayValue,t)}}class rc extends Qu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Au(this.value.arrayValue,e)))}}class ic{constructor(e,t){this.position=e,this.before=t}}function sc(e){return`${e.before?"b":"a"}:${e.position.map((e=>xu(e))).join(",")}`}class oc{constructor(e,t="asc"){this.field=e,this.dir=t}}function ac(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function lc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Su.comparator(Su.fromName(o.referenceValue),n.key):Ru(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function uc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Nu(e.position[n],t.position[n]))return!1;return!0}class cc{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.S=null,this.D=null,this.startAt,this.endAt}}function hc(e,t,n,r,i,s,o,a){return new cc(e,t,n,r,i,s,o,a)}function dc(e){return new cc(e)}function fc(e){return!Eu(e.limit)&&"F"===e.limitType}function pc(e){return!Eu(e.limit)&&"L"===e.limitType}function mc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function gc(e){for(const t of e.filters)if(t.V())return t.field;return null}function yc(e){return null!==e.collectionGroup}function vc(e){const t=ql(e);if(null===t.S){t.S=[];const e=gc(t),n=mc(t);if(null!==e&&null===n)e.isKeyField()||t.S.push(new oc(e)),t.S.push(new oc(fu.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.S.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new oc(fu.keyField(),e))}}}return t.S}function wc(e){const t=ql(e);if(!t.D)if("F"===t.limitType)t.D=Wu(t.path,t.collectionGroup,vc(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of vc(t)){const t="desc"===n.dir?"asc":"desc";e.push(new oc(n.field,t))}const n=t.endAt?new ic(t.endAt.position,!t.endAt.before):null,r=t.startAt?new ic(t.startAt.position,!t.startAt.before):null;t.D=Wu(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.D}function bc(e,t,n){return new cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _c(e,t){return Hu(wc(e),wc(t))&&e.limitType===t.limitType}function Ic(e){return`${Ku(wc(e))}|lt:${e.limitType}`}function Ec(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${xu(t.value)}`;var t})).join(", ")}]`),Eu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: "+sc(e.startAt)),e.endAt&&(t+=", endAt: "+sc(e.endAt)),`Target(${t})`}(wc(e))}; limitType=${e.limitType})`}function kc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Su.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!lc(e.startAt,vc(e),t)||e.endAt&&lc(e.endAt,vc(e),t))}(e,t)}function Tc(e){return(t,n)=>{let r=!1;for(const i of vc(e)){const e=Sc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Sc(e,t,n){const r=e.field.isKeyField()?Su.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ru(r,i):Vl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Vl()}}function Cc(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ku(t)?"-0":t}}function Nc(e){return{integerValue:""+e}}function Ac(e,t){return Tu(t)?Nc(t):Cc(e,t)}class Rc{constructor(){this._=void 0}}function Dc(e,t,n){return e instanceof Oc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Lc?Mc(e,t):e instanceof Fc?Uc(e,t):function(e,t){const n=Pc(e,t),r=jc(n)+jc(e.N);return Lu(n)&&Lu(e.N)?Nc(r):Cc(e.k,r)}(e,t)}function xc(e,t,n){return e instanceof Lc?Mc(e,t):e instanceof Fc?Uc(e,t):n}function Pc(e,t){return e instanceof Vc?Lu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Oc extends Rc{}class Lc extends Rc{constructor(e){super(),this.elements=e}}function Mc(e,t){const n=qc(t);for(const t of e.elements)n.some((e=>Nu(e,t)))||n.push(t);return{arrayValue:{values:n}}}class Fc extends Rc{constructor(e){super(),this.elements=e}}function Uc(e,t){let n=qc(t);for(const t of e.elements)n=n.filter((e=>!Nu(e,t)));return{arrayValue:{values:n}}}class Vc extends Rc{constructor(e,t){super(),this.k=e,this.N=t}}function jc(e){return vu(e.integerValue||e.doubleValue)}function qc(e){return Mu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class zc{constructor(e,t){this.field=e,this.transform=t}}class Bc{constructor(e,t){this.version=e,this.transformResults=t}}class $c{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $c}static exists(e){return new $c(void 0,e)}static updateTime(e){return new $c(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Kc{}function Hc(e,t,n){e instanceof Xc?function(e,t,n){const r=e.value.clone(),i=th(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Zc?function(e,t,n){if(!Wc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=th(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(eh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Gc(e,t,n){e instanceof Xc?function(e,t,n){if(!Wc(e.precondition,t))return;const r=e.value.clone(),i=nh(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Jc(t),r).setHasLocalMutations()}(e,t,n):e instanceof Zc?function(e,t,n){if(!Wc(e.precondition,t))return;const r=nh(e.fieldTransforms,n,t),i=t.data;i.setAll(eh(e)),i.setAll(r),t.convertToFoundDocument(Jc(t),i).setHasLocalMutations()}(e,t,n):function(e,t){Wc(e.precondition,t)&&t.convertToNoDocument(ou.min())}(e,t)}function Qc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Pc(r.transform,e||null);null!=i&&(null==n&&(n=qu.empty()),n.set(r.field,i))}return n||null}function Yc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ru(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Lc&&t instanceof Lc||e instanceof Fc&&t instanceof Fc?ru(e.elements,t.elements,Nu):e instanceof Vc&&t instanceof Vc?Nu(e.N,t.N):e instanceof Oc&&t instanceof Oc}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Jc(e){return e.isFoundDocument()?e.version:ou.min()}class Xc extends Kc{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class Zc extends Kc{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function eh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function th(e,t,n){const r=new Map;jl(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,xc(o,a,n[i]))}return r}function nh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Dc(e,s,t))}return r}class rh extends Kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ih extends Kc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class sh{constructor(e){this.count=e}}var oh,ah;function lh(e){switch(e){default:return Vl();case zl.CANCELLED:case zl.UNKNOWN:case zl.DEADLINE_EXCEEDED:case zl.RESOURCE_EXHAUSTED:case zl.INTERNAL:case zl.UNAVAILABLE:case zl.UNAUTHENTICATED:return!1;case zl.INVALID_ARGUMENT:case zl.NOT_FOUND:case zl.ALREADY_EXISTS:case zl.PERMISSION_DENIED:case zl.FAILED_PRECONDITION:case zl.ABORTED:case zl.OUT_OF_RANGE:case zl.UNIMPLEMENTED:case zl.DATA_LOSS:return!0}}function uh(e){if(void 0===e)return Ml("GRPC error has no .code"),zl.UNKNOWN;switch(e){case oh.OK:return zl.OK;case oh.CANCELLED:return zl.CANCELLED;case oh.UNKNOWN:return zl.UNKNOWN;case oh.DEADLINE_EXCEEDED:return zl.DEADLINE_EXCEEDED;case oh.RESOURCE_EXHAUSTED:return zl.RESOURCE_EXHAUSTED;case oh.INTERNAL:return zl.INTERNAL;case oh.UNAVAILABLE:return zl.UNAVAILABLE;case oh.UNAUTHENTICATED:return zl.UNAUTHENTICATED;case oh.INVALID_ARGUMENT:return zl.INVALID_ARGUMENT;case oh.NOT_FOUND:return zl.NOT_FOUND;case oh.ALREADY_EXISTS:return zl.ALREADY_EXISTS;case oh.PERMISSION_DENIED:return zl.PERMISSION_DENIED;case oh.FAILED_PRECONDITION:return zl.FAILED_PRECONDITION;case oh.ABORTED:return zl.ABORTED;case oh.OUT_OF_RANGE:return zl.OUT_OF_RANGE;case oh.UNIMPLEMENTED:return zl.UNIMPLEMENTED;case oh.DATA_LOSS:return zl.DATA_LOSS;default:return Vl()}}(ah=oh||(oh={}))[ah.OK=0]="OK",ah[ah.CANCELLED=1]="CANCELLED",ah[ah.UNKNOWN=2]="UNKNOWN",ah[ah.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ah[ah.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ah[ah.NOT_FOUND=5]="NOT_FOUND",ah[ah.ALREADY_EXISTS=6]="ALREADY_EXISTS",ah[ah.PERMISSION_DENIED=7]="PERMISSION_DENIED",ah[ah.UNAUTHENTICATED=16]="UNAUTHENTICATED",ah[ah.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ah[ah.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ah[ah.ABORTED=10]="ABORTED",ah[ah.OUT_OF_RANGE=11]="OUT_OF_RANGE",ah[ah.UNIMPLEMENTED=12]="UNIMPLEMENTED",ah[ah.INTERNAL=13]="INTERNAL",ah[ah.UNAVAILABLE=14]="UNAVAILABLE",ah[ah.DATA_LOSS=15]="DATA_LOSS";class ch{constructor(e,t){this.comparator=e,this.root=t||dh.EMPTY}insert(e,t){return new ch(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dh.BLACK,null,null))}remove(e){return new ch(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hh(this.root,e,this.comparator,!0)}}class hh{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dh{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:dh.RED,this.left=null!=r?r:dh.EMPTY,this.right=null!=i?i:dh.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new dh(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return dh.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return dh.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vl();if(this.right.isRed())throw Vl();const e=this.left.check();if(e!==this.right.check())throw Vl();return e+(this.isRed()?0:1)}}dh.EMPTY=null,dh.RED=!0,dh.BLACK=!1,dh.EMPTY=new class{constructor(){this.size=0}get key(){throw Vl()}get value(){throw Vl()}get color(){throw Vl()}get left(){throw Vl()}get right(){throw Vl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new dh(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fh{constructor(e){this.comparator=e,this.data=new ch(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ph(this.data.getIterator())}getIteratorFrom(e){return new ph(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof fh))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new fh(this.comparator);return t.data=e,t}}class ph{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const mh=new ch(Su.comparator);function gh(){return mh}const yh=new ch(Su.comparator);function vh(){return yh}const wh=new ch(Su.comparator);function bh(){return wh}const _h=new fh(Su.comparator);function Ih(...e){let t=_h;for(const n of e)t=t.add(n);return t}const Eh=new fh(nu);function kh(){return Eh}class Th{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,Sh.createSynthesizedTargetChangeForCurrentChange(e,t)),new Th(ou.min(),n,kh(),gh(),Ih())}}class Sh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Sh(mu.EMPTY_BYTE_STRING,t,Ih(),Ih(),Ih())}}class Ch{constructor(e,t,n,r){this.$=e,this.removedTargetIds=t,this.key=n,this.F=r}}class Nh{constructor(e,t){this.targetId=e,this.O=t}}class Ah{constructor(e,t,n=mu.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Rh{constructor(){this.M=0,this.L=Ph(),this.B=mu.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=Ih(),t=Ih(),n=Ih();return this.L.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Vl()}})),new Sh(this.B,this.U,e,t,n)}H(){this.q=!1,this.L=Ph()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class Dh{constructor(e){this.et=e,this.nt=new Map,this.st=gh(),this.it=xh(),this.rt=new fh(nu)}ot(e){for(const t of e.$)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ut(e){this.forEachTarget(e,(t=>{const n=this.ht(t);switch(e.state){case 0:this.lt(t)&&n.W(e.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(e.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(t);break;case 3:this.lt(t)&&(n.tt(),n.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),n.W(e.resumeToken));break;default:Vl()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach(((e,n)=>{this.lt(n)&&t(n)}))}dt(e){const t=e.targetId,n=e.O.count,r=this.wt(t);if(r){const e=r.target;if(Gu(e))if(0===n){const n=new Su(e.path);this.ct(t,n,Bu.newNoDocument(n,ou.min()))}else jl(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach(((n,r)=>{const i=this.wt(r);if(i){if(n.current&&Gu(i.target)){const t=new Su(i.target.path);null!==this.st.get(t)||this.yt(r,t)||this.ct(r,t,Bu.newNoDocument(t,e))}n.j&&(t.set(r,n.G()),n.H())}}));let n=Ih();this.it.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.wt(e);return!t||2===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))}));const r=new Th(e,t,this.rt,this.st,n);return this.st=gh(),this.it=xh(),this.rt=new fh(nu),r}at(e,t){if(!this.lt(e))return;const n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.lt(e))return;const r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new Rh,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new fh(nu),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Ll("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new Rh),this.et.getRemoteKeysForTarget(e).forEach((t=>{this.ct(e,t,null)}))}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function xh(){return new ch(Su.comparator)}function Ph(){return new ch(Su.comparator)}const Oh={asc:"ASCENDING",desc:"DESCENDING"},Lh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Mh{constructor(e,t){this.databaseId=e,this.C=t}}function Fh(e,t){return e.C?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Uh(e,t){return e.C?t.toBase64():t.toUint8Array()}function Vh(e,t){return Fh(e,t.toTimestamp())}function jh(e){return jl(!!e),ou.fromTimestamp(function(e){const t=yu(e);return new su(t.seconds,t.nanos)}(e))}function qh(e,t){return function(e){return new hu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function zh(e){const t=hu.fromString(e);return jl(dd(t)),t}function Bh(e,t){return qh(e.databaseId,t.path)}function $h(e,t){const n=zh(t);if(n.get(1)!==e.databaseId.projectId)throw new Bl(zl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Bl(zl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Su(Gh(n))}function Wh(e,t){return qh(e.databaseId,t)}function Kh(e){const t=zh(e);return 4===t.length?hu.emptyPath():Gh(t)}function Hh(e){return new hu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gh(e){return jl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Qh(e,t,n){return{name:Bh(e,t),fields:n.value.mapValue.fields}}function Yh(e,t,n){const r=$h(e,t.name),i=jh(t.updateTime),s=new qu({mapValue:{fields:t.fields}}),o=Bu.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Jh(e,t){let n;if(t instanceof Xc)n={update:Qh(e,t.key,t.value)};else if(t instanceof rh)n={delete:Bh(e,t.key)};else if(t instanceof Zc)n={update:Qh(e,t.key,t.data),updateMask:hd(t.fieldMask)};else{if(!(t instanceof ih))return Vl();n={verify:Bh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Oc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Lc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vc)return{fieldPath:t.field.canonicalString(),increment:n.N};throw Vl()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Vh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Vl()}(e,t.precondition)),n}function Xh(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?$c.updateTime(jh(e.updateTime)):void 0!==e.exists?$c.exists(e.exists):$c.none()}(t.currentDocument):$c.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)jl("REQUEST_TIME"===t.setToServerValue),n=new Oc;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Lc(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Fc(e)}else"increment"in t?n=new Vc(e,t.increment):Vl();const r=fu.fromServerFormat(t.fieldPath);return new zc(r,n)}(e,t))):[];if(t.update){t.update.name;const i=$h(e,t.update.name),s=new qu({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new pu(t.map((e=>fu.fromServerFormat(e))))}(t.updateMask);return new Zc(i,s,e,n,r)}return new Xc(i,s,n,r)}if(t.delete){const r=$h(e,t.delete);return new rh(r,n)}if(t.verify){const r=$h(e,t.verify);return new ih(r,n)}return Vl()}function Zh(e,t){return{documents:[Wh(e,t.path)]}}function ed(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Wh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Wh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(Uu(e.value))return{unaryFilter:{field:ad(e.field),op:"IS_NAN"}};if(Fu(e.value))return{unaryFilter:{field:ad(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Uu(e.value))return{unaryFilter:{field:ad(e.field),op:"IS_NOT_NAN"}};if(Fu(e.value))return{unaryFilter:{field:ad(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ad(e.field),op:od(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:ad(e.field),direction:sd(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.C||Eu(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=rd(t.startAt)),t.endAt&&(n.structuredQuery.endAt=rd(t.endAt)),n}function td(e){let t=Kh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){jl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=nd(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new oc(ld(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Eu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=id(n.startAt));let u=null;return n.endAt&&(u=id(n.endAt)),hc(t,i,o,s,a,"F",l,u)}function nd(e){return e?void 0!==e.unaryFilter?[cd(e)]:void 0!==e.fieldFilter?[ud(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>nd(e))).reduce(((e,t)=>e.concat(t))):Vl():[]}function rd(e){return{before:e.before,values:e.position}}function id(e){const t=!!e.before,n=e.values||[];return new ic(n,t)}function sd(e){return Oh[e]}function od(e){return Lh[e]}function ad(e){return{fieldPath:e.canonicalString()}}function ld(e){return fu.fromServerFormat(e.fieldPath)}function ud(e){return Qu.create(ld(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Vl()}}(e.fieldFilter.op),e.fieldFilter.value)}function cd(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ld(e.unaryFilter.field);return Qu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ld(e.unaryFilter.field);return Qu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ld(e.unaryFilter.field);return Qu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ld(e.unaryFilter.field);return Qu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Vl()}}function hd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function dd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function fd(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=md(t)),t=pd(e.get(n),t);return md(t)}function pd(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function md(e){return e+""}function gd(e){const t=e.length;if(jl(t>=2),2===t)return jl(""===e.charAt(0)&&""===e.charAt(1)),hu.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>n)&&Vl(),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:Vl()}s=t+2}return new hu(r)}class yd{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class vd{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}vd.store="owner",vd.key="owner";class wd{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}wd.store="mutationQueues",wd.keyPath="userId";class bd{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}bd.store="mutations",bd.keyPath="batchId",bd.userMutationsIndex="userMutationsIndex",bd.userMutationsKeyPath=["userId","batchId"];class _d{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,fd(t)]}static key(e,t,n){return[e,fd(t),n]}}_d.store="documentMutations",_d.PLACEHOLDER=new _d;class Id{constructor(e,t){this.path=e,this.readTime=t}}class Ed{constructor(e,t){this.path=e,this.version=t}}class kd{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}kd.store="remoteDocuments",kd.readTimeIndex="readTimeIndex",kd.readTimeIndexPath="readTime",kd.collectionReadTimeIndex="collectionReadTimeIndex",kd.collectionReadTimeIndexPath=["parentPath","readTime"];class Td{constructor(e){this.byteSize=e}}Td.store="remoteDocumentGlobal",Td.key="remoteDocumentGlobalKey";class Sd{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}Sd.store="targets",Sd.keyPath="targetId",Sd.queryTargetsIndexName="queryTargetsIndex",Sd.queryTargetsKeyPath=["canonicalId","targetId"];class Cd{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}Cd.store="targetDocuments",Cd.keyPath=["targetId","path"],Cd.documentTargetsIndex="documentTargetsIndex",Cd.documentTargetsKeyPath=["path","targetId"];class Nd{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}Nd.key="targetGlobalKey",Nd.store="targetGlobal";class Ad{constructor(e,t){this.collectionId=e,this.parent=t}}Ad.store="collectionParents",Ad.keyPath=["collectionId","parent"];class Rd{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}Rd.store="clientMetadata",Rd.keyPath="clientId";class Dd{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}Dd.store="bundles",Dd.keyPath="bundleId";class xd{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}xd.store="namedQueries",xd.keyPath="name";const Pd=[wd.store,bd.store,_d.store,kd.store,Sd.store,vd.store,Nd.store,Cd.store,Rd.store,Td.store,Ad.store,Dd.store,xd.store],Od="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ld{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}class Md{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Vl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Md(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Md?t:Md.resolve(t)}catch(e){return Md.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Md.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Md.reject(t)}static resolve(e){return new Md(((t,n)=>{t(e)}))}static reject(e){return new Md(((t,n)=>{n(e)}))}static waitFor(e){return new Md(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Md.resolve(!1);for(const n of e)t=t.next((e=>e?Md.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}}class Fd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new $l,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new jd(e,t.error)):this.It.resolve()},this.transaction.onerror=t=>{const n=Wd(t.target.error);this.It.reject(new jd(e,n))}}static open(e,t,n,r){try{return new Fd(t,e.transaction(r,n))}catch(e){throw new jd(t,e)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Ll("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new zd(t)}}class Ud{constructor(e,t,n){this.name=e,this.version=t,this.Rt=n,12.2===Ud.Pt(u())&&Ml("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ll("SimpleDb","Removing database:",e),Bd(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!m())return!1;if(Ud.vt())return!0;const e=u(),t=Ud.Pt(e),n=0<t&&t<10,r=Ud.Vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static vt(){return"undefined"!=typeof process&&"YES"===(null==="MISSING_ENV_VAR"?void 0:"MISSING_ENV_VAR".St)}static Dt(e,t){return e.store(t)}static Pt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Ct(e){return this.db||(Ll("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new jd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Bl(zl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Bl(zl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new jd(e,r))},r.onupgradeneeded=e=>{Ll("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.Rt.Nt(t,r.transaction,e.oldVersion,this.version).next((()=>{Ll("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.kt&&(this.db.onversionchange=e=>this.kt(e)),this.db}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.Ct(e);const t=Fd.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).catch((e=>(t.abort(e),Md.reject(e)))).toPromise();return s.catch((()=>{})),await t.At,s}catch(e){const t="FirebaseError"!==e.name&&s<3;if(Ll("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Vd{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return Bd(this.$t.delete())}}class jd extends Bl{constructor(e,t){super(zl.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function qd(e){return"IndexedDbTransactionError"===e.name}class zd{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ll("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ll("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Bd(n)}add(e){return Ll("SimpleDb","ADD",this.store.name,e,e),Bd(this.store.add(e))}get(e){return Bd(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ll("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ll("SimpleDb","DELETE",this.store.name,e),Bd(this.store.delete(e))}count(){return Ll("SimpleDb","COUNT",this.store.name),Bd(this.store.count())}Bt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,((e,t)=>{r.push(t)})).next((()=>r))}qt(e,t){Ll("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Kt=!1;const r=this.cursor(n);return this.Ut(r,((e,t,n)=>n.delete()))}jt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Ut(r,t)}Qt(e){const t=this.cursor({});return new Md(((n,r)=>{t.onerror=e=>{const t=Wd(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}Ut(e,t){const n=[];return new Md(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Vd(i),o=t(i.primaryKey,i.value,s);if(o instanceof Md){const e=o.catch((e=>(s.done(),Md.reject(e))));n.push(e)}s.isDone?r():null===s.Mt?i.continue():i.continue(s.Mt)}})).next((()=>Md.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bd(e){return new Md(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Wd(e.target.error);n(t)}}))}let $d=!1;function Wd(e){const t=Ud.Pt(u());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Bl("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $d||($d=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Kd extends Ld{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function Hd(e,t){const n=ql(e);return Ud.Dt(n.Wt,t)}class Gd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&Hc(r,e,n[t])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Gc(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Gc(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach((t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(ou.min())}))}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ih())}isEqual(e){return this.batchId===e.batchId&&ru(this.mutations,e.mutations,((e,t)=>Yc(e,t)))&&ru(this.baseMutations,e.baseMutations,((e,t)=>Yc(e,t)))}}class Qd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){jl(e.mutations.length===n.length);let r=bh();const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Qd(e,t,n,r)}}class Yd{constructor(e,t,n,r,i=ou.min(),s=ou.min(),o=mu.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Yd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Yd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Yd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Jd{constructor(e){this.Gt=e}}function Xd(e,t){if(t.document)return Yh(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=Su.fromSegments(t.noDocument.path),n=rf(t.noDocument.readTime),r=Bu.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=Su.fromSegments(t.unknownDocument.path),n=rf(t.unknownDocument.version);return Bu.newUnknownDocument(e,n)}return Vl()}function Zd(e,t,n){const r=ef(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:Bh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Fh(e,t.version.toTimestamp())}}(e.Gt,t),s=t.hasCommittedMutations;return new kd(null,null,n,s,r,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=nf(t.version),s=t.hasCommittedMutations;return new kd(null,new Id(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=nf(t.version);return new kd(new Ed(e,n),null,null,!0,r,i)}return Vl()}function ef(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function tf(e){const t=new su(e[0],e[1]);return ou.fromTimestamp(t)}function nf(e){const t=e.toTimestamp();return new yd(t.seconds,t.nanoseconds)}function rf(e){const t=new su(e.seconds,e.nanoseconds);return ou.fromTimestamp(t)}function sf(e,t){const n=(t.baseMutations||[]).map((t=>Xh(e.Gt,t)));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map((t=>Xh(e.Gt,t))),i=su.fromMillis(t.localWriteTimeMs);return new Gd(t.batchId,i,n,r)}function of(e){const t=rf(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?rf(e.lastLimboFreeSnapshotVersion):ou.min();let r;var i;return void 0!==e.query.documents?(jl(1===(i=e.query).documents.length),r=wc(dc(Kh(i.documents[0])))):r=function(e){return wc(td(e))}(e.query),new Yd(r,e.targetId,0,e.lastListenSequenceNumber,t,n,mu.fromBase64String(e.resumeToken))}function af(e,t){const n=nf(t.snapshotVersion),r=nf(t.lastLimboFreeSnapshotVersion);let i;i=Gu(t.target)?Zh(e.Gt,t.target):ed(e.Gt,t.target);const s=t.resumeToken.toBase64();return new Sd(t.targetId,Ku(t.target),n,s,t.sequenceNumber,r,i)}function lf(e){const t=td({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?bc(t,t.limit,"L"):t}class uf{getBundleMetadata(e,t){return cf(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:rf(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return cf(e).put({bundleId:(n=t).id,createTime:nf(jh(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return hf(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:lf(t.bundledQuery),readTime:rf(t.readTime)};var t}))}saveNamedQuery(e,t){return hf(e).put(function(e){return{name:e.name,readTime:nf(jh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function cf(e){return Hd(e,Dd.store)}function hf(e){return Hd(e,xd.store)}class df{constructor(){this.zt=new ff}addToCollectionParentIndex(e,t){return this.zt.add(t),Md.resolve()}getCollectionParents(e,t){return Md.resolve(this.zt.getEntries(t))}}class ff{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fh(hu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new fh(hu.comparator)).toArray()}}class pf{constructor(){this.Ht=new ff}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.Ht.add(t)}));const i={collectionId:n,parent:fd(r)};return mf(e).put(i)}return Md.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[iu(t),""],!1,!0);return mf(e).Bt(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(gd(r.parent))}return n}))}}function mf(e){return Hd(e,Ad.store)}const gf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class yf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new yf(e,yf.DEFAULT_COLLECTION_PERCENTILE,yf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vf(e,t,n){const r=e.store(bd.store),i=e.store(_d.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.jt({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{jl(1===a)})));const u=[];for(const e of n.mutations){const r=_d.key(t,e.key.path,n.batchId);s.push(i.delete(r)),u.push(e.key)}return Md.waitFor(s).next((()=>u))}function wf(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Vl();t=e.noDocument}return JSON.stringify(t).length}yf.DEFAULT_COLLECTION_PERCENTILE=10,yf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yf.DEFAULT=new yf(41943040,yf.DEFAULT_COLLECTION_PERCENTILE,yf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yf.DISABLED=new yf(-1,0,0);class bf{constructor(e,t,n,r){this.userId=e,this.k=t,this.Jt=n,this.referenceDelegate=r,this.Yt={}}static Xt(e,t,n,r){jl(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new bf(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return If(e).jt({index:bd.userMutationsIndex,range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Ef(e),s=If(e);return s.add({}).next((o=>{jl("number"==typeof o);const a=new Gd(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Jh(e.Gt,t))),i=n.mutations.map((t=>Jh(e.Gt,t)));return new bd(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.k,this.userId,a),u=[];let c=new fh(((e,t)=>nu(e.canonicalString(),t.canonicalString())));for(const e of r){const t=_d.key(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,_d.PLACEHOLDER))}return c.forEach((t=>{u.push(this.Jt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Yt[o]=a.keys()})),Md.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return If(e).get(t).next((e=>e?(jl(e.userId===this.userId),sf(this.k,e)):null))}Zt(e,t){return this.Yt[t]?Md.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Yt[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return If(e).jt({index:bd.userMutationsIndex,range:r},((e,t,r)=>{t.userId===this.userId&&(jl(t.batchId>=n),i=sf(this.k,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return If(e).jt({index:bd.userMutationsIndex,range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return If(e).Bt(bd.userMutationsIndex,t).next((e=>e.map((e=>sf(this.k,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=_d.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Ef(e).jt({range:r},((n,r,s)=>{const[o,a,l]=n,u=gd(a);if(o===this.userId&&t.path.isEqual(u))return If(e).get(l).next((e=>{if(!e)throw Vl();jl(e.userId===this.userId),i.push(sf(this.k,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fh(nu);const r=[];return t.forEach((t=>{const i=_d.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Ef(e).jt({range:s},((e,r,i)=>{const[s,o,a]=e,l=gd(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Md.waitFor(r).next((()=>this.te(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=_d.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new fh(nu);return Ef(e).jt({range:s},((e,t,i)=>{const[s,a,l]=e,u=gd(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):i.done()})).next((()=>this.te(e,o)))}te(e,t){const n=[],r=[];return t.forEach((t=>{r.push(If(e).get(t).next((e=>{if(null===e)throw Vl();jl(e.userId===this.userId),n.push(sf(this.k,e))})))})),Md.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return vf(e.Wt,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.ee(t.batchId)})),Md.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Md.resolve();const n=IDBKeyRange.lowerBound(_d.prefixForUser(this.userId)),r=[];return Ef(e).jt({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=gd(e[1]);r.push(t)}else n.done()})).next((()=>{jl(0===r.length)}))}))}containsKey(e,t){return _f(e,this.userId,t)}ne(e){return kf(e).get(this.userId).next((e=>e||new wd(this.userId,-1,"")))}}function _f(e,t,n){const r=_d.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Ef(e).jt({range:s,Kt:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function If(e){return Hd(e,bd.store)}function Ef(e){return Hd(e,_d.store)}function kf(e){return Hd(e,wd.store)}class Tf{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new Tf(0)}static re(){return new Tf(-1)}}class Sf{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next((t=>{const n=new Tf(t.highestTargetId);return t.highestTargetId=n.next(),this.ae(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.oe(e).next((e=>ou.fromTimestamp(new su(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.oe(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.oe(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.ae(e,r))))}addTargetData(e,t){return this.ce(e,t).next((()=>this.oe(e).next((n=>(n.targetCount+=1,this.ue(t,n),this.ae(e,n))))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Cf(e).delete(t.targetId))).next((()=>this.oe(e))).next((t=>(jl(t.targetCount>0),t.targetCount-=1,this.ae(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Cf(e).jt(((s,o)=>{const a=of(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Md.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Cf(e).jt(((e,n)=>{const r=of(n);t(r)}))}oe(e){return Nf(e).get(Nd.key).next((e=>(jl(null!==e),e)))}ae(e,t){return Nf(e).put(Nd.key,t)}ce(e,t){return Cf(e).put(af(this.k,t))}ue(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.oe(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Ku(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Cf(e).jt({range:r,index:Sd.queryTargetsIndexName},((e,n,r)=>{const s=of(n);Hu(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Af(e);return t.forEach((t=>{const s=fd(t.path);r.push(i.put(new Cd(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))})),Md.waitFor(r)}removeMatchingKeys(e,t,n){const r=Af(e);return Md.forEach(t,(t=>{const i=fd(t.path);return Md.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Af(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Af(e);let i=Ih();return r.jt({range:n,Kt:!0},((e,t,n)=>{const r=gd(e[1]),s=new Su(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=fd(t.path),r=IDBKeyRange.bound([n],[iu(n)],!1,!0);let i=0;return Af(e).jt({index:Cd.documentTargetsIndex,Kt:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}Et(e,t){return Cf(e).get(t).next((e=>e?of(e):null))}}function Cf(e){return Hd(e,Sd.store)}function Nf(e){return Hd(e,Nd.store)}function Af(e){return Hd(e,Cd.store)}async function Rf(e){if(e.code!==zl.FAILED_PRECONDITION||e.message!==Od)throw e;Ll("LocalStore","Unexpectedly lost primary lease")}function Df([e,t],[n,r]){const i=nu(e,n);return 0===i?nu(t,r):i}class xf{constructor(e){this.he=e,this.buffer=new fh(Df),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Df(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Pf{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){const t=this.we?3e5:6e4;Ll("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this._e=null,this.we=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){qd(e)?Ll("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Rf(e)}await this.me(e)}))}}class Of{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Md.resolve(Zl.I);const n=new xf(t);return this.ge.forEachTarget(e,(e=>n.de(e.sequenceNumber))).next((()=>this.ge.pe(e,(e=>n.de(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.ge.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ll("LruGarbageCollector","Garbage collection skipped; disabled"),Md.resolve(gf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ll("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gf):this.Te(e,t)))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ll("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Ol()<=O.DEBUG&&Ll("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-u}ms`),Md.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}class Lf{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Of(e,t)}(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Ee(e){let t=0;return this.pe(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,((e,n)=>t(n)))}addReference(e,t,n){return Mf(e,n)}removeReference(e,t,n){return Mf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Mf(e,t)}Ae(e,t){return function(e,t){let n=!1;return kf(e).Qt((r=>_f(e,r,t).next((e=>(e&&(n=!0),Md.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Ie(e,((s,o)=>{if(o<=t){const t=this.Ae(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s),Af(e).delete([0,fd(s.path)]))))}));r.push(t)}})).next((()=>Md.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Mf(e,t)}Ie(e,t){const n=Af(e);let r,i=Zl.I;return n.jt({index:Cd.documentTargetsIndex},(([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Zl.I&&t(new Su(gd(r)),i),i=o,r=s):i=Zl.I})).next((()=>{i!==Zl.I&&t(new Su(gd(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mf(e,t){return Af(e).put(function(e,t){return new Cd(0,fd(e.path),t)}(t,e.currentSequenceNumber))}class Ff{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){lu(this.inner,((t,n)=>{for(const[t,r]of n)e(t,r)}))}isEmpty(){return uu(this.inner)}}class Uf{constructor(){this.changes=new Ff((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:ou.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Bu.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Md.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Vf{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,n){return zf(e).put(Bf(t),n)}removeEntry(e,t){const n=zf(e),r=Bf(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Re(e,n))))}getEntry(e,t){return zf(e).get(Bf(t)).next((e=>this.Pe(t,e)))}be(e,t){return zf(e).get(Bf(t)).next((e=>({document:this.Pe(t,e),size:wf(e)})))}getEntries(e,t){let n=gh();return this.ve(e,t,((e,t)=>{const r=this.Pe(e,t);n=n.insert(e,r)})).next((()=>n))}Ve(e,t){let n=gh(),r=new ch(Su.comparator);return this.ve(e,t,((e,t)=>{const i=this.Pe(e,t);n=n.insert(e,i),r=r.insert(e,wf(t))})).next((()=>({documents:n,Se:r})))}ve(e,t,n){if(t.isEmpty())return Md.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return zf(e).jt({range:r},((e,t,r)=>{const o=Su.fromSegments(e);for(;s&&Su.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Lt(s.path.toArray()):r.done()})).next((()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null}))}getDocumentsMatchingQuery(e,t,n){let r=gh();const i=t.path.length+1,s={};if(n.isEqual(ou.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=ef(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=kd.collectionReadTimeIndex}return zf(e).jt(s,((e,n,s)=>{if(e.length!==i)return;const o=Xd(this.k,n);t.path.isPrefixOf(o.key.path)?kc(t,o)&&(r=r.insert(o.key,o)):s.done()})).next((()=>r))}newChangeBuffer(e){return new jf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return qf(e).get(Td.key).next((e=>(jl(!!e),e)))}Re(e,t){return qf(e).put(Td.key,t)}Pe(e,t){if(t){const e=Xd(this.k,t);if(!e.isNoDocument()||!e.version.isEqual(ou.min()))return e}return Bu.newInvalidDocument(e)}}class jf extends Uf{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Ff((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new fh(((e,t)=>nu(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.Ce.get(i);if(s.document.isValidDocument()){const a=Zd(this.De.k,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const l=wf(a);n+=l-o,t.push(this.De.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=Zd(this.De.k,Bu.newNoDocument(i,ou.min()),this.getReadTime(i));t.push(this.De.addEntry(e,i,n))}else t.push(this.De.removeEntry(e,i))})),r.forEach((n=>{t.push(this.De.Jt.addToCollectionParentIndex(e,n))})),t.push(this.De.updateMetadata(e,n)),Md.waitFor(t)}getFromCache(e,t){return this.De.be(e,t).next((e=>(this.Ce.set(t,e.size),e.document)))}getAllFromCache(e,t){return this.De.Ve(e,t).next((({documents:e,Se:t})=>(t.forEach(((e,t)=>{this.Ce.set(e,t)})),e)))}}function qf(e){return Hd(e,Td.store)}function zf(e){return Hd(e,kd.store)}function Bf(e){return e.path.toArray()}class $f{constructor(e){this.k=e}Nt(e,t,n,r){jl(n<r&&n>=0&&r<=11);const i=new Fd("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(vd.store)}(e),function(e){e.createObjectStore(wd.store,{keyPath:wd.keyPath}),e.createObjectStore(bd.store,{keyPath:bd.keyPath,autoIncrement:!0}).createIndex(bd.userMutationsIndex,bd.userMutationsKeyPath,{unique:!0}),e.createObjectStore(_d.store)}(e),Wf(e),function(e){e.createObjectStore(kd.store)}(e));let s=Md.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Cd.store),e.deleteObjectStore(Sd.store),e.deleteObjectStore(Nd.store)}(e),Wf(e)),s=s.next((()=>function(e){const t=e.store(Nd.store),n=new Nd(0,0,ou.min().toTimestamp(),0);return t.put(Nd.key,n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store(bd.store).Bt().next((n=>{e.deleteObjectStore(bd.store),e.createObjectStore(bd.store,{keyPath:bd.keyPath,autoIncrement:!0}).createIndex(bd.userMutationsIndex,bd.userMutationsKeyPath,{unique:!0});const r=t.store(bd.store),i=n.map((e=>r.put(e)));return Md.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore(Rd.store,{keyPath:Rd.keyPath})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Ne(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore(Td.store)}(e),this.ke(i))))),n<7&&r>=7&&(s=s.next((()=>this.xe(i)))),n<8&&r>=8&&(s=s.next((()=>this.$e(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(kd.store);t.createIndex(kd.readTimeIndex,kd.readTimeIndexPath,{unique:!1}),t.createIndex(kd.collectionReadTimeIndex,kd.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(s=s.next((()=>this.Fe(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore(Dd.store,{keyPath:Dd.keyPath})}(e),function(e){e.createObjectStore(xd.store,{keyPath:xd.keyPath})}(e)}))),s}ke(e){let t=0;return e.store(kd.store).jt(((e,n)=>{t+=wf(n)})).next((()=>{const n=new Td(t);return e.store(Td.store).put(Td.key,n)}))}Ne(e){const t=e.store(wd.store),n=e.store(bd.store);return t.Bt().next((t=>Md.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Bt(bd.userMutationsIndex,r).next((n=>Md.forEach(n,(n=>{jl(n.userId===t.userId);const r=sf(this.k,n);return vf(e,t.userId,r).next((()=>{}))}))))}))))}xe(e){const t=e.store(Cd.store),n=e.store(kd.store);return e.store(Nd.store).get(Nd.key).next((e=>{const r=[];return n.jt(((n,i)=>{const s=new hu(n),o=function(e){return[0,fd(e)]}(s);r.push(t.get(o).next((n=>n?Md.resolve():(n=>t.put(new Cd(0,fd(n),e.highestListenSequenceNumber)))(s))))})).next((()=>Md.waitFor(r)))}))}$e(e,t){e.createObjectStore(Ad.store,{keyPath:Ad.keyPath});const n=t.store(Ad.store),r=new ff,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:fd(r)})}};return t.store(kd.store).jt({Kt:!0},((e,t)=>{const n=new hu(e);return i(n.popLast())})).next((()=>t.store(_d.store).jt({Kt:!0},(([e,t,n],r)=>{const s=gd(t);return i(s.popLast())}))))}Fe(e){const t=e.store(Sd.store);return t.jt(((e,n)=>{const r=of(n),i=af(this.k,r);return t.put(i)}))}}function Wf(e){e.createObjectStore(Cd.store,{keyPath:Cd.keyPath}).createIndex(Cd.documentTargetsIndex,Cd.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Sd.store,{keyPath:Sd.keyPath}).createIndex(Sd.queryTargetsIndexName,Sd.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Nd.store)}const Kf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Hf{constructor(e,t,n,r,i,s,o,a,l,u){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Me=l,this.Le=u,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=e=>Promise.resolve(),!Hf.bt())throw new Bl(zl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Lf(this,r),this.Ge=t+"main",this.k=new Jd(a),this.ze=new Ud(this.Ge,11,new $f(this.k)),this.He=new Sf(this.referenceDelegate,this.k),this.Jt=new pf,this.Je=function(e,t){return new Vf(e,t)}(this.k,this.Jt),this.Ye=new uf,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===u&&Ml("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Bl(zl.FAILED_PRECONDITION,Kf);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.He.getHighestSequenceNumber(e)))})).then((e=>{this.Be=new Zl(e,this.Me)})).then((()=>{this.Ue=!0})).catch((e=>(this.ze&&this.ze.close(),Promise.reject(e))))}sn(e){return this.We=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((async()=>{this.started&&await this.Ze()})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Qf(e).put(new Rd(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next((()=>{if(this.isPrimary)return this.rn(e).next((e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable((()=>this.We(!1))))}))})).next((()=>this.on(e))).next((t=>this.isPrimary&&!t?this.an(e).next((()=>!1)):!!t&&this.cn(e).next((()=>!0)))))).catch((e=>{if(qd(e))return Ll("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ll("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable((()=>this.We(e))),this.isPrimary=e}))}rn(e){return Gf(e).get(vd.key).next((e=>Md.resolve(this.un(e))))}hn(e){return Qf(e).delete(this.clientId)}async ln(){if(this.isPrimary&&!this.fn(this.Qe,18e5)){this.Qe=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Hd(e,Rd.store);return t.Bt().next((e=>{const n=this.dn(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Md.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Xe)for(const t of e)this.Xe.removeItem(this.wn(t.clientId))}}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ze().then((()=>this.ln())).then((()=>this.nn()))))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Md.resolve(!0):Gf(e).get(vd.key).next((t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Bl(zl.FAILED_PRECONDITION,Kf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qf(e).Bt().next((e=>void 0===this.dn(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Ll("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Ue=!1,this.mn(),this.je&&(this.je.cancel(),this.je=null),this.gn(),this.yn(),await this.ze.runTransaction("shutdown","readwrite",[vd.store,Rd.store],(e=>{const t=new Kd(e,Zl.I);return this.an(t).next((()=>this.hn(t)))})),this.ze.close(),this.pn()}dn(e,t){return e.filter((e=>this.fn(e.updateTimeMs,t)&&!this._n(e.clientId)))}Tn(){return this.runTransaction("getActiveClients","readonly",(e=>Qf(e).Bt().next((e=>this.dn(e,18e5).map((e=>e.clientId))))))}get started(){return this.Ue}getMutationQueue(e){return bf.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,n){Ll("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite";let i;return this.ze.runTransaction(e,r,Pd,(r=>(i=new Kd(r,this.Be?this.Be.next():Zl.I),"readwrite-primary"===t?this.rn(i).next((e=>!!e||this.on(i))).next((t=>{if(!t)throw Ml(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable((()=>this.We(!1))),new Bl(zl.FAILED_PRECONDITION,Od);return n(i)})).next((e=>this.cn(i).next((()=>e)))):this.En(i).next((()=>n(i)))))).then((e=>(i.raiseOnCommittedEvent(),e)))}En(e){return Gf(e).get(vd.key).next((e=>{if(null!==e&&this.fn(e.leaseTimestampMs,5e3)&&!this._n(e.ownerId)&&!this.un(e)&&!(this.Le||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Bl(zl.FAILED_PRECONDITION,Kf)}))}cn(e){const t=new vd(this.clientId,this.allowTabSynchronization,Date.now());return Gf(e).put(vd.key,t)}static bt(){return Ud.bt()}an(e){const t=Gf(e);return t.get(vd.key).next((e=>this.un(e)?(Ll("IndexedDbPersistence","Releasing primary lease."),t.delete(vd.key)):Md.resolve()))}fn(e,t){const n=Date.now();return!(e<n-t||e>n&&(Ml(`Detected an update time that is in the future: ${e} > ${n}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze())))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),!h()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Ll("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Ml("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Ml("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gf(e){return Hd(e,vd.store)}function Qf(e){return Hd(e,Rd.store)}function Yf(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Jf{constructor(e,t){this.progress=e,this.In=t}}class Xf{constructor(e,t,n){this.Je=e,this.An=t,this.Jt=n}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next((n=>this.Pn(e,t,n)))}Pn(e,t,n){return this.Je.getEntry(e,t).next((e=>{for(const t of n)t.applyToLocalView(e);return e}))}bn(e,t){e.forEach(((e,n)=>{for(const e of t)e.applyToLocalView(n)}))}vn(e,t){return this.Je.getEntries(e,t).next((t=>this.Vn(e,t).next((()=>t))))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>this.bn(t,e)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Su.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Sn(e,t.path):yc(t)?this.Dn(e,t,n):this.Cn(e,t,n)}Sn(e,t){return this.Rn(e,new Su(t)).next((e=>{let t=vh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}Dn(e,t,n){const r=t.collectionGroup;let i=vh();return this.Jt.getCollectionParents(e,r).next((s=>Md.forEach(s,(s=>{const o=function(e,t){return new cc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.Cn(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}Cn(e,t,n){let r,i;return this.Je.getDocumentsMatchingQuery(e,t,n).next((n=>(r=n,this.An.getAllMutationBatchesAffectingQuery(e,t)))).next((t=>(i=t,this.Nn(e,i,r).next((e=>{r=e;for(const e of i)for(const t of e.mutations){const n=t.key;let i=r.get(n);null==i&&(i=Bu.newInvalidDocument(n),r=r.insert(n,i)),Gc(t,i,e.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))))).next((()=>(r.forEach(((e,n)=>{kc(t,n)||(r=r.remove(e))})),r)))}Nn(e,t,n){let r=Ih();for(const e of t)for(const t of e.mutations)t instanceof Zc&&null===n.get(t.key)&&(r=r.add(t.key));let i=n;return this.Je.getEntries(e,r).next((e=>(e.forEach(((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))})),i)))}}class Zf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.kn=n,this.xn=r}static $n(e,t){let n=Ih(),r=Ih();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new Zf(e,t.fromCache,n,r)}}class ep{Fn(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(ou.min())?this.Mn(e,t):this.On.vn(e,r).next((i=>{const s=this.Ln(t,i);return(fc(t)||pc(t))&&this.Bn(t.limitType,s,r,n)?this.Mn(e,t):(Ol()<=O.DEBUG&&Ll("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ec(t)),this.On.getDocumentsMatchingQuery(e,t,n).next((e=>(s.forEach((t=>{e=e.insert(t.key,t)})),e))))}))}Ln(e,t){let n=new fh(Tc(e));return t.forEach(((t,r)=>{kc(e,r)&&(n=n.add(r))})),n}Bn(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mn(e,t){return Ol()<=O.DEBUG&&Ll("QueryEngine","Using full collection scan to execute query:",Ec(t)),this.On.getDocumentsMatchingQuery(e,t,ou.min())}}class tp{constructor(e,t,n,r){this.persistence=e,this.Un=t,this.k=r,this.qn=new ch(nu),this.Kn=new Ff((e=>Ku(e)),Hu),this.jn=ou.min(),this.An=e.getMutationQueue(n),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new Xf(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.qn)))}}function np(e,t,n,r){return new tp(e,t,n,r)}async function rp(e,t){const n=ql(e);let r=n.An,i=n.Wn;const s=await n.persistence.runTransaction("Handle user change","readonly",(e=>{let s;return n.An.getAllMutationBatches(e).next((o=>(s=o,r=n.persistence.getMutationQueue(t),i=new Xf(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)))).next((t=>{const n=[],r=[];let o=Ih();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.vn(e,o).next((e=>({Gn:e,removedBatchIds:n,addedBatchIds:r})))}))}));return n.An=r,n.Wn=i,n.Un.Fn(n.Wn),s}function ip(e){const t=ql(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.He.getLastRemoteSnapshotVersion(e)))}function sp(e,t,n,r,i){let s=Ih();return n.forEach((e=>s=s.add(e))),t.getEntries(e,s).next((e=>{let s=gh();return n.forEach(((n,o)=>{const a=e.get(n),l=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(ou.min())?(t.removeEntry(n,l),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,l),s=s.insert(n,o)):Ll("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),s}))}function op(e,t){const n=ql(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t))))}function ap(e,t){const n=ql(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.He.getTargetData(e,t).next((i=>i?(r=i,Md.resolve(r)):n.He.allocateTargetId(e).next((i=>(r=new Yd(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e}))}async function lp(e,t,n){const r=ql(e),i=r.qn.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!qd(e))throw e;Ll("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.qn=r.qn.remove(t),r.Kn.delete(i.target)}function up(e,t,n){const r=ql(e);let i=ou.min(),s=Ih();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=ql(e),i=r.Kn.get(n);return void 0!==i?Md.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,wc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Un.getDocumentsMatchingQuery(e,t,n?i:ou.min(),n?s:Ih()))).next((e=>({documents:e,zn:s})))))}function cp(e,t){const n=ql(e),r=ql(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.Et(e,t).next((e=>e?e.target:null))))}function hp(e){const t=ql(e);return t.persistence.runTransaction("Get new document changes","readonly",(e=>function(e,t,n){const r=ql(e);let i=gh(),s=ef(n);const o=zf(t),a=IDBKeyRange.lowerBound(s,!0);return o.jt({index:kd.readTimeIndex,range:a},((e,t)=>{const n=Xd(r.k,t);i=i.insert(n.key,n),s=t.readTime})).next((()=>({In:i,readTime:tf(s)})))}(t.Qn,e,t.jn))).then((({In:e,readTime:n})=>(t.jn=n,e)))}async function dp(e,t,n=Ih()){const r=await ap(e,wc(lf(t.bundledQuery))),i=ql(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=jh(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ye.saveNamedQuery(e,t);const o=r.withResumeToken(mu.EMPTY_BYTE_STRING,s);return i.qn=i.qn.insert(o.targetId,o),i.He.updateTargetData(e,o).next((()=>i.He.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.He.addMatchingKeys(e,n,r.targetId))).next((()=>i.Ye.saveNamedQuery(e,t)))}))}class fp{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Md.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:jh(n.createTime)}),Md.resolve()}getNamedQuery(e,t){return Md.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,function(e){return{name:e.name,query:lf(e.bundledQuery),readTime:jh(e.readTime)}}(t)),Md.resolve()}}class pp{constructor(){this.ts=new fh(mp.es),this.ns=new fh(mp.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const n=new mp(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.os(new mp(e,t))}cs(e,t){e.forEach((e=>this.removeReference(e,t)))}us(e){const t=new Su(new hu([])),n=new mp(t,e),r=new mp(t,e+1),i=[];return this.ns.forEachInRange([n,r],(e=>{this.os(e),i.push(e.key)})),i}hs(){this.ts.forEach((e=>this.os(e)))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new Su(new hu([])),n=new mp(t,e),r=new mp(t,e+1);let i=Ih();return this.ns.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new mp(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class mp{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return Su.comparator(e.key,t.key)||nu(e.fs,t.fs)}static ss(e,t){return nu(e.fs,t.fs)||Su.comparator(e.key,t.key)}}class gp{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new fh(mp.es)}checkEmpty(e){return Md.resolve(0===this.An.length)}addMutationBatch(e,t,n,r){const i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];const s=new Gd(i,t,n,r);this.An.push(s);for(const t of r)this.ws=this.ws.add(new mp(t.key,i)),this.Jt.addToCollectionParentIndex(e,t.key.path.popLast());return Md.resolve(s)}lookupMutationBatch(e,t){return Md.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.gs(n),i=r<0?0:r;return Md.resolve(this.An.length>i?this.An[i]:null)}getHighestUnacknowledgedBatchId(){return Md.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Md.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new mp(t,0),r=new mp(t,Number.POSITIVE_INFINITY),i=[];return this.ws.forEachInRange([n,r],(e=>{const t=this._s(e.fs);i.push(t)})),Md.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fh(nu);return t.forEach((e=>{const t=new mp(e,0),r=new mp(e,Number.POSITIVE_INFINITY);this.ws.forEachInRange([t,r],(e=>{n=n.add(e.fs)}))})),Md.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Su.isDocumentKey(i)||(i=i.child(""));const s=new mp(new Su(i),0);let o=new fh(nu);return this.ws.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)}),s),Md.resolve(this.ys(o))}ys(e){const t=[];return e.forEach((e=>{const n=this._s(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){jl(0===this.ps(t.batchId,"removed")),this.An.shift();let n=this.ws;return Md.forEach(t.mutations,(r=>{const i=new mp(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.ws=n}))}ee(e){}containsKey(e,t){const n=new mp(t,0),r=this.ws.firstAfterOrEqual(n);return Md.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.An.length,Md.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class yp{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new ch(Su.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Md.resolve(n?n.document.clone():Bu.newInvalidDocument(t))}getEntries(e,t){let n=gh();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():Bu.newInvalidDocument(e))})),Md.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=gh();const i=new Su(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||kc(t,i)&&(r=r.insert(i.key,i.clone()))}return Md.resolve(r)}Es(e,t){return Md.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new vp(this)}getSize(e){return Md.resolve(this.size)}}class vp extends Uf{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.document.isValidDocument()?t.push(this.De.addEntry(e,r.document,this.getReadTime(n))):this.De.removeEntry(n)})),Md.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class wp{constructor(e){this.persistence=e,this.Is=new Ff((e=>Ku(e)),Hu),this.lastRemoteSnapshotVersion=ou.min(),this.highestTargetId=0,this.As=0,this.Rs=new pp,this.targetCount=0,this.Ps=Tf.ie()}forEachTarget(e,t){return this.Is.forEach(((e,n)=>t(n))),Md.resolve()}getLastRemoteSnapshotVersion(e){return Md.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Md.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),Md.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),Md.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ps=new Tf(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Md.resolve()}updateTargetData(e,t){return this.ce(t),Md.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Md.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Is.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Is.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Md.waitFor(i).next((()=>r))}getTargetCount(e){return Md.resolve(this.targetCount)}getTargetData(e,t){const n=this.Is.get(t)||null;return Md.resolve(n)}addMatchingKeys(e,t,n){return this.Rs.rs(t,n),Md.resolve()}removeMatchingKeys(e,t,n){this.Rs.cs(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Md.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Md.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Rs.ls(t);return Md.resolve(n)}containsKey(e,t){return Md.resolve(this.Rs.containsKey(t))}}class bp{constructor(e,t){this.bs={},this.Be=new Zl(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new wp(this),this.Jt=new df,this.Je=function(e,t){return new yp(e,t)}(this.Jt,(e=>this.referenceDelegate.vs(e))),this.k=new Jd(t),this.Ye=new fp(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new gp(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,n){Ll("MemoryPersistence","Starting transaction:",e);const r=new _p(this.Be.next());return this.referenceDelegate.Vs(),n(r).next((e=>this.referenceDelegate.Ss(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ds(e,t){return Md.or(Object.values(this.bs).map((n=>()=>n.containsKey(e,t))))}}class _p extends Ld{constructor(e){super(),this.currentSequenceNumber=e}}class Ip{constructor(e){this.persistence=e,this.Cs=new pp,this.Ns=null}static ks(e){return new Ip(e)}get xs(){if(this.Ns)return this.Ns;throw Vl()}addReference(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),Md.resolve()}removeReference(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),Md.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Md.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach((e=>this.xs.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.xs.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Md.forEach(this.xs,(n=>{const r=Su.fromPath(n);return this.$s(e,r).next((e=>{e||t.removeEntry(r)}))})).next((()=>(this.Ns=null,t.apply(e))))}updateLimboDocument(e,t){return this.$s(e,t).next((e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())}))}vs(e){return 0}$s(e,t){return Md.or([()=>Md.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function Ep(e,t){return`firestore_clients_${e}_${t}`}function kp(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Tp(e,t){return`firestore_targets_${e}_${t}`}class Sp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Fs(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Bl(r.error.code,r.error.message))),s?new Sp(e,t,r.state,i):(Ml("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cp{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Fs(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Bl(n.error.code,n.error.message))),i?new Cp(e,n.state,r):(Ml("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Np{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Fs(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=kh();for(let e=0;r&&e<n.activeTargetIds.length;++e)r=Tu(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return r?new Np(e,i):(Ml("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ap{constructor(e,t){this.clientId=e,this.onlineState=t}static Fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ap(t.clientId,t.onlineState):(Ml("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Rp{constructor(){this.activeTargetIds=kh()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dp{constructor(e,t,n,r,i){this.window=e,this.Oe=t,this.persistenceKey=n,this.Bs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new ch(nu),this.started=!1,this.js=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=Ep(this.persistenceKey,this.Bs),this.Ws=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new Rp),this.Gs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Js=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Ys=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Tn();for(const t of e){if(t===this.Bs)continue;const e=this.getItem(Ep(this.persistenceKey,t));if(e){const n=Np.Fs(t,e);n&&(this.Ks=this.Ks.insert(n.clientId,n))}}this.Xs();const t=this.storage.getItem(this.Js);if(t){const e=this.Zs(t);e&&this.ti(e)}for(const e of this.js)this.qs(e);this.js=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,n){this.ni(e,t,n),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Tp(this.persistenceKey,e));if(n){const r=Cp.Fs(e,n);r&&(t=r.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Tp(this.persistenceKey,e))}updateQueryState(e,t,n){this.ri(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.si(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ll("SharedClientState","READ",e,t),t}setItem(e,t){Ll("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ll("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){const t=e;if(t.storageArea===this.storage){if(Ll("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Qs)return void Ml("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Gs.test(t.key)){if(null==t.newValue){const e=this.ci(t.key);return this.ui(e,null)}{const e=this.hi(t.key,t.newValue);if(e)return this.ui(e.clientId,e)}}else if(this.zs.test(t.key)){if(null!==t.newValue){const e=this.li(t.key,t.newValue);if(e)return this.fi(e)}}else if(this.Hs.test(t.key)){if(null!==t.newValue){const e=this.di(t.key,t.newValue);if(e)return this.wi(e)}}else if(t.key===this.Js){if(null!==t.newValue){const e=this.Zs(t.newValue);if(e)return this.ti(e)}}else if(t.key===this.Ws){const e=function(e){let t=Zl.I;if(null!=e)try{const n=JSON.parse(e);jl("number"==typeof n),t=n}catch(e){Ml("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Zl.I&&this.sequenceNumberHandler(e)}else if(t.key===this.Ys)return this.syncEngine._i()}else this.js.push(t)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,t,n){const r=new Sp(this.currentUser,e,t,n),i=kp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}si(e){const t=kp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){const t={clientId:this.Bs,onlineState:e};this.storage.setItem(this.Js,JSON.stringify(t))}ri(e,t,n){const r=Tp(this.persistenceKey,e),i=new Cp(e,t,n);this.setItem(r,i.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const n=this.ci(e);return Np.Fs(n,t)}li(e,t){const n=this.zs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Sp.Fs(new Dl(i),r,t)}di(e,t){const n=this.Hs.exec(e),r=Number(n[1]);return Cp.Fs(r,t)}Zs(e){return Ap.Fs(e)}async fi(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.mi(e.batchId,e.state,e.error);Ll("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const n=t?this.Ks.insert(e,t):this.Ks.remove(e),r=this.ei(this.Ks),i=this.ei(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.yi(s,o).then((()=>{this.Ks=n}))}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=kh();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class xp{constructor(){this.pi=new Rp,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,n){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new Rp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Pp{Ei(e){}shutdown(){}}class Op{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Ll("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){Ll("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Lp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Mp{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class Fp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.Mi=t+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,n,r,i){const s=this.Ui(e,t);Ll("RestConnection","Sending: ",s,n);const o={};return this.qi(o,r,i),this.Ki(e,s,o,n).then((e=>(Ll("RestConnection","Received: ",e),e)),(t=>{throw Fl("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t}))}ji(e,t,n,r,i){return this.Bi(e,t,n,r,i)}qi(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+xl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Ui(e,t){const n=Lp[e];return`${this.Mi}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,n,r){return new Promise(((i,s)=>{const o=new Al;o.listenOnce(kl.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case El.NO_ERROR:const t=o.getResponseJson();Ll("Connection","XHR received:",JSON.stringify(t)),i(t);break;case El.TIMEOUT:Ll("Connection",'RPC "'+e+'" timed out'),s(new Bl(zl.DEADLINE_EXCEEDED,"Request time out"));break;case El.HTTP_ERROR:const n=o.getStatus();if(Ll("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(zl).indexOf(t)>=0?t:zl.UNKNOWN}(e.status);s(new Bl(t,e.message))}else s(new Bl(zl.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Bl(zl.UNAVAILABLE,"Connection failed."));break;default:Vl()}}finally{Ll("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(r);o.send(t,"POST",a,n,15)}))}Qi(e,t,n){const r=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=_l(),s=Il(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Cl({})),this.qi(o.initMessageHeaders,t,n),c()||f()||u().indexOf("Electron/")>=0||p()||u().indexOf("MSAppHost/")>=0||d()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=r.join("");Ll("Connection","Creating WebChannel: "+a,o);const l=i.createWebChannel(a,o);let h=!1,m=!1;const g=new Mp({Vi:e=>{m?Ll("Connection","Not sending because WebChannel is closed:",e):(h||(Ll("Connection","Opening WebChannel transport."),l.open(),h=!0),Ll("Connection","WebChannel sending:",e),l.send(e))},Si:()=>l.close()}),y=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return y(l,Nl.EventType.OPEN,(()=>{m||Ll("Connection","WebChannel transport opened.")})),y(l,Nl.EventType.CLOSE,(()=>{m||(m=!0,Ll("Connection","WebChannel transport closed"),g.Fi())})),y(l,Nl.EventType.ERROR,(e=>{m||(m=!0,Fl("Connection","WebChannel transport errored:",e),g.Fi(new Bl(zl.UNAVAILABLE,"The operation could not be completed")))})),y(l,Nl.EventType.MESSAGE,(e=>{var t;if(!m){const n=e.data[0];jl(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Ll("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=oh[e];if(void 0!==t)return uh(t)}(e),n=i.message;void 0===t&&(t=zl.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),m=!0,g.Fi(new Bl(t,n)),l.close()}else Ll("Connection","WebChannel received:",n),g.Oi(n)}})),y(s,Tl.STAT_EVENT,(e=>{e.stat===Sl.PROXY?Ll("Connection","Detected buffering proxy"):e.stat===Sl.NOPROXY&&Ll("Connection","Detected no buffering proxy")})),setTimeout((()=>{g.$i()}),0),g}}function Up(){return"undefined"!=typeof window?window:null}function Vp(){return"undefined"!=typeof document?document:null}function jp(e){return new Mh(e,!0)}class qp{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=t,this.Wi=n,this.Gi=r,this.zi=i,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),r=Math.max(0,t-n);r>0&&Ll("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,r,(()=>(this.Yi=Date.now(),e()))),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class zp{constructor(e,t,n,r,i,s,o,a){this.Oe=e,this.nr=n,this.sr=r,this.ir=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new qp(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}async stop(){this.hr()&&await this.close(0)}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,(()=>this.mr())))}gr(e){this.yr(),this.stream.send(e)}async mr(){if(this.lr())return this.close(0)}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(e,t){this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==e?this.ur.reset():t&&t.code===zl.RESOURCE_EXHAUSTED?(Ml(t.toString()),Ml("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):t&&t.code===zl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ni(t)}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.rr===t&&this.Ir(e,n)}),(t=>{e((()=>{const e=new Bl(zl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Ar(e)}))}))}Ir(e,t){const n=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di((()=>{n((()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,(()=>(this.lr()&&(this.state=3),Promise.resolve()))),this.listener.Di())))})),this.stream.Ni((e=>{n((()=>this.Ar(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}dr(){this.state=5,this.ur.Zi((async()=>{this.state=0,this.start()}))}Ar(e){return Ll("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Oe.enqueueAndForget((()=>this.rr===e?t():(Ll("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Bp extends zp{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.k=i}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Vl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.C?(jl(void 0===t||"string"==typeof t),mu.fromBase64String(t||"")):(jl(void 0===t||t instanceof Uint8Array),mu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?zl.UNKNOWN:uh(e.code);return new Bl(t,e.message||"")}(o);n=new Ah(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=$h(e,r.document.name),s=jh(r.document.updateTime),o=new qu({mapValue:{fields:r.document.fields}}),a=Bu.newFoundDocument(i,s,o),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Ch(l,u,a.key,a)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=$h(e,r.document),s=r.readTime?jh(r.readTime):ou.min(),o=Bu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ch([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=$h(e,r.document),s=r.removedTargetIds||[];n=new Ch([],s,i,null)}else{if(!("filter"in t))return Vl();{t.filter;const e=t.filter;e.targetId;const r=e.count||0,i=new sh(r),s=e.targetId;n=new Nh(s,i)}}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return ou.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ou.min():t.readTime?jh(t.readTime):ou.min()}(e);return this.listener.Pr(t,n)}br(e){const t={};t.database=Hh(this.k),t.addTarget=function(e,t){let n;const r=t.target;return n=Gu(r)?{documents:Zh(e,r)}:{query:ed(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Uh(e,t.resumeToken):t.snapshotVersion.compareTo(ou.min())>0&&(n.readTime=Fh(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Vl()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,e);n&&(t.labels=n),this.gr(t)}vr(e){const t={};t.database=Hh(this.k),t.removeTarget=e,this.gr(t)}}class $p extends zp{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.k=i,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(jl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(e,t){return e&&e.length>0?(jl(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?jh(e.updateTime):jh(t);return n.isEqual(ou.min())&&(n=jh(t)),new Bc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=jh(e.commitTime);return this.listener.Cr(n,t)}return jl(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Hh(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Jh(this.k,e)))};this.gr(t)}}class Wp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=n,this.k=r,this.$r=!1}Fr(){if(this.$r)throw new Bl(zl.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.ir.Bi(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===zl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Bl(zl.UNKNOWN,e.toString())}))}ji(e,t,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,i])=>this.ir.ji(e,t,n,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===zl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Bl(zl.UNKNOWN,e.toString())}))}terminate(){this.$r=!0}}class Kp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve()))))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Ml(t),this.Lr=!1):Ll("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class Hp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=i,this.Hr.Ei((e=>{n.enqueueAndForget((async()=>{nm(this)&&(Ll("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ql(e);t.Gr.add(4),await Qp(t),t.Jr.set("Unknown"),t.Gr.delete(4),await Gp(t)}(this))}))})),this.Jr=new Kp(n,r)}}async function Gp(e){if(nm(e))for(const t of e.zr)await t(!0)}async function Qp(e){for(const t of e.zr)await t(!1)}function Yp(e,t){const n=ql(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),tm(n)?em(n):wm(n).lr()&&Xp(n,t))}function Jp(e,t){const n=ql(e),r=wm(n);n.Wr.delete(t),r.lr()&&Zp(n,t),0===n.Wr.size&&(r.lr()?r._r():nm(n)&&n.Jr.set("Unknown"))}function Xp(e,t){e.Yr.X(t.targetId),wm(e).br(t)}function Zp(e,t){e.Yr.X(t),wm(e).vr(t)}function em(e){e.Yr=new Dh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Wr.get(t)||null}),wm(e).start(),e.Jr.Br()}function tm(e){return nm(e)&&!wm(e).hr()&&e.Wr.size>0}function nm(e){return 0===ql(e).Gr.size}function rm(e){e.Yr=void 0}async function im(e){e.Wr.forEach(((t,n)=>{Xp(e,t)}))}async function sm(e,t){rm(e),tm(e)?(e.Jr.Kr(t),em(e)):e.Jr.set("Unknown")}async function om(e,t,n){if(e.Jr.set("Online"),t instanceof Ah&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Wr.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Wr.delete(r),e.Yr.removeTarget(r))}(e,t)}catch(n){Ll("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await am(e,n)}else if(t instanceof Ch?e.Yr.ot(t):t instanceof Nh?e.Yr.dt(t):e.Yr.ut(t),!n.isEqual(ou.min()))try{const t=await ip(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Yr.gt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.Wr.get(t);if(!n)return;e.Wr.set(t,n.withResumeToken(mu.EMPTY_BYTE_STRING,n.snapshotVersion)),Zp(e,t);const r=new Yd(n.target,t,1,n.sequenceNumber);Xp(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ll("RemoteStore","Failed to raise snapshot:",t),await am(e,t)}}async function am(e,t,n){if(!qd(t))throw t;e.Gr.add(1),await Qp(e),e.Jr.set("Offline"),n||(n=()=>ip(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ll("RemoteStore","Retrying IndexedDB access"),await n(),e.Gr.delete(1),await Gp(e)}))}function lm(e,t){return t().catch((n=>am(e,n,t)))}async function um(e){const t=ql(e),n=bm(t);let r=t.Qr.length>0?t.Qr[t.Qr.length-1].batchId:-1;for(;cm(t);)try{const e=await op(t.localStore,r);if(null===e){0===t.Qr.length&&n._r();break}r=e.batchId,hm(t,e)}catch(e){await am(t,e)}dm(t)&&fm(t)}function cm(e){return nm(e)&&e.Qr.length<10}function hm(e,t){e.Qr.push(t);const n=bm(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function dm(e){return nm(e)&&!bm(e).hr()&&e.Qr.length>0}function fm(e){bm(e).start()}async function pm(e){bm(e).kr()}async function mm(e){const t=bm(e);for(const n of e.Qr)t.Dr(n.mutations)}async function gm(e,t,n){const r=e.Qr.shift(),i=Qd.from(r,t,n);await lm(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await um(e)}async function ym(e,t){t&&bm(e).Sr&&await async function(e,t){if(lh(n=t.code)&&n!==zl.ABORTED){const n=e.Qr.shift();bm(e).wr(),await lm(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await um(e)}var n}(e,t),dm(e)&&fm(e)}async function vm(e,t){const n=ql(e);t?(n.Gr.delete(2),await Gp(n)):t||(n.Gr.add(2),await Qp(n),n.Jr.set("Unknown"))}function wm(e){return e.Xr||(e.Xr=function(e,t,n){const r=ql(e);return r.Fr(),new Bp(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:im.bind(null,e),Ni:sm.bind(null,e),Pr:om.bind(null,e)}),e.zr.push((async t=>{t?(e.Xr.wr(),tm(e)?em(e):e.Jr.set("Unknown")):(await e.Xr.stop(),rm(e))}))),e.Xr}function bm(e){return e.Zr||(e.Zr=function(e,t,n){const r=ql(e);return r.Fr(),new $p(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:pm.bind(null,e),Ni:ym.bind(null,e),Nr:mm.bind(null,e),Cr:gm.bind(null,e)}),e.zr.push((async t=>{t?(e.Zr.wr(),await um(e)):(await e.Zr.stop(),e.Qr.length>0&&(Ll("RemoteStore",`Stopping write stream with ${e.Qr.length} pending writes`),e.Qr=[]))}))),e.Zr}class _m{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new $l,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new _m(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bl(zl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Im(e,t){if(Ml("AsyncQueue",`${t}: ${e}`),qd(e))return new Bl(zl.UNAVAILABLE,`${t}: ${e}`);throw e}class Em{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Su.comparator(t.key,n.key):(e,t)=>Su.comparator(e.key,t.key),this.keyedMap=vh(),this.sortedSet=new ch(this.comparator)}static emptySet(e){return new Em(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Em))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Em;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class km{constructor(){this.eo=new ch(Su.comparator)}track(e){const t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):Vl():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Tm{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach((e=>{i.push({type:0,doc:e})})),new Tm(e,t,Em.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class Sm{constructor(){this.so=void 0,this.listeners=[]}}class Cm{constructor(){this.queries=new Ff((e=>Ic(e)),_c),this.onlineState="Unknown",this.io=new Set}}async function Nm(e,t){const n=ql(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Sm),i)try{s.so=await n.onListen(r)}catch(e){const n=Im(e,`Initialization of query '${Ec(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.ro(n.onlineState),s.so&&t.oo(s.so)&&xm(n)}async function Am(e,t){const n=ql(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Rm(e,t){const n=ql(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.oo(e)&&(r=!0);i.so=e}}r&&xm(n)}function Dm(e,t,n){const r=ql(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function xm(e){e.io.forEach((e=>{e.next()}))}class Pm{constructor(e,t,n){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Tm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.wo&&n||e.docs.isEmpty()&&"Offline"!==t)}ho(e){if(e.docChanges.length>0)return!0;const t=this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}fo(e){e=Tm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class Om{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class Lm{constructor(e){this.k=e}Hn(e){return $h(this.k,e)}Jn(e){return e.metadata.exists?Yh(this.k,e.document,!1):Bu.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return jh(e)}}class Mm{constructor(e,t,n){this.mo=e,this.localStore=t,this.k=n,this.queries=[],this.documents=[],this.progress=Fm(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,n=new Lm(this.k);for(const r of e)if(r.metadata.queries){const e=n.Hn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Ih()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=ql(e);let s=Ih(),o=gh(),a=bh();for(const e of n){const n=t.Hn(e.metadata.name);e.document&&(s=s.add(n)),o=o.insert(n,t.Jn(e)),a=a.insert(n,t.Yn(e.metadata.readTime))}const l=i.Qn.newChangeBuffer({trackRemovals:!0}),u=await ap(i,function(e){return wc(dc(hu.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>sp(e,l,o,ou.min(),a).next((t=>(l.apply(e),t))).next((t=>i.He.removeMatchingKeysForTargetId(e,u.targetId).next((()=>i.He.addMatchingKeys(e,s,u.targetId))).next((()=>i.Wn.Vn(e,t))).next((()=>t))))))}(this.localStore,new Lm(this.k),this.documents,this.mo.id),t=this.po(this.documents);for(const e of this.queries)await dp(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",new Jf(Object.assign({},this.progress),e)}}function Fm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Um{constructor(e){this.key=e}}class Vm{constructor(e){this.key=e}}class jm{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=Ih(),this.mutatedKeys=Ih(),this.Ao=Tc(e),this.Ro=new Em(this.Ao)}get Po(){return this.To}bo(e,t){const n=t?t.vo:new km,r=t?t.Ro:this.Ro;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=fc(this.query)&&r.size===this.query.limit?r.last():null,l=pc(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=kc(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Vo(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.Ao(c,a)>0||l&&this.Ao(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),fc(this.query)||pc(this.query))for(;s.size>this.query.limit;){const e=fc(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ro:s,vo:n,Bn:o,mutatedKeys:i}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const i=e.vo.no();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vl()}};return n(e)-n(t)}(e.type,t.type)||this.Ao(e.doc,t.doc))),this.So(n);const s=t?this.Do():[],o=0===this.Io.size&&this.current?1:0,a=o!==this.Eo;return this.Eo=o,0!==i.length||a?{snapshot:new Tm(this.query,e.Ro,r,i,e.mutatedKeys,0===o,a,!1),Co:s}:{Co:s}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new km,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach((e=>this.To=this.To.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.To=this.To.delete(e))),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=Ih(),this.Ro.forEach((e=>{this.No(e.key)&&(this.Io=this.Io.add(e.key))}));const t=[];return e.forEach((e=>{this.Io.has(e)||t.push(new Vm(e))})),this.Io.forEach((n=>{e.has(n)||t.push(new Um(n))})),t}ko(e){this.To=e.zn,this.Io=Ih();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return Tm.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class qm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class zm{constructor(e){this.key=e,this.$o=!1}}class Bm{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Fo={},this.Oo=new Ff((e=>Ic(e)),_c),this.Mo=new Map,this.Lo=new Set,this.Bo=new ch(Su.comparator),this.Uo=new Map,this.qo=new pp,this.Ko={},this.jo=new Map,this.Qo=Tf.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}async function $m(e,t){const n=gg(e);let r,i;const s=n.Oo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.xo();else{const e=await ap(n.localStore,wc(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Wm(n,t,r,"current"===s),n.isPrimaryClient&&Yp(n.remoteStore,e)}return i}async function Wm(e,t,n,r){e.Go=(t,n,r)=>async function(e,t,n,r){let i=t.view.bo(n);i.Bn&&(i=await up(e.localStore,t.query,!1).then((({documents:e})=>t.view.bo(e,i))));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return ng(e,t.targetId,o.Co),o.snapshot}(e,t,n,r);const i=await up(e.localStore,t,!0),s=new jm(t,i.zn),o=s.bo(i.documents),a=Sh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),l=s.applyChanges(o,e.isPrimaryClient,a);ng(e,n,l.Co);const u=new qm(t,n,s);return e.Oo.set(t,u),e.Mo.has(n)?e.Mo.get(n).push(t):e.Mo.set(n,[t]),l.snapshot}async function Km(e,t){const n=ql(e),r=n.Oo.get(t),i=n.Mo.get(r.targetId);if(i.length>1)return n.Mo.set(r.targetId,i.filter((e=>!_c(e,t)))),void n.Oo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await lp(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Jp(n.remoteStore,r.targetId),eg(n,r.targetId)})).catch(Rf)):(eg(n,r.targetId),await lp(n.localStore,r.targetId,!0))}async function Hm(e,t){const n=ql(e);try{const e=await function(e,t){const n=ql(e),r=t.snapshotVersion;let i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;const o=[];t.targetChanges.forEach(((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.He.removeMatchingKeys(e,t.removedDocuments,s).next((()=>n.He.addMatchingKeys(e,t.addedDocuments,s))));const l=t.resumeToken;if(l.approximateByteSize()>0){const u=a.withResumeToken(l,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,u),function(e,t,n){return jl(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,u,t)&&o.push(n.He.updateTargetData(e,u))}}));let a=gh();if(t.documentUpdates.forEach(((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(sp(e,s,t.documentUpdates,r,void 0).next((e=>{a=e}))),!r.isEqual(ou.min())){const t=n.He.getLastRemoteSnapshotVersion(e).next((t=>n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Md.waitFor(o).next((()=>s.apply(e))).next((()=>n.Wn.Vn(e,a))).next((()=>a))})).then((e=>(n.qn=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Uo.get(t);r&&(jl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.$o=!0:e.modifiedDocuments.size>0?jl(r.$o):e.removedDocuments.size>0&&(jl(r.$o),r.$o=!1))})),await sg(n,e,t)}catch(e){await Rf(e)}}function Gm(e,t,n){const r=ql(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Oo.forEach(((n,r)=>{const i=r.view.ro(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ql(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.ro(t)&&(r=!0)})),r&&xm(n)}(r.eventManager,t),e.length&&r.Fo.Pr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Qm(e,t,n){const r=ql(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Uo.get(t),s=i&&i.key;if(s){let e=new ch(Su.comparator);e=e.insert(s,Bu.newNoDocument(s,ou.min()));const n=Ih().add(s),i=new Th(ou.min(),new Map,new fh(nu),e,n);await Hm(r,i),r.Bo=r.Bo.remove(s),r.Uo.delete(t),ig(r)}else await lp(r.localStore,t,!1).then((()=>eg(r,t,n))).catch(Rf)}async function Ym(e,t){const n=ql(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ql(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Md.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);jl(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((()=>e.An.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.An.performConsistencyCheck(e))).next((()=>n.Wn.vn(e,r)))}))}(n.localStore,t);Zm(n,r,null),Xm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sg(n,e)}catch(e){await Rf(e)}}async function Jm(e,t,n){const r=ql(e);try{const e=await function(e,t){const n=ql(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.An.lookupMutationBatch(e,t).next((t=>(jl(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)))).next((()=>n.An.performConsistencyCheck(e))).next((()=>n.Wn.vn(e,r)))}))}(r.localStore,t);Zm(r,t,n),Xm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await sg(r,e)}catch(n){await Rf(n)}}function Xm(e,t){(e.jo.get(t)||[]).forEach((e=>{e.resolve()})),e.jo.delete(t)}function Zm(e,t,n){const r=ql(e);let i=r.Ko[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function eg(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Mo.get(t))e.Oo.delete(r),n&&e.Fo.zo(r,n);e.Mo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach((t=>{e.qo.containsKey(t)||tg(e,t)}))}function tg(e,t){e.Lo.delete(t.path.canonicalString());const n=e.Bo.get(t);null!==n&&(Jp(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),ig(e))}function ng(e,t,n){for(const r of n)r instanceof Um?(e.qo.addReference(r.key,t),rg(e,r)):r instanceof Vm?(Ll("SyncEngine","Document no longer in limbo: "+r.key),e.qo.removeReference(r.key,t),e.qo.containsKey(r.key)||tg(e,r.key)):Vl()}function rg(e,t){const n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(Ll("SyncEngine","New document in limbo: "+n),e.Lo.add(r),ig(e))}function ig(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){const t=e.Lo.values().next().value;e.Lo.delete(t);const n=new Su(hu.fromString(t)),r=e.Qo.next();e.Uo.set(r,new zm(n)),e.Bo=e.Bo.insert(n,r),Yp(e.remoteStore,new Yd(wc(dc(n.path)),r,2,Zl.I))}}async function sg(e,t,n){const r=ql(e),i=[],s=[],o=[];r.Oo.isEmpty()||(r.Oo.forEach(((e,a)=>{o.push(r.Go(a,t,n).then((e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Zf.$n(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Fo.Pr(i),await async function(e,t){const n=ql(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Md.forEach(t,(t=>Md.forEach(t.kn,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Md.forEach(t.xn,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!qd(e))throw e;Ll("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.qn.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.qn=n.qn.insert(t,i)}}}(r.localStore,s))}async function og(e,t){const n=ql(e);if(!n.currentUser.isEqual(t)){Ll("SyncEngine","User change. New user:",t.toKey());const e=await rp(n.localStore,t);n.currentUser=t,function(e,t){e.jo.forEach((e=>{e.forEach((e=>{e.reject(new Bl(zl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.jo.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await sg(n,e.Gn)}}function ag(e,t){const n=ql(e),r=n.Uo.get(t);if(r&&r.$o)return Ih().add(r.key);{let e=Ih();const r=n.Mo.get(t);if(!r)return e;for(const t of r){const r=n.Oo.get(t);e=e.unionWith(r.view.Po)}return e}}async function lg(e,t){const n=ql(e),r=await up(n.localStore,t.query,!0),i=t.view.ko(r);return n.isPrimaryClient&&ng(n,t.targetId,i.Co),i}async function ug(e){const t=ql(e);return hp(t.localStore).then((e=>sg(t,e)))}async function cg(e,t,n,r){const i=ql(e),s=await function(e,t){const n=ql(e),r=ql(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Zt(e,t).next((t=>t?n.Wn.vn(e,t):Md.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await um(i.remoteStore):"acknowledged"===n||"rejected"===n?(Zm(i,t,r||null),Xm(i,t),function(e,t){ql(ql(e).An).ee(t)}(i.localStore,t)):Vl(),await sg(i,s)):Ll("SyncEngine","Cannot apply mutation batch with id: "+t)}async function hg(e,t,n){const r=ql(e),i=[],s=[];for(const e of t){let t;const n=r.Mo.get(e);if(n&&0!==n.length){t=await ap(r.localStore,wc(n[0]));for(const e of n){const t=r.Oo.get(e),n=await lg(r,t);n.snapshot&&s.push(n.snapshot)}}else{const n=await cp(r.localStore,e);t=await ap(r.localStore,n),await Wm(r,dg(n),e,!1)}i.push(t)}return r.Fo.Pr(s),i}function dg(e){return hc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function fg(e){const t=ql(e);return ql(ql(t.localStore).persistence).Tn()}async function pg(e,t,n,r){const i=ql(e);if(i.Wo)Ll("SyncEngine","Ignoring unexpected query state notification.");else if(i.Mo.has(t))switch(n){case"current":case"not-current":{const e=await hp(i.localStore),r=Th.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);await sg(i,e,r);break}case"rejected":await lp(i.localStore,t,!0),eg(i,t,r);break;default:Vl()}}async function mg(e,t,n){const r=gg(e);if(r.Wo){for(const e of t){if(r.Mo.has(e)){Ll("SyncEngine","Adding an already active target "+e);continue}const t=await cp(r.localStore,e),n=await ap(r.localStore,t);await Wm(r,dg(t),n.targetId,!1),Yp(r.remoteStore,n)}for(const e of n)r.Mo.has(e)&&await lp(r.localStore,e,!1).then((()=>{Jp(r.remoteStore,e),eg(r,e)})).catch(Rf)}}function gg(e){const t=ql(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ag.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Qm.bind(null,t),t.Fo.Pr=Rm.bind(null,t.eventManager),t.Fo.zo=Dm.bind(null,t.eventManager),t}function yg(e){const t=ql(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ym.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Jm.bind(null,t),t}class vg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.k=jp(e.databaseInfo.databaseId),this.sharedClientState=this.Jo(e),this.persistence=this.Yo(e),await this.persistence.start(),this.gcScheduler=this.Xo(e),this.localStore=this.Zo(e)}Xo(e){return null}Zo(e){return np(this.persistence,new ep,e.initialUser,this.k)}Yo(e){return new bp(Ip.ks,this.k)}Jo(e){return new xp}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class wg extends vg{constructor(e,t,n){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await async function(e){const t=ql(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",(e=>function(e){const t=zf(e);let n=ou.min();return t.jt({index:kd.readTimeIndex,reverse:!0},((e,t,r)=>{t.readTime&&(n=tf(t.readTime)),r.done()})).next((()=>n))}(e))).then((e=>{t.jn=e}))}(this.localStore),await this.ta.initialize(this,e),await yg(this.ta.syncEngine),await um(this.ta.remoteStore),await this.persistence.sn((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve())))}Zo(e){return np(this.persistence,new ep,e.initialUser,this.k)}Xo(e){const t=this.persistence.referenceDelegate.garbageCollector;return new Pf(t,e.asyncQueue)}Yo(e){const t=Yf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?yf.withCacheSize(this.cacheSizeBytes):yf.DEFAULT;return new Hf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Up(),Vp(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new xp}}class bg extends wg{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ta.syncEngine;this.sharedClientState instanceof Dp&&(this.sharedClientState.syncEngine={mi:cg.bind(null,t),gi:pg.bind(null,t),yi:mg.bind(null,t),Tn:fg.bind(null,t),_i:ug.bind(null,t)},await this.sharedClientState.start()),await this.persistence.sn((async e=>{await async function(e,t){const n=ql(e);if(gg(n),yg(n),!0===t&&!0!==n.Wo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await hg(n,e.toArray());n.Wo=!0,await vm(n.remoteStore,!0);for(const e of t)Yp(n.remoteStore,e)}else if(!1===t&&!1!==n.Wo){const e=[];let t=Promise.resolve();n.Mo.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(eg(n,i),lp(n.localStore,i,!0)))),Jp(n.remoteStore,i)})),await t,await hg(n,e),function(e){const t=ql(e);t.Uo.forEach(((e,n)=>{Jp(t.remoteStore,n)})),t.qo.hs(),t.Uo=new Map,t.Bo=new ch(Su.comparator)}(n),n.Wo=!1,await vm(n.remoteStore,!1)}}(this.ta.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop())}))}Jo(e){const t=Up();if(!Dp.bt(t))throw new Bl(zl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Yf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class _g{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Gm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=og.bind(null,this.syncEngine),await vm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Cm}createDatastore(e){const t=jp(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new Fp(r));var r;return function(e,t,n,r){return new Wp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Gm(this.syncEngine,e,0),s=Op.bt()?new Op:new Pp,new Hp(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Bm(e,t,n,r,i,s);return o&&(a.Wo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=ql(e);Ll("RemoteStore","RemoteStore shutting down."),t.Gr.add(5),await Qp(t),t.Hr.shutdown(),t.Jr.set("Unknown")}(this.remoteStore)}}function Ig(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class Eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class kg{constructor(e,t){this.sa=e,this.k=t,this.metadata=new $l,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then((e=>{e&&e._o()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))}),(e=>this.metadata.reject(e)))}close(){return this.sa.cancel()}async getMetadata(){return this.metadata.promise}async Ho(){return await this.getMetadata(),this.ra()}async ra(){const e=await this.oa();if(null===e)return null;const t=this.ia.decode(e),n=Number(t);isNaN(n)&&this.aa(`length string (${t}) is not valid number`);const r=await this.ca(n);return new Om(JSON.parse(r),e.length+n)}ua(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async oa(){for(;this.ua()<0&&!await this.ha(););if(0===this.buffer.length)return null;const e=this.ua();e<0&&this.aa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async ca(e){for(;this.buffer.length<e;)await this.ha()&&this.aa("Reached the end of bundle when more is expected.");const t=this.ia.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ha(){const e=await this.sa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Tg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Bl(zl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=ql(e),r=Hh(n.k)+"/documents",i={documents:t.map((e=>Bh(n.k,e)))},s=await n.ji("BatchGetDocuments",r,i),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){jl(!!t.found),t.found.name,t.found.updateTime;const n=$h(e,t.found.name),r=jh(t.found.updateTime),i=new qu({mapValue:{fields:t.found.fields}});return Bu.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){jl(!!t.missing),jl(!!t.readTime);const n=$h(e,t.missing),r=jh(t.readTime);return Bu.newNoDocument(n,r)}(e,t):Vl()}(n.k,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());jl(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new rh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Su.fromPath(t);this.mutations.push(new ih(n,this.precondition(n)))})),await async function(e,t){const n=ql(e),r=Hh(n.k)+"/documents",i={writes:t.map((e=>Jh(n.k,e)))};await n.Bi("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Vl();t=ou.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Bl(zl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?$c.updateTime(t):$c.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ou.min()))throw new Bl(zl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $c.updateTime(t)}return $c.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Sg{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.la=5,this.ur=new qp(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){this.ur.Zi((async()=>{const e=new Tg(this.datastore),t=this.da(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.wa(e)}))))})).catch((e=>{this.wa(e)}))}))}da(e){try{const t=this.updateFunction(e);return!Eu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget((()=>(this.fa(),Promise.resolve())))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!lh(t)}return!1}}class Cg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Dl.UNAUTHENTICATED,this.clientId=tu.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ll("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(()=>Promise.resolve()))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Bl(zl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $l;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Im(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Ng(e,t){e.asyncQueue.verifyOperationInProgress(),Ll("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await rp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}async function Ag(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Rg(e);Ll("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>async function(e,t){const n=ql(e);n.asyncQueue.verifyOperationInProgress(),Ll("RemoteStore","RemoteStore received new credentials");const r=nm(n);n.Gr.add(3),await Qp(n),r&&n.Jr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Gr.delete(3),await Gp(n)}(t.remoteStore,e))),e.onlineComponents=t}async function Rg(e){return e.offlineComponents||(Ll("FirestoreClient","Using default OfflineComponentProvider"),await Ng(e,new vg)),e.offlineComponents}async function Dg(e){return e.onlineComponents||(Ll("FirestoreClient","Using default OnlineComponentProvider"),await Ag(e,new _g)),e.onlineComponents}function xg(e){return Rg(e).then((e=>e.persistence))}function Pg(e){return Rg(e).then((e=>e.localStore))}function Og(e){return Dg(e).then((e=>e.remoteStore))}function Lg(e){return Dg(e).then((e=>e.syncEngine))}async function Mg(e){const t=await Dg(e),n=t.eventManager;return n.onListen=$m.bind(null,t.syncEngine),n.onUnlisten=Km.bind(null,t.syncEngine),n}function Fg(e,t,n={}){const r=new $l;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Eg({next:s=>{t.enqueueAndForget((()=>Am(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Bl(zl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Bl(zl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Pm(dc(n.path),s,{includeMetadataChanges:!0,wo:!0});return Nm(e,o)}(await Mg(e),e.asyncQueue,t,n,r))),r.promise}function Ug(e,t,n={}){const r=new $l;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Eg({next:n=>{t.enqueueAndForget((()=>Am(e,o))),n.fromCache&&"server"===r.source?i.reject(new Bl(zl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Pm(n,s,{includeMetadataChanges:!0,wo:!0});return Nm(e,o)}(await Mg(e),e.asyncQueue,t,n,r))),r.promise}class Vg{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class jg{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jg&&e.projectId===this.projectId&&e.database===this.database}}const qg=new Map;function zg(e,t,n){if(!n)throw new Bl(zl.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Bg(e,t,n,r){if(!0===t&&!0===r)throw new Bl(zl.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function $g(e){if(!Su.isDocumentKey(e))throw new Bl(zl.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Wg(e){if(Su.isDocumentKey(e))throw new Bl(zl.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Kg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Vl()}function Hg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Bl(zl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kg(e);throw new Bl(zl.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Gg(e,t){if(t<=0)throw new Bl(zl.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Qg{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Bl(zl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Bl(zl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Bg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yg{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qg({}),this._settingsFrozen=!1,e instanceof jg?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Bl(zl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jg(e.options.projectId)}(e))}get app(){if(!this._app)throw new Bl(zl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Bl(zl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Kl;switch(e.type){case"gapi":const t=e.client;return jl(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Yl(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Bl(zl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=qg.get(e);t&&(Ll("ComponentProvider","Removing Datastore"),qg.delete(e),t.terminate())}(this),Promise.resolve()}}class Jg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jg(this.firestore,e,this._key)}}class Xg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Xg(this.firestore,e,this._query)}}class Zg extends Xg{constructor(e,t,n){super(e,t,dc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jg(this.firestore,null,new Su(e))}withConverter(e){return new Zg(this.firestore,e,this._path)}}function ey(e,t,...n){if(e=N(e),zg("collection","path",t),e instanceof Yg){const r=hu.fromString(t,...n);return Wg(r),new Zg(e,null,r)}{if(!(e instanceof Jg||e instanceof Zg))throw new Bl(zl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(hu.fromString(t,...n));return Wg(r),new Zg(e.firestore,null,r)}}function ty(e,t,...n){if(e=N(e),1===arguments.length&&(t=tu.A()),zg("doc","path",t),e instanceof Yg){const r=hu.fromString(t,...n);return $g(r),new Jg(e,null,new Su(r))}{if(!(e instanceof Jg||e instanceof Zg))throw new Bl(zl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(hu.fromString(t,...n));return $g(r),new Jg(e.firestore,e instanceof Zg?e.converter:null,new Su(r))}}function ny(e,t){return e=N(e),t=N(t),(e instanceof Jg||e instanceof Zg)&&(t instanceof Jg||t instanceof Zg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ry(e,t){return e=N(e),t=N(t),e instanceof Xg&&t instanceof Xg&&e.firestore===t.firestore&&_c(e._query,t._query)&&e.converter===t.converter}class iy{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new qp(this,"async_queue_retry"),this.Ra=()=>{const e=Vp();e&&Ll("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ur.er()};const e=Vp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=Vp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise((()=>{}));const t=new $l;return this.ba((()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ga.push(e),this.va())))}async va(){if(0!==this.ga.length){try{await this.ga[0](),this.ga.shift(),this.ur.reset()}catch(e){if(!qd(e))throw e;Ll("AsyncQueue","Operation failed with retryable error: "+e)}this.ga.length>0&&this.ur.Zi((()=>this.va()))}}ba(e){const t=this.ma.then((()=>(this.Ea=!0,e().catch((e=>{this.Ta=e,this.Ea=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ml("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Ea=!1,e))))));return this.ma=t,t}enqueueAfterDelay(e,t,n){this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);const r=_m.createAndSchedule(this,e,t,n,(e=>this.Va(e)));return this.pa.push(r),r}Pa(){this.Ta&&Vl()}verifyOperationInProgress(){}async Sa(){let e;do{e=this.ma,await e}while(e!==this.ma)}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then((()=>{this.pa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()}))}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function sy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class oy{constructor(){this._progressObserver={},this._taskCompletionResolver=new $l,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ay extends Yg{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new iy,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||uy(this),this._firestoreClient.terminate()}}function ly(e){return e._firestoreClient||uy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function uy(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new Vg(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Cg(e._authCredentials,e._appCheckCredentials,e._queue,r)}function cy(e,t,n){const r=new $l;return e.asyncQueue.enqueue((async()=>{try{await Ng(e,n),await Ag(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===zl.FAILED_PRECONDITION||e.code===zl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then((()=>r.promise))}function hy(e){if(e._initialized||e._terminated)throw new Bl(zl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class dy{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Bl(zl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fu(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fy(mu.fromBase64String(e))}catch(e){throw new Bl(zl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new fy(mu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class py{constructor(e){this._methodName=e}}class my{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Bl(zl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Bl(zl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nu(this._lat,e._lat)||nu(this._long,e._long)}}const gy=/^__.*__$/;class yy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Zc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xc(e,this.data,t,this.fieldTransforms)}}class vy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Zc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vl()}}class by{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.k=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ka(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new by(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.Ma(e),r}La(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.ka(),r}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return jy(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(wy(this.xa)&&gy.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class _y{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=n||jp(e)}ja(e,t,n,r=!1){return new by({xa:e,methodName:t,Ka:n,path:fu.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function Iy(e){const t=e._freezeSettings(),n=jp(e._databaseId);return new _y(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ey(e,t,n,r,i,s={}){const o=e.ja(s.merge||s.mergeFields?2:0,t,n,i);My("Data must be an object, but it was:",o,r);const a=Oy(r,o);let l,u;if(s.merge)l=new pu(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Fy(t,r,n);if(!o.contains(i))throw new Bl(zl.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);qy(e,i)||e.push(i)}l=new pu(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new yy(new qu(a),l,u)}class ky extends py{_toFieldTransform(e){if(2!==e.xa)throw 1===e.xa?e.Ua(`${this._methodName}() can only appear at the top level of your update data`):e.Ua(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ky}}function Ty(e,t,n){return new by({xa:3,Ka:t.settings.Ka,methodName:e._methodName,Oa:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}class Sy extends py{_toFieldTransform(e){return new zc(e.path,new Oc)}isEqual(e){return e instanceof Sy}}class Cy extends py{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=Ty(this,e,!0),n=this.Qa.map((e=>Py(e,t))),r=new Lc(n);return new zc(e.path,r)}isEqual(e){return this===e}}class Ny extends py{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=Ty(this,e,!0),n=this.Qa.map((e=>Py(e,t))),r=new Fc(n);return new zc(e.path,r)}isEqual(e){return this===e}}class Ay extends py{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new Vc(e.k,Ac(e.k,this.Wa));return new zc(e.path,t)}isEqual(e){return this===e}}function Ry(e,t,n,r){const i=e.ja(1,t,n);My("Data must be an object, but it was:",i,r);const s=[],o=qu.empty();lu(r,((e,r)=>{const a=Vy(t,e,n);r=N(r);const l=i.La(a);if(r instanceof ky)s.push(a);else{const e=Py(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new pu(s);return new vy(o,a,i.fieldTransforms)}function Dy(e,t,n,r,i,s){const o=e.ja(1,t,n),a=[Fy(t,r,n)],l=[i];if(s.length%2!=0)throw new Bl(zl.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)a.push(Fy(t,s[e])),l.push(s[e+1]);const u=[],c=qu.empty();for(let e=a.length-1;e>=0;--e)if(!qy(u,a[e])){const t=a[e];let n=l[e];n=N(n);const r=o.La(t);if(n instanceof ky)u.push(t);else{const e=Py(n,r);null!=e&&(u.push(t),c.set(t,e))}}const h=new pu(u);return new vy(c,h,o.fieldTransforms)}function xy(e,t,n,r=!1){return Py(n,e.ja(r?4:3,t))}function Py(e,t){if(Ly(e=N(e)))return My("Unsupported field value:",t,e),Oy(e,t);if(e instanceof py)return function(e,t){if(!wy(t.xa))throw t.Ua(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Ua(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Oa&&4!==t.xa)throw t.Ua("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Py(i,t.Ba(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=N(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ac(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=su.fromDate(e);return{timestampValue:Fh(t.k,n)}}if(e instanceof su){const n=new su(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Fh(t.k,n)}}if(e instanceof my)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof fy)return{bytesValue:Uh(t.k,e._byteString)};if(e instanceof Jg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Ua(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:qh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ua(`Unsupported field value: ${Kg(e)}`)}(e,t)}function Oy(e,t){const n={};return uu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):lu(e,((e,r)=>{const i=Py(r,t.Fa(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ly(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof su||e instanceof my||e instanceof fy||e instanceof Jg||e instanceof py)}function My(e,t,n){if(!Ly(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Kg(n);throw"an object"===r?t.Ua(e+" a custom object"):t.Ua(e+" "+r)}}function Fy(e,t,n){if((t=N(t))instanceof dy)return t._internalPath;if("string"==typeof t)return Vy(e,t);throw jy("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const Uy=new RegExp("[~\\*/\\[\\]]");function Vy(e,t,n){if(t.search(Uy)>=0)throw jy(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new dy(...t.split("."))._internalPath}catch(r){throw jy(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function jy(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Bl(zl.INVALID_ARGUMENT,a+e+l)}function qy(e,t){return e.some((e=>e.isEqual(t)))}class zy{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Jg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new By(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($y("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class By extends zy{data(){return super.data()}}function $y(e,t){return"string"==typeof t?Vy(e,t):t instanceof dy?t._internalPath:t._delegate._internalPath}class Wy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ky extends zy{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field($y("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Hy extends Ky{data(e={}){return super.data(e)}}class Gy{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Wy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Hy(this._firestore,this._userDataWriter,n.key,n,new Wy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Bl(zl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>({type:"added",doc:new Hy(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Wy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++})))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Hy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Wy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Qy(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Qy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vl()}}function Yy(e,t){return e instanceof Ky&&t instanceof Ky?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Gy&&t instanceof Gy&&e._firestore===t._firestore&&ry(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Jy(e){if(pc(e)&&0===e.explicitOrderBy.length)throw new Bl(zl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xy{}function Zy(e,...t){for(const n of t)e=n._apply(e);return e}class ev extends Xy{constructor(e,t,n){super(),this.Ga=e,this.za=t,this.Ha=n,this.type="where"}_apply(e){const t=Iy(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Bl(zl.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){av(o,s);const t=[];for(const n of o)t.push(ov(r,e,n));a={arrayValue:{values:t}}}else a=ov(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||av(o,s),a=xy(n,"where",o,"in"===s||"not-in"===s);const l=Qu.create(i,s,a);return function(e,t){if(t.V()){const n=gc(e);if(null!==n&&!n.isEqual(t.field))throw new Bl(zl.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=mc(e);null!==r&&lv(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Bl(zl.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Bl(zl.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,l),l}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new Xg(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class tv extends Xy{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Bl(zl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Bl(zl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new oc(t,n);return function(e,t){if(null===mc(e)){const n=gc(e);null!==n&&lv(0,n,t.field)}}(e,r),r}(e._query,this.Ga,this.Ja);return new Xg(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new cc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class nv extends Xy{constructor(e,t,n){super(),this.type=e,this.Ya=t,this.Xa=n}_apply(e){return new Xg(e.firestore,e.converter,bc(e._query,this.Ya,this.Xa))}}class rv extends Xy{constructor(e,t,n){super(),this.type=e,this.Za=t,this.tc=n}_apply(e){const t=sv(e,this.type,this.Za,this.tc);return new Xg(e.firestore,e.converter,function(e,t){return new cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class iv extends Xy{constructor(e,t,n){super(),this.type=e,this.Za=t,this.tc=n}_apply(e){const t=sv(e,this.type,this.Za,this.tc);return new Xg(e.firestore,e.converter,function(e,t){return new cc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function sv(e,t,n,r){if(n[0]=N(n[0]),n[0]instanceof zy)return function(e,t,n,r,i){if(!r)throw new Bl(zl.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of vc(e))if(n.field.isKeyField())s.push(Ou(t,r.key));else{const e=r.data.field(n.field);if(bu(e))throw new Bl(zl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new Bl(zl.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new ic(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Iy(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Bl(zl.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const l=i[s];if(o[s].field.isKeyField()){if("string"!=typeof l)throw new Bl(zl.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof l}`);if(!yc(e)&&-1!==l.indexOf("/"))throw new Bl(zl.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${l}' contains a slash.`);const n=e.path.child(hu.fromString(l));if(!Su.isDocumentKey(n))throw new Bl(zl.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new Su(n);a.push(Ou(t,i))}else{const e=xy(n,r,l);a.push(e)}}return new ic(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function ov(e,t,n){if("string"==typeof(n=N(n))){if(""===n)throw new Bl(zl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!yc(t)&&-1!==n.indexOf("/"))throw new Bl(zl.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(hu.fromString(n));if(!Su.isDocumentKey(r))throw new Bl(zl.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ou(e,new Su(r))}if(n instanceof Jg)return Ou(e,n._key);throw new Bl(zl.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kg(n)}.`)}function av(e,t){if(!Array.isArray(e)||0===e.length)throw new Bl(zl.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Bl(zl.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function lv(e,t,n){if(!n.isEqual(t))throw new Bl(zl.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class uv{convertValue(e,t="none"){switch(Cu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Vl()}}convertObject(e,t){const n={};return lu(e.fields,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new my(vu(e.latitude),vu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=_u(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){const t=yu(e);return new su(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=hu.fromString(e);jl(dd(n));const r=new jg(n.get(1),n.get(3)),i=new Su(n.popFirst(5));return r.isEqual(t)||Ml(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function cv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class hv extends uv{constructor(e){super(),this.firestore=e}convertBytes(e){return new fy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jg(this.firestore,null,t)}}class dv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Iy(e)}set(e,t,n){this._verifyNotCommitted();const r=fv(e,this._firestore),i=cv(r.converter,t,n),s=Ey(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,$c.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=fv(e,this._firestore);let s;return s="string"==typeof(t=N(t))||t instanceof dy?Dy(this._dataReader,"WriteBatch.update",i._key,t,n,r):Ry(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,$c.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=fv(e,this._firestore);return this._mutations=this._mutations.concat(new rh(t._key,$c.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Bl(zl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fv(e,t){if((e=N(e)).firestore!==t)throw new Bl(zl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class pv extends uv{constructor(e){super(),this.firestore=e}convertBytes(e){return new fy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jg(this.firestore,null,t)}}function mv(e,t,n){e=Hg(e,Jg);const r=Hg(e.firestore,ay),i=cv(e.converter,t,n);return vv(r,[Ey(Iy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,$c.none())])}function gv(e,t,n,...r){e=Hg(e,Jg);const i=Hg(e.firestore,ay),s=Iy(i);let o;return o="string"==typeof(t=N(t))||t instanceof dy?Dy(s,"updateDoc",e._key,t,n,r):Ry(s,"updateDoc",e._key,t),vv(i,[o.toMutation(e._key,$c.exists(!0))])}function yv(e,...t){var n,r,i;e=N(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||sy(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(sy(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,u,c;if(e instanceof Jg)u=Hg(e.firestore,ay),c=dc(e._key.path),l={next:n=>{t[o]&&t[o](wv(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Hg(e,Xg);u=Hg(n.firestore,ay),c=n._query;const r=new pv(u);l={next:e=>{t[o]&&t[o](new Gy(u,r,n,e))},error:t[o+1],complete:t[o+2]},Jy(e._query)}return function(e,t,n,r){const i=new Eg(r),s=new Pm(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Nm(await Mg(e),s))),()=>{i.na(),e.asyncQueue.enqueueAndForget((async()=>Am(await Mg(e),s)))}}(ly(u),c,a,l)}function vv(e,t){return function(e,t){const n=new $l;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=yg(e);try{const e=await function(e,t){const n=ql(e),r=su.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ih());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>n.Wn.vn(e,i).next((i=>{s=i;const o=[];for(const e of t){const t=Qc(e,s.get(e.key));null!=t&&o.push(new Zc(e.key,t,zu(t.value.mapValue),$c.exists(!0)))}return n.An.addMutationBatch(e,r,o,t)})))).then((e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ko[e.currentUser.toKey()];r||(r=new ch(nu)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(r,e.batchId,n),await sg(r,e.changes),await um(r.remoteStore)}catch(e){const t=Im(e,"Failed to persist write");n.reject(t)}}(await Lg(e),t,n))),n.promise}(ly(e),t)}function wv(e,t,n){const r=n.docs.get(t._key),i=new pv(e);return new Ky(e,i,t._key,r,new Wy(n.hasPendingWrites,n.fromCache),t.converter)}class bv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Iy(e)}get(e){const t=fv(e,this._firestore),n=new hv(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Vl();const r=e[0];if(r.isFoundDocument())return new zy(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new zy(this._firestore,n,t._key,null,t.converter);throw Vl()}))}set(e,t,n){const r=fv(e,this._firestore),i=cv(r.converter,t,n),s=Ey(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=fv(e,this._firestore);let s;return s="string"==typeof(t=N(t))||t instanceof dy?Dy(this._dataReader,"Transaction.update",i._key,t,n,r):Ry(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=fv(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=fv(e,this._firestore),n=new pv(this._firestore);return super.get(e).then((e=>new Ky(this._firestore,n,t._key,e._document,new Wy(!1,!1),t.converter)))}}function _v(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Bl("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function Iv(){if("undefined"==typeof Uint8Array)throw new Bl("unimplemented","Uint8Arrays are not available in this environment.")}function Ev(){if("undefined"==typeof atob)throw new Bl("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){!function(e){xl=e}(ne),Y(new A("firestore",((e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new ay(r,new Gl(e.getProvider("auth-internal")),new Xl(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i}),"PUBLIC")),ae(Rl,"3.4.0",e),ae(Rl,"3.4.0","esm2017")}();class kv{constructor(e){this._delegate=e}static fromBase64String(e){return Ev(),new kv(fy.fromBase64String(e))}static fromUint8Array(e){return Iv(),new kv(fy.fromUint8Array(e))}toBase64(){return Ev(),this._delegate.toBase64()}toUint8Array(){return Iv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Tv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}(e)}class Sv{enableIndexedDbPersistence(e,t){return function(e,t){hy(e=Hg(e,ay));const n=ly(e),r=e._freezeSettings(),i=new _g;return cy(n,i,new wg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){hy(e=Hg(e,ay));const t=ly(e),n=e._freezeSettings(),r=new _g;return cy(t,r,new bg(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Bl(zl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new $l;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ud.bt())return Promise.resolve();const t=e+"main";await Ud.delete(t)}(Yf(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Cv{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof jg||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Fl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=Hg(e,Yg))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Fl("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Dl.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Bl(zl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Dl(s)}e._authCredentials=new Hl(new Wl(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await xg(e),n=await Og(e);return t.setNetworkEnabled(!0),function(e){const t=ql(e);return t.Gr.delete(0),Gp(t)}(n)}))}(ly(e=Hg(e,ay)))}(this._delegate)}disableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await xg(e),n=await Og(e);return t.setNetworkEnabled(!1),async function(e){const t=ql(e);t.Gr.add(0),await Qp(t),t.Jr.set("Offline")}(n)}))}(ly(e=Hg(e,ay)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Bg("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){return function(e){const t=new $l;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=ql(e);nm(n.remoteStore)||Ll("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=ql(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.An.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.jo.get(e)||[];r.push(t),n.jo.set(e,r)}catch(e){const n=Im(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Lg(e),t))),t.promise}(ly(e=Hg(e,ay)))}(this._delegate)}onSnapshotsInSync(e){return function(e,t){return function(e,t){const n=new Eg(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){ql(e).io.add(t),t.next()}(await Mg(e),n))),()=>{n.na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){ql(e).io.delete(t)}(await Mg(e),n)))}}(ly(e=Hg(e,ay)),sy(t)?t:{next:t})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Bl("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new qv(this,ey(this._delegate,e))}catch(e){throw Pv(e,"collection()","Firestore.collection()")}}doc(e){try{return new xv(this,ty(this._delegate,e))}catch(e){throw Pv(e,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Uv(this,function(e,t){if(e=Hg(e,Yg),zg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Bl(zl.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Xg(e,null,function(e){return new cc(hu.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw Pv(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t){return function(e,t){const n=new $l;return e.asyncQueue.enqueueAndForget((async()=>{const r=await function(e){return Dg(e).then((e=>e.datastore))}(e);new Sg(e.asyncQueue,r,t,n).run()})),n.promise}(ly(e=Hg(e,ay)),(n=>t(new bv(e,n))))}(this._delegate,(t=>e(new Av(this,t))))}batch(){return ly(this._delegate),new Rv(new dv(this._delegate,(e=>vv(this._delegate,e))))}loadBundle(e){return function(e,t){const n=ly(e=Hg(e,ay)),r=new oy;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new kg(e,t)}(function(e,t){if(e instanceof Uint8Array)return Ig(e,t);if(e instanceof ArrayBuffer)return Ig(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,jp(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=ql(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=ql(e),r=jh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Ye.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r));n._updateProgress(Fm(r));const i=new Mm(r,e.localStore,t.k);let s=await t.Ho();for(;s;){const e=await i.yo(s);e&&n._updateProgress(e),s=await t.Ho()}const o=await i.complete();await sg(e,o.In,void 0),await function(e,t){const n=ql(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Ye.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress)}catch(e){Fl("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e)}})(r,t,n).then((()=>{r.sharedClientState.notifyBundleLoaded()}))}(await Lg(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return function(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=ql(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Ye.getNamedQuery(e,t)))}(await Pg(e),t)))}(ly(e=Hg(e,ay)),t).then((t=>t?new Xg(e,null,t.query):null))}(this._delegate,e).then((e=>e?new Uv(this,e):null))}}class Nv extends uv{constructor(e){super(),this.firestore=e}convertBytes(e){return new kv(new fy(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return xv.forKey(t,this.firestore,null)}}class Av{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Nv(e)}get(e){const t=zv(e);return this._delegate.get(t).then((e=>new Mv(this._firestore,new Ky(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=zv(e);return n?(_v("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=zv(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=zv(e);return this._delegate.delete(t),this}}class Rv{constructor(e){this._delegate=e}set(e,t,n){const r=zv(e);return n?(_v("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=zv(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=zv(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dv{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Hy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Fv(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Dv.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Dv(e,new Nv(e),t),r.set(t,i)),i}}Dv.INSTANCES=new WeakMap;class xv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nv(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Bl("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xv(t,new Jg(t._delegate,n,new Su(e)))}static forKey(e,t,n){return new xv(t,new Jg(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new qv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new qv(this.firestore,ey(this._delegate,e))}catch(e){throw Pv(e,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=N(e))instanceof Jg&&ny(this._delegate,e)}set(e,t){t=_v("DocumentReference.set",t);try{return t?mv(this._delegate,e,t):mv(this._delegate,e)}catch(e){throw Pv(e,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?gv(this._delegate,e):gv(this._delegate,e,t,...n)}catch(e){throw Pv(e,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return vv(Hg(e.firestore,ay),[new rh(e._key,$c.none())])}(this._delegate)}onSnapshot(...e){const t=Ov(e),n=Lv(e,(e=>new Mv(this.firestore,new Ky(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return yv(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Hg(e,Jg);const t=Hg(e.firestore,ay),n=ly(t),r=new pv(t);return function(e,t){const n=new $l;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=ql(e);return n.persistence.runTransaction("read document","readonly",(e=>n.Wn.Rn(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Bl(zl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Im(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await Pg(e),t,n))),n.promise}(n,e._key).then((n=>new Ky(t,r,e._key,n,new Wy(null!==n&&n.hasLocalMutations,!0),e.converter)))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Hg(e,Jg);const t=Hg(e.firestore,ay);return Fg(ly(t),e._key,{source:"server"}).then((n=>wv(t,e,n)))}(this._delegate):function(e){e=Hg(e,Jg);const t=Hg(e.firestore,ay);return Fg(ly(t),e._key).then((n=>wv(t,e,n)))}(this._delegate),t.then((e=>new Mv(this.firestore,new Ky(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new xv(this.firestore,e?this._delegate.withConverter(Dv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Pv(e,t,n){return e.message=e.message.replace(t,n),e}function Ov(e){for(const t of e)if("object"==typeof t&&!Tv(t))return t;return{}}function Lv(e,t){var n,r;let i;return i=Tv(e[0])?e[0]:Tv(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Mv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xv(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Yy(this._delegate,e._delegate)}}class Fv extends Mv{data(e){const t=this._delegate.data(e);return function(e,t){e||Vl()}(void 0!==t),t}}class Uv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nv(e)}where(e,t,n){try{return new Uv(this.firestore,Zy(this._delegate,function(e,t,n){const r=t,i=$y("where",e);return new ev(i,r,n)}(e,t,n)))}catch(e){throw Pv(e,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Uv(this.firestore,Zy(this._delegate,function(e,t="asc"){const n=t,r=$y("orderBy",e);return new tv(r,n)}(e,t)))}catch(e){throw Pv(e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Uv(this.firestore,Zy(this._delegate,function(e){return Gg("limit",e),new nv("limit",e,"F")}(e)))}catch(e){throw Pv(e,"limit()","Query.limit()")}}limitToLast(e){try{return new Uv(this.firestore,Zy(this._delegate,function(e){return Gg("limitToLast",e),new nv("limitToLast",e,"L")}(e)))}catch(e){throw Pv(e,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Uv(this.firestore,Zy(this._delegate,function(...e){return new rv("startAt",e,!0)}(...e)))}catch(e){throw Pv(e,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Uv(this.firestore,Zy(this._delegate,function(...e){return new rv("startAfter",e,!1)}(...e)))}catch(e){throw Pv(e,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Uv(this.firestore,Zy(this._delegate,function(...e){return new iv("endBefore",e,!0)}(...e)))}catch(e){throw Pv(e,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Uv(this.firestore,Zy(this._delegate,function(...e){return new iv("endAt",e,!1)}(...e)))}catch(e){throw Pv(e,"endAt()","Query.endAt()")}}isEqual(e){return ry(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Hg(e,Xg);const t=Hg(e.firestore,ay),n=ly(t),r=new pv(t);return function(e,t){const n=new $l;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await up(e,t,!0),i=new jm(t,r.zn),s=i.bo(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Im(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await Pg(e),t,n))),n.promise}(n,e._query).then((n=>new Gy(t,r,e,n)))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Hg(e,Xg);const t=Hg(e.firestore,ay),n=ly(t),r=new pv(t);return Ug(n,e._query,{source:"server"}).then((n=>new Gy(t,r,e,n)))}(this._delegate):function(e){e=Hg(e,Xg);const t=Hg(e.firestore,ay),n=ly(t),r=new pv(t);return Jy(e._query),Ug(n,e._query).then((n=>new Gy(t,r,e,n)))}(this._delegate),t.then((e=>new jv(this.firestore,new Gy(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=Ov(e),n=Lv(e,(e=>new jv(this.firestore,new Gy(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return yv(this._delegate,t,n)}withConverter(e){return new Uv(this.firestore,e?this._delegate.withConverter(Dv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Vv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Fv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Uv(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Fv(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Vv(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Fv(this._firestore,n))}))}isEqual(e){return Yy(this._delegate,e._delegate)}}class qv extends Uv{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xv(this.firestore,e):null}doc(e){try{return new xv(this.firestore,void 0===e?ty(this._delegate):ty(this._delegate,e))}catch(e){throw Pv(e,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Hg(e.firestore,ay),r=ty(e),i=cv(e.converter,t);return vv(n,[Ey(Iy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,$c.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new xv(this.firestore,e)))}isEqual(e){return ny(this._delegate,e._delegate)}withConverter(e){return new qv(this.firestore,e?this._delegate.withConverter(Dv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function zv(e){return Hg(e,Jg)}class Bv{constructor(...e){this._delegate=new dy(...e)}static documentId(){return new Bv(fu.keyField().canonicalString())}isEqual(e){return(e=N(e))instanceof dy&&this._delegate._internalPath.isEqual(e._internalPath)}}class $v{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Sy("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new $v(e)}static delete(){const e=new ky("deleteField");return e._methodName="FieldValue.delete",new $v(e)}static arrayUnion(...e){const t=function(...e){return new Cy("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new $v(t)}static arrayRemove(...e){const t=function(...e){return new Ny("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new $v(t)}static increment(e){const t=function(e){return new Ay("increment",e)}(e);return t._methodName="FieldValue.increment",new $v(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Wv={Firestore:Cv,GeoPoint:my,Timestamp:su,Blob:kv,Transaction:Av,WriteBatch:Rv,DocumentReference:xv,DocumentSnapshot:Mv,Query:Uv,QueryDocumentSnapshot:Fv,QuerySnapshot:jv,CollectionReference:qv,FieldPath:Bv,FieldValue:$v,setLogLevel:function(e){!function(e){Pl.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new A("firestore-compat",(e=>((e,t)=>new Cv(e,t,new Sv))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate())),"PUBLIC").setServiceProps(Object.assign({},Wv)))}(e),e.registerVersion("@firebase/firestore-compat","0.1.9")}(pe),console.log("AIzaSyBf_SpzuKsooz78APtry7WZRnoLwzp5po0"),pe.initializeApp({apiKey:"AIzaSyBf_SpzuKsooz78APtry7WZRnoLwzp5po0",authDomain:"maria-moran-luaces-3ba0b.REACT_APPapp.com",projectId:"maria-moran-luaces-3ba0b",storageBucket:"maria-moran-luaces-3ba0b.appspot.com",messagingSenderId:"800221740817",appId:"1 =800221740817 =web =aefcb7b92d75ec451196b0",measurementId:"G-L57ZL2S8R9"});const Kv=pe.firestore(),Hv=function(e){var n=e.img;return e.name,e.text,e.url,t.createElement("div",{className:"project"},t.createElement("img",{className:"project-main-image",src:n,alt:""}))};function Gv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Qv=function(){var e,n,r=(e=(0,t.useState)([]),n=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,n)||function(e,t){if(e){if("string"==typeof e)return Gv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gv(e,t):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],s=r[1];return(0,t.useEffect)((function(){Kv.collection("projects").get().then((function(e){var t=[];e.forEach((function(e){console.log(e.id),t.push({id:e.id,data:e.data()})})),s(t)}))}),[]),t.createElement("section",{className:"projects-section"},t.createElement("div",{className:"projects-section-info"},t.createElement("h1",null,"Conoce mis proyectos")),t.createElement("div",{className:"projects-container"},i.map((function(e){return t.createElement(Hv,{key:e.id,img:e.data.img,name:e.data.name,text:e.data.text,url:e.data.url})}))))},Yv=n.p+"assets/c3cde583dd3bc3a74f0691de6cbee7b9.png",Jv=n.p+"assets/bcc4de73d5cfb41bd0f99497fb09162d.png",Xv=function(e){var n=e.active,r=e.setActive;return t.createElement("nav",{className:n?"mobile-menu":"mobile-menu none"},t.createElement("span",{onClick:function(){r(!n)},className:"material-icons close-icon"},"close"),t.createElement("ul",null,t.createElement("li",null,t.createElement("a",{href:"#cover"},"Cover")),t.createElement("li",null,t.createElement("a",{href:"/"},"About")),t.createElement("li",null,t.createElement("a",{href:"/"},"Portfolio")),t.createElement("li",null,t.createElement("a",{href:"/"},"Contact"))),t.createElement("div",{className:"social-media"},t.createElement("a",{href:"/"},t.createElement("img",{src:Yv,alt:"Follow me on Twitter"})),t.createElement("a",{href:"/"},t.createElement("img",{src:Jv,alt:"Look at my Github"}))))};function Zv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const ew=function(){var e,n,r=(e=(0,t.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}(e,n)||function(e,t){if(e){if("string"==typeof e)return Zv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zv(e,t):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],s=r[1];return t.createElement("nav",{className:"menu"},t.createElement("h1",{className:"logo"},"Mara Morn"),t.createElement("span",{onClick:function(){s(!i)},className:"material-icons menu-icon"},"menu"),t.createElement("ul",{className:"navegation-menu-desktop"},t.createElement("li",null,t.createElement("a",{href:"#cover"},"Cover")),t.createElement("li",null,t.createElement("a",{href:"/"},"About")),t.createElement("li",null,t.createElement("a",{href:"/"},"Portfolio")),t.createElement("li",null,t.createElement("a",{href:"/"},"Contact"))),t.createElement(Xv,{active:i,setActive:s}))},tw=n.p+"assets/b48b2bcf41991babf74c22e09a18519c.jpg",nw=function(){return t.createElement("div",{className:"card"},t.createElement("img",{src:tw,alt:"me"}),t.createElement("div",{className:"card-info"},t.createElement("a",{href:"https://api.whatsapp.com/send?phone=34681050945",target:"_blank"},t.createElement("span",{className:"material-icons-outlined icon"},"call"),t.createElement("span",null,"+34 681 0509 45")),t.createElement("a",{href:"mailto:mariamoranluaces@gmail.com",target:"_blank"},t.createElement("span",{className:"material-icons-outlined icon"},"email"),t.createElement("span",null,"mariamoranluaces@gmail.com"))),t.createElement("a",{className:"card-button"},"Descarga mi CV"))},rw=function(e){var n=e.fillColor,r=void 0===n?"#A7C8C9":n,i=e.width,s=void 0===i?"800px":i,o=e.height,a=void 0===o?"800px":o;return t.createElement("svg",{version:"1.1",viewBox:"0 0 900 900",xmlns:"http://www.w3.org/2000/svg",className:"blob",width:s,height:a},t.createElement("g",{transform:"translate(403.68 525.22)"},t.createElement("path",{d:"m378-206.9c97.4 157.4 152 350.9 81.9 447.7-70.2 96.7-265 96.7-438.1 84.1s-324.3-37.7-386.4-129.8-34.9-251.1 40.7-395.9c75.6-144.9 199.8-275.5 332-280.2s272.5 116.7 369.9 274.1",fill:r})))},iw=function(){return t.createElement("section",{className:"cover-section",id:"cover"},t.createElement(rw,null),t.createElement(rw,{width:"400px",height:"400px"}),t.createElement("div",{className:"cover-left"},t.createElement("h2",null,"Mara Morn"),t.createElement("h1",null,"Software Engineer"),t.createElement("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Eius odio rem recusandae assumenda, voluptatum sunt amet saepe tenetur. Fuga nesciunt, labore iusto adipisci quos asperiores molestiae aut illo perferendis officiis?")),t.createElement("div",{className:"cover-right"},t.createElement(nw,null)))},sw=function(){return t.createElement("div",{className:"app"},t.createElement(ew,null),t.createElement(iw,null),t.createElement("div",{className:"content"},t.createElement(Qv,null)))};r.render(t.createElement(sw,null),document.getElementById("app"))})()})();